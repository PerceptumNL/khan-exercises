/* khan-exercise.js

	The main entry point here is actually the loadScripts method which is defined
	as Khan.loadScripts and then evaluated around line 500.

	When this loadScripts is called, it loads in many of the pre-reqs and then
	calls, one way or another, prepareUserExercise concurrently with loadModules.

	prepareUserExercise calls updateData and advances the problem counter 
	via setProblemNum. updateData refreshes the page ui based on this current
	problem (among other things). setProblemNum updates some instance vars
	that get looked at by other functions.

	loadModules takes care of loading an individual exercise's prereqs (i.e. 
	word problems, etc). It _also_ loads in the khan academy site skin and
	exercise template via injectSite which runs prepareSite first then 
	makeProblemBag and makeProblem when it finishes loading dependencies.

	pepareSite and makeProblem are both fairly heavyweight functions.

	If you are trying to register some behavior when the page loads, you
	probably want it to go in prepareSite. (which also registers server-initiated
	behavior via api.js) as well. By the time prepareSite is called, jquery and
	any core plugins are already available.

	If you are trying to do something each time a problem loads, you probably
	want to look at makeProblem.

	For obvious reasons window.userExercise is removed but it remains available
	to you from within the Khan object

	At the end of evaluation, the inner Khan object is returned/exposed as well
	as the inner Util object.

*/function rotatePoint(a,b,c){var d=KhanUtil.toRadians(b),e=Math.cos(d),f=Math.sin(d),c=c||[0,0],g=c[0],h=c[1],i=a[0],j=a[1],k=g+(i-g)*e-(j-h)*f,l=h+(i-g)*f+(j-h)*e;return[KhanUtil.roundTo(9,k),KhanUtil.roundTo(9,l)]}function RegularPolygon(a,b,c,d,e){function h(c){var e=d+Math.PI*c*1/b,f=2,g=f+5.4,h=[a[0]-Math.cos(e)*g,a[1]-Math.sin(e)*g],i=[g*Math.cos(e)+a[0],g*Math.sin(e)+a[1]];return[h,i]}var f=KhanUtil.currentGraph;d=d||0,d=KhanUtil.toRadians(d);var g=[];this.draw=function(){var e=2*Math.PI/b,f=[];for(var g=0;g<b;g++)f.push([a[0]+c*Math.cos(d+g*e),a[1]+c*Math.sin(d+g*e)]),f.push([a[0]+c*Math.cos(d+(g+1)*e),a[1]+c*Math.sin(d+(g+1)*e)]);return KhanUtil.currentGraph.path(f)},this.drawLineOfSymmetry=function(a,b){var c=h(a);return b=b||KhanUtil.BLUE,f.line.apply(f,jQuery.merge(c,[{stroke:b}]))},this.drawFakeLineOfSymmetry=function(a,c){c=c||KhanUtil.BLUE;var d=h(a),e=360/b/2,g=KhanUtil.randRange(10,e-10)*KhanUtil.randFromArray([-1,1]);return f.line(rotatePoint(d[0],g),rotatePoint(d[1],g),{stroke:c})},this.splitPath=function(a){var b=linePathIntersection(a,this.path),c=[],d=[];for(var e=0;e<this.path.graphiePath.length-1;e+=2){var g=this.path.graphiePath[e],h=this.path.graphiePath[e+1],i=findPointsOnLine([g,h],b);d.push(g);if(i.length!==0){var j=i[0];d.push(j),c.push(d),d=[j],b.splice(_(b).indexOf(j),1)}}return d.push(this.path[e]),c.push(d),f.path(c[1],{stroke:KhanUtil.ORANGE,"stroke-width":5})},this.path=this.draw()}function lineLength(a){var b=a[0],c=a[1];return Math.sqrt((b[0]-c[0])*(b[0]-c[0])+(b[1]-c[1])*(b[1]-c[1]))}function dotProduct(a,b){return a[0]*b[0]+a[1]*b[1]}function sameSide(a,b,c){var d=c[0],e=c[1],f=vectorProduct(e-d,a-d),g=vectorProduct(e-d,b-d);return dotProduct(f,g)>=0}function clearArray(a,b){return jQuery.map(a,function(a,c){return jQuery.inArray(c,b)!==-1?a:""})}function mergeArray(a,b){var c=0;for(c=0;c<a.length;c++)a[c]===""&&(a[c]=b[c]);return a}function isPointOnLineSegment(a,b,c){var c=c||.1;if(Math.abs(a[1][0]-a[0][0])<c)return Math.abs(b[0]-a[0][0])<c&&b[1]<=Math.max(a[1][1],a[0][1])+c&&b[1]>=Math.min(a[1][1],a[0][1])-c;var d=(a[1][1]-a[0][1])/(a[1][0]-a[0][0]),e=a[0][1]-d*a[0][0];return Math.abs(d*b[0]+e-b[1])<c}function findPointsOnLine(a,b){var c=[],b=b||[],d=0;for(d=0;d<b.length;d++)isPointOnLineSegment(a,b[d])&&c.push(b[d]);return c}function areIntersecting(a,b){var c,d=0;for(c=0;c<a.length;c++)for(d=0;d<b.length;d++)if(findIntersection(a[c],b[d])[2])return!0;return!1}function findIntersection(a,b){var c=[0,a[0][1],a[1][1],b[0][1],b[1][1]],d=[0,a[0][0],a[1][0],b[0][0],b[1][0]],e=(c[4]-c[3])*(d[2]-d[1])-(d[4]-d[3])*(c[2]-c[1]),f=((d[4]-d[3])*(c[1]-c[3])-(c[4]-c[3])*(d[1]-d[3]))/e,g=((d[2]-d[1])*(c[1]-c[3])-(c[2]-c[1])*(d[1]-d[3]))/e,h=f>=-0.01&&f<=1.01&&g>=-0.01&&g<=1.01;return[d[1]+f*(d[2]-d[1]),c[1]+f*(c[2]-c[1]),h]}function checkDuplicate(a,b){var c=0;for(c=0;c<a.length;c++)if(Math.sqrt((a[c][0]-b[0])*(a[c][0]-b[0])+(a[c][1]-b[1])*(a[c][1]-b[1]))<.1)return!0;return!1}function pointLineDistance(a,b){var c=[b[0][1],b[1][1]],d=[b[0][0],b[1][0]],e=(c[0]-c[1])*a[0]+(d[1]-d[0])*a[1]+(d[0]*c[1]-d[1]*c[0]),f=Math.sqrt((d[1]-d[0])*(d[1]-d[0])+(c[1]-c[0])*(c[1]-c[0]));return e/f}function reflectPoint(a,b){var c=(a[1][1]-a[0][1])/(a[1][0]-a[0][0]),d=a[0][1]-c*a[0][0],e=(b[0]+(b[1]-d)*c)/(1+c*c);return[2*e-b[0],2*e*c-b[1]+2*d]}function linePathIntersection(a,b){var c=[],d=b.graphiePath,a=a.graphiePath,e=0;for(e=0;e<d.length-1;e+=2){var f=findIntersection([d[e],d[e+1]],a);f[2]===!0&&!checkDuplicate(c,[f[0],f[1]])&&c.push([f[0],f[1]])}return c}function degToRad(a){return a*Math.PI/180}function lineEquation(a){var b=[a[0][0],a[1][0]],c=[a[0][1],a[1][1]],d=(a[1][1]-a[0][1])/(a[1][0]-a[0][0]),e=a[0][1]-d*a[0][0];return[d,e]}function lineSegmentFromLine(a,b,c){var d=lineEquation(b),e=d[0],f=Math.atan(e);return[a,[a[0]+Math.cos(f)*c,a[1]+Math.sin(f)*c]]}function parallelLine(a,b){var c=[b[0]-a[0][0],b[1]-a[0][1]];return[b,[a[1][0]+c[0],a[1][1]+c[1]]]}function movePoint(a,b){return[a[0]+b[0],a[1]+b[1]]}function bisectAngle(a,b,c){var d=findIntersection(a,b),e=[],f=[];return a[1][0]-a[0][0]>=0?e=lineSegmentFromLine(d,a,c):e=lineSegmentFromLine(d,a,-c),b[1][0]-b[0][0]>=0?f=lineSegmentFromLine(d,b,c):f=lineSegmentFromLine(d,b,-c),[d,parallelLine(e,f[1])[1]]}function lineMidpoint(a){return[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]}function vectorProduct(a,b){var c=a[1][0]-a[0][0],d=b[1][0]-b[0][0],e=a[1][1]-a[0][1],f=b[1][1]-b[0][1];return c*f-d*e}function reverseLine(a){return[a[1],a[0]]}function Triangle(a,b,c,d,e){var f=!1;e&&(f=!0),this.labels=d,f?(this.points=e,this.sides=[[this.points[0],this.points[1]],[this.points[1],this.points[2]],[this.points[2],this.points[0]]],this.sideLengths=jQuery.map(this.sides,lineLength),this.angles=anglesFromSides(this.sideLengths)):this.angles=b,this.radAngles=$.map(b,degToRad),this.scale=c||3,this.cosines=$.map(this.radAngles,Math.cos),this.sines=$.map(this.radAngles,Math.sin),this.x=a[0],this.y=a[1],this.rotation=0;var g=Math.sqrt(2*this.scale*this.sines[1]/(this.sines[0]*this.sines[2])),h=g*this.sines[2]/this.sines[1];f||(this.points=[[this.x,this.y],[h+this.x,this.y],[this.cosines[0]*g+this.x,this.sines[0]*g+this.y]]),this.sides=[[this.points[0],this.points[1]],[this.points[1],this.points[2]],[this.points[2],this.points[0]]],this.sideLengths=jQuery.map(this.sides,lineLength),this.niceSideLengths=jQuery.map(this.sideLengths,function(a){return parseFloat(a.toFixed(1))}),this.set="",this.niceAngles=jQuery.map(this.angles,function(a){return a+"^{\\circ}"}),this.labelObjects={sides:[],angles:[],points:[],name:[]},this.angleScale=function(a){return a>90?.5:a>40?.6:a<25?.7:.8},this.draw=function(){return this.set=KhanUtil.currentGraph.raphael.set(),this.set.push(KhanUtil.currentGraph.path(this.points.concat([this.points[0]]))),this.set},this.color="black",this.createLabel=function(a,b){this.set.push(KhanUtil.currentGraph.label(a,b,"center",{color:this.color}))},this.boxOut=function(a,b,c){var c=c||"simple",d=this.sides,e=areIntersecting(a,this.sides);while(areIntersecting(a,this.sides))this.translate(b);e&&this.translate(b)},this.findCenterPoints=function(){var a=this.points[0][0],b=this.points[0][1],c=this.points[1][0],d=this.points[1][1],e=this.points[2][0],f=this.points[2][1],g=2*(a*(d-f)+c*(f-b)+e*(b-d)),h=lineLength(this.sides[0]),i=lineLength(this.sides[1]),j=lineLength(this.sides[2]),k=h+i+j,l=(h*a+i*c+j*e)/k,m=(h*b+i*d+j*f)/k,n=((b*b+a*a)*(d-f)+(d*d+c*c)*(f-b)+(f*f+e*e)*(b-d))/g,o=((b*b+a*a)*(e-c)+(d*d+c*c)*(a-e)+(f*f+e*e)*(c-a))/g;this.circumCenter=[n,o],this.centroid=[1/3*(a+c+e),1/3*(b+d+f)],this.inCenter=[l,m]},this.findCenterPoints(),this.rotationCenter=this.centroid,this.rotate=function(a){a=a*Math.PI/180;var b=this;this.points=jQuery.map(this.points,function(c,d){return[b.rotatePoint(c,a)]}),this.genSides(),this.findCenterPoints()},this.genSides=function(){this.sides=[];var a=0;for(a=0;a<this.points.length;a++)this.sides.push([this.points[a],this.points[(a+1)%this.points.length]])},this.translate=function(a){this.points=jQuery.map(this.points,function(b,c){return[movePoint(b,a)]}),this.genSides(),this.findCenterPoints()},this.rotatePoint=function(a,b){var b=b||this.rotation;return[this.rotationCenter[0]+(a[0]-this.rotationCenter[0])*Math.cos(b)+(a[1]-this.rotationCenter[1])*Math.sin(b),this.rotationCenter[1]+ -1*(a[0]-this.rotationCenter[0])*Math.sin(b)+(a[1]-this.rotationCenter[1])*Math.cos(b)]},this.drawLabels=function(){var a=0;if("points"in this.labels)for(a=this.angles.length-1;a>=0;a--)this.labelObjects.points.push(this.createLabel(bisectAngle(reverseLine(this.sides[(a+1)%this.angles.length]),this.sides[a],.3)[1],this.labels.points[(a+1)%this.angles.length]));if("angles"in this.labels)for(a=this.angles.length-1;a>=0;a--)this.labelObjects.angles.push(this.createLabel(bisectAngle(this.sides[(a+1)%this.angles.length],reverseLine(this.sides[a]),this.angleScale(this.angles[(a+1)%this.angles.length]))[1],this.labels.angles[(a+1)%this.angles.length]));if("sides"in this.labels)for(a=0;a<this.sides.length;a++){var b=lineMidpoint(this.sides[a]),c=lineLength([this.sides[a][1],b]),e=.5,f=b[0]+(this.sides[a][1][1]-b[1])/c*e,g=b[1]-(this.sides[a][1][0]-b[0])/c*e;this.labelObjects.sides.push(this.createLabel([f,g],this.labels.sides[a]))}return"name"in this.labels&&(this.labelObjects.name=this.createLabel(bisectAngle(reverseLine(this.sides[2]),this.sides[1],.3)[1],this.labels.name)),"c"in this.labels&&this.createLabel([(this.points[0][0]+this.points[1][0])/2,(this.points[0][1]+this.points[1][1])/2-.4],d.c),"a"in this.labels&&this.createLabel([(this.points[1][0]+this.points[2][0])/2+.4,(this.points[1][1]+this.points[2][1])/2],d.a),"b"in this.labels&&this.createLabel([(this.points[0][0]+this.points[2][0])/2-.4,(this.points[0][1]+this.points[2][1])/2],d.b),this.set}}function Quadrilateral(a,b,c,d,e){this.sideRatio=c,this.angles=b,this.radAngles=$.map(b,degToRad),this.scale=1,this.rotation=0,this.x=a[0],this.y=a[1],this.rotationCenter=[a[0],a[1]],this.set="",this.size=10,this.cosines=$.map(this.radAngles,Math.cos),this.sines=$.map(this.radAngles,Math.sin),this.labels=d||{},this.sides=[],this.generatePoints=function(){var a=!1;while(!a||this.isCrossed()){var b=Math.sqrt(2*this.scale*this.scale*this.sideRatio*this.sideRatio-2*this.sideRatio*this.scale*this.scale*this.sideRatio*this.cosines[3]);a=!0;var c=[0,this.scale*this.sideRatio*this.cosines[0],b*Math.cos((this.angles[0]-(180-this.angles[3])/2)*Math.PI/180),this.scale,this.scale+Math.cos((180-this.angles[1])*Math.PI/180)],d=[0,this.scale*this.sideRatio*this.sines[0],b*Math.sin((this.angles[0]-(180-this.angles[3])/2)*Math.PI/180),0,Math.sin((180-this.angles[1])*Math.PI/180)],e=(d[4]-d[3])*(c[2]-c[1])-(c[4]-c[3])*(d[2]-d[1]),f=((c[4]-c[3])*(d[1]-d[3])-(d[4]-d[3])*(c[1]-c[3]))/e;this.points=[[this.x,this.y],[this.x+this.scale*this.sideRatio*this.cosines[0],this.y+this.scale*this.sideRatio*this.sines[0]],[this.x+c[1]+f*(c[2]-c[1]),this.y+d[1]+f*(d[2]-d[1])],[this.x+this.scale,this.y]],this.sides=[[this.points[0],this.points[3]],[this.points[3],this.points[2]],[this.points[2],this.points[1]],[this.points[1],this.points[0]]],this.sideLengths=jQuery.map(this.sides,lineLength),this.niceSideLengths=jQuery.map(this.sideLengths,function(a){return parseFloat(a.toFixed(1))});if(vectorProduct([this.points[0],this.points[1]],[this.points[0],this.points[2]])>0||this.sideLengths[2]<.09)this.sideRatio-=.3;vectorProduct([this.points[0],this.points[3]],[this.points[0],this.points[2]])<0&&(this.sideRatio+=.3)}},this.isCrossed=function(){return vectorProduct([this.points[0],this.points[1]],[this.points[0],this.points[2]])>0||vectorProduct([this.points[0],this.points[3]],[this.points[0],this.points[2]])<0},this.genSides=function(){this.sides=[[this.points[0],this.points[3]],[this.points[3],this.points[2]],[this.points[2],this.points[1]],[this.points[1],this.points[0]]]},this.generatePoints();var f=.5*vectorProduct([this.points[0],this.points[2]],[this.points[3],this.points[1]]);this.scale=this.scale*Math.sqrt(this.size/f),this.generatePoints(),f=.5*vectorProduct([this.points[0],this.points[2]],[this.points[3],this.points[1]])}function anglesFromSides(a){var b=a[0],c=a[1],d=a[2],e=Math.round(Math.acos((c*c+d*d-b*b)/(2*c*d))*180/Math.PI),f=Math.round(Math.acos((c*c+b*b-d*d)/(2*c*b))*180/Math.PI),g=Math.round(Math.acos((d*d+b*b-c*c)/(2*d*b))*180/Math.PI);return[g,f,e]}function newSquare(a){var a=a||[0,0];return new Quadrilateral(a,randomQuadAngles.square(),1,"",3)}function newRectangle(a){var a=a||[0,0];return new Quadrilateral(a,randomQuadAngles.rectangle(),KhanUtil.randFromArray([.2,.5,.7,1.5]),"",3)}function newRhombus(a){var a=a||[0,0];return new Quadrilateral(a,randomQuadAngles.rhombus(),1,"",3)}function newParallelogram(a){var a=a||[0,0];return new Quadrilateral(a,randomQuadAngles.parallelogram(),KhanUtil.randFromArray([.2,.5,.7,1.5]),"",3)}function newTrapezoid(a){var a=a||[0,0];return new Quadrilateral(a,randomQuadAngles.trapezoid(),KhanUtil.randFromArray([.2,.5,.7,1.5]),"",3)}function newKite(a){var a=a||[0,0],b=KhanUtil.randRange(90,140),c=KhanUtil.randRange(30,360-2*b-30),d=360-c-2*b;return new Quadrilateral(a,randomQuadAngles.kite(),1,"",2)}function Adder(a,b,c,d){var e=KhanUtil.currentGraph;c=c||KhanUtil.digits(a),d=d||KhanUtil.digits(b);var f=[],g=0,h={max:Math.max(c.length,d.length,KhanUtil.digits(a+b).length),carry:3,first:2,second:1,sum:0,sideX:Math.max(c.length,d.length)+2,sideY:1.5},i=0,j=Adder.numHintsFor(a,b);this.show=function(){e.init({range:[[-1,11],[h.sum-.5,h.carry+.5]],scale:[30,45]}),drawDigits(c.slice(0).reverse(),h.max-c.length+1,h.first),drawDigits(d.slice(0).reverse(),h.max-d.length+1,h.second),e.path([[-0.5,h.second-.5],[h.max+.5,h.second-.5]]),e.label([0,1],"\\huge{+\\vphantom{0}}")},this.showHint=function(){this.removeHighlights();if(i===j-2&&j-1>c.length){this.showFinalCarry(),i++;return}if(i===j-1)return;var a=g,b="",k="",l="",m,n=h.max-i;a!==0&&(f.push(e.label([n,h.carry],"\\color{#6495ED}{"+a+"}","below")),b="\\color{#6495ED}{"+a+"} + "),m=c[i]+g,f=f.concat(drawDigits([c[i]],n,h.first,KhanUtil.BLUE)),i<d.length&&(f=f.concat(drawDigits([d[i]],n,h.second,KhanUtil.BLUE)),l=" + \\color{#6495ED}{"+d[i]+"}",m+=d[i]),drawDigits([m%10],n,h.sum),f=f.concat(drawDigits([m%10],n,h.sum,KhanUtil.GREEN)),g=Math.floor(m/10),g!==0&&(f.push(e.label([n-1,h.carry],"\\color{#FFA500}{"+g+"}","below")),k="\\color{#FFA500}{"+g+"}"),this.showSideLabel("\\Large{"+b+"\\color{#6495ED}{"+c[i]+"}"+l+" = "+k+"\\color{#28AE7B}{"+m%10+"}"+"}"),i++},this.showFinalCarry=function(){f.push(e.label([h.max-i,h.carry],"\\color{#6495ED}{"+g+"}","below")),e.label([h.max-i,h.sum],"\\Huge{"+g+"}"),f.push(e.label([h.max-i,h.sum],"\\Huge{\\color{#28AE7B}{"+g+"}}")),this.showSideLabel("\\Large{\\color{#6495ED}{"+g+"}"+" = "+"\\color{#28AE7B}{"+g+"}"+"}")},this.getNumHints=function(){return j},this.removeHighlights=function(){while(f.length)f.pop().remove()},this.showSideLabel=function(a){f.push(e.label([h.sideX,h.sideY],a,"right"))},this.showDecimals=function(a,b){for(var c=0;c<3;c++)e.style({fill:"#000"},function(){e.ellipse([h.max-Math.max(a,b)+.5,c-.2],[.09,.06])});this.showSideLabel("\\text{Zorg dat de decimaaltekens recht onder elkaar staan.}")}}function Subtractor(a,b,c,d,e){var f=KhanUtil.currentGraph;c=c||KhanUtil.digits(a),d=d||KhanUtil.digits(b);var g=c.slice(0),h=d.slice(0),i=[],j=0,k={max:c.length,carry:3,first:2,second:1,diff:0,sideX:Math.max(c.length,d.length)+2,sideY:1.5},l=0,m=Subtractor.numHintsFor(a,b);e=e||0,this.show=function(){f.init({range:[[-1,11],[k.diff-.5,k.carry+.5]],scale:[30,45]}),drawDigits(c.slice(0).reverse(),k.max-c.length+1,k.first),drawDigits(d.slice(0).reverse(),k.max-d.length+1,k.second),f.path([[-0.5,k.second-.5],[k.max+.5,k.second-.5]]),f.label([0,1],"\\huge{-\\vphantom{0}}");for(var a=0;a<c.length;a++)i.unshift([])},this.borrow=function(a){var b=a+1;g[a+1]<1&&(b=this.borrow(a+1)),g[a+1]-=1,g[a]+=10;var c=b-a-1;return i[a].push(f.label([k.max-a,k.carry+.5*c],"\\color{#6495ED}{"+g[a]+"}","below")),i[a].push(f.path([[k.max-.3-a,k.first-.4],[k.max+.3-a,k.first+.4]])),i[a+1].push(f.label([k.max-1-a,k.carry+.5*c],"\\color{#FFA500}{"+g[a+1]+"}","below")),i[a+1].push(f.path([[k.max-1.3-a,k.first-.4],[k.max-.7-a,k.first+.4]])),c!==0&&i[a+1].push(f.path([[k.max-1.3-a,k.carry-1+.5*c],[k.max-.7-a,k.carry-.7+.5*c]])),b},this.showHint=function(){this.removeHighlights(l),l!==0&&this.removeHighlights(l-1);if(l===m-1)return;var d=g[l],j=l<h.length,n=j?h[l]:0,o="";d<n?this.borrow(l):g[l]===c[l]?i[l].push(f.label([k.max-l,k.first],"\\Huge{\\color{#6495ED}{"+g[l]+"}}")):i[l].push(f.label([k.max-l,k.carry],"\\color{#6495ED}{"+g[l]+"}","below")),j&&(i[l].push(f.label([k.max-l,k.second],"\\Huge{\\color{#6495ED}{"+h[l]+"}}")),o=" - \\color{#6495ED}{"+n+"}");var p=g[l]-n;((a-b)/Math.pow(10,l)>1||l<e)&&f.label([k.max-l,k.diff],"\\Huge{"+p+"}"),i[l].push(f.label([k.max-l,k.diff],"\\Huge{\\color{#28AE7B}{"+p+"}}")),o==""&&(o="- \\color{#6495ED}{ 0 }"),this.showSideLabel("\\Large{\\color{#6495ED}{"+g[l]+"}"+o+" = "+"\\color{#28AE7B}{"+p+"}}"),l++},this.getNumHints=function(){return m},this.removeHighlights=function(a){if(a>=i.length)return;var b=i[a];while(b.length)b.pop().remove()},this.showSideLabel=function(a){i[l].push(f.label([k.sideX,k.sideY],a,"right"))},this.showDecimals=function(a,b){for(var c=0;c<3;c++)f.style({fill:"#000"},function(){f.ellipse([k.max-Math.max(a,b)+.5,c-.2],[.09,.06])});this.showSideLabel("\\text{Zorg dat de decimaaltekens recht onder elkaar staan.}")}}function drawCircles(num,color){with(KhanUtil.currentGraph){var numCols=Math.floor(Math.sqrt(num)),numRows=Math.floor(num/numCols),extra=num%numRows;init({range:[[0,numCols+1],[-1,numRows+2]],scale:[30,30]}),style({stroke:color,fill:color});for(var i=numRows;i>0;i--)for(var j=numCols;j>0;j--)circle([j,i],.25);for(var j=extra;j>0;j--)circle([j,0],.25)}}function crossOutCircles(numCircles,numCrossed,color){with(KhanUtil.currentGraph){var numCols=Math.floor(Math.sqrt(numCircles)),numRows=Math.floor(numCircles/numCols),extra=numCircles%numRows,count=0;style({stroke:color,fill:color});for(var i=numRows;i>0;i--)for(var j=numCols;j>0;j--){path([[j-.3,i-.3],[j+.3,i+.3]]),path([[j-.3,i+.3],[j+.3,i-.3]]),count+=1;if(count===numCrossed)return}for(var j=extra;j>0;j--){path([[j-.3,i-.3],[j+.3,i+.3]]),path([[j-.3,i+.3],[j+.3,i-.3]]),count+=1;if(count===numCrossed)return}}}function drawDigits(a,b,c,d){var e=KhanUtil.currentGraph,f=[];return jQuery.each(a,function(a,g){var h="\\Huge{"+g+"}";f.push(e.label([b+a,c],h,{color:d}))}),f}function drawRow(a,b,c,d){var e=KhanUtil.currentGraph;e.style({stroke:c});var f=e.raphael.set();for(var g=0;g<a;g++)f.push(e.label([g,b],"\\small{\\color{"+c+"}{"+(d+g)+"}}")),f.push(e.circle([g,b],.25));return f}function Multiplier(a,b,c,d,e,f){var g=KhanUtil.currentGraph;e=e||0,f=f||0,c=c||KhanUtil.digits(a),d=d||KhanUtil.digits(b);var h=KhanUtil.integerToDigits(a*b),i=[],j=0,k=c.length*d.length+1,l=0,m=0,n=Math.max(e+f,h.length);this.show=function(){g.init({range:[[-2-n,12],[-1-d.length*c.length,3]],scale:[30,45]}),drawDigits(c.slice(0).reverse(),1-c.length,2),drawDigits(d.slice(0).reverse(),1-d.length,1),g.path([[-1-h.length,.5],[1,.5]]),g.label([-Math.max(c.length,d.length),1],"\\huge{\\times\\vphantom{0}}")},this.removeHighlights=function(){while(i.length)i.pop().remove()},this.showHint=function(){this.removeHighlights();if(m===d.length){this.showFinalAddition();return}var a=c[l],b=d[m],e=b*a+j,f=e%10,h=Math.floor(e/10);i=i.concat(drawDigits([a],-l,2,KhanUtil.BLUE)),i=i.concat(drawDigits([b],-m,1,KhanUtil.PINK)),j&&(i=i.concat(g.label([-l,3],"\\color{#FFA500}{"+j+"}","below"))),g.label([2,-m*c.length-l+2],"\\color{#6495ED}{"+a+"}"+"\\times"+"\\color{#FF00AF}{"+b+"}"+(j?"+\\color{#FFA500}{"+j+"}":"")+"="+"\\color{#28AE7B}{"+e+"}","right"),drawDigits([f],-m-l,-m),i=i.concat(drawDigits([f],-m-l,-m,KhanUtil.GREEN)),h&&(i=i.concat(g.label([-1-l,3],"\\color{#28AE7B}{"+h+"}","below")),l===c.length-1&&(drawDigits([h],-m-l-1,-m),i=i.concat(drawDigits([h],-m-l-1,-m,KhanUtil.GREEN)))),j=h,l===c.length-1?(m++,l=0,j=0):l++},this.showFinalAddition=function(){if(d.length>1){while(h.length<e+f+1)h.unshift(0);g.path([[-1-h.length,.5-d.length],[1,.5-d.length]]),g.label([-1-h.length,1-d.length],"\\huge{+\\vphantom{0}}"),drawDigits(h,1-h.length,-d.length)}},this.getNumHints=function(){return k},this.showDecimals=function(){g.style({fill:"#000"},function(){g.ellipse([-e+.5,1.8],[.09,.06]),g.ellipse([-f+.5,.8],[.09,.06])})},this.showDecimalsInProduct=function(){var a=-n,b=-d.length*c.length;g.label([a,b+2],"\\text{Het bovenste getal heeft "+KhanUtil.plural(e,"cijfer")+" rechts van het decimaalteken staan.}","right"),g.label([a,b+1],"\\text{Het onderste getal heeft "+KhanUtil.plural(f,"cijfer")+" rechts van het decimaalteken staan.}","right"),g.label([a,b],"\\text{Het product heeft "+e+" + "+f+" = "+(e+f)+" cijfers rechts van het decimaalteken staan.}","right"),g.style({fill:"#000"},function(){g.ellipse([-f-e+.5,-0.2-d.length],[.09,.06])})}}function Divider(a,b,c,d){var e=KhanUtil.currentGraph,f=KhanUtil.integerToDigits(a),g=KhanUtil.integerToDigits(b);c=c||0,d=d||0;var h=c-d,i=[],j=0,k=0,l=!0,m=!0,n=[],o=0,p=[];this.show=function(){var a=f;c!==0&&(a=KhanUtil.padDigitsToNum(f.reverse(),c+1).reverse()),e.init({range:[[-1-a.length,17],[(g.length+(h>0?h:0))*-2-1,2]],scale:[30,45]}),e.style({fill:"#000"},function(){c!==0&&(p=p.concat(e.ellipse([-1-c,-0.2],[.09,.06]))),d!==0&&(p=p.concat(e.ellipse([g.length-d-.5,-0.2],[.09,.06])))}),drawDigits(a,-0.5-a.length,0),drawDigits(g,0,0),e.path([[-0.75,-0.5],[-0.75,.5],[g.length+(h>0?h:0),.5]])},this.showHint=function(){this.removeHighlights();if(j===g.length){while(n.length)n.pop().remove();return}if(m){o=g[j];var b=o/a,f=o+k;i=i.concat(drawDigits([o],j,0,KhanUtil.BLUE)),j!==0&&e.style({arrows:"->"},function(){i.push(e.path([[j,-0.5],[j,-2*j+.5]]))}),drawDigits([o],j,-2*j);var h=KhanUtil.integerToDigits(f);i=i.concat(drawDigits(h,j-h.length+1,-2*j,KhanUtil.BLUE)),e.label([g.length+1,-2*j],"\\text{Hoe vaak past }"+a+"\\text{ in }"+"\\color{#6495ED}{"+f+"}"+"\\text{?}","right"),m=!1}else{o+=k;var b=Math.floor(o/a),p=o-b*a;k=p*10;var q=drawDigits([b],j,1);b===0&&l&&g.length-d+c>j+1?n=n.concat(q):l=!1,i=i.concat(drawDigits([b],j,1,KhanUtil.GREEN));var r=KhanUtil.integerToDigits(a*b);drawDigits(r,j-r.length+1,-2*j-1),i=i.concat(drawDigits(r,j-r.length+1,-2*j-1,KhanUtil.ORANGE));var s=KhanUtil.integerToDigits(p);drawDigits(s,j-s.length+1,-2*j-2),e.label([j-r.length,-2*j-1],"-\\vphantom{0}"),e.path([[j-r.length-.25,-2*j-1.5],[j+.5,-2*j-1.5]]),e.label([g.length+1,-2*j-1],"\\color{#6495ED}{"+o+"}"+"\\div"+a+"="+"\\color{#28AE7B}{"+b+"}"+"\\text{ of }"+a+"\\times"+"\\color{#28AE7B}{"+b+"}"+" = "+"\\color{#FFA500}{"+a*b+"}","right"),j++,m=!0}},this.getNumHints=function(){return 1+(g.length+(h>0?h:0))*2},this.removeHighlights=function(){while(i.length)i.pop().remove()},this.shiftDecimals=function(){while(p.length)p.pop().remove();c!==0?(e.label([g.length+1+(h>0?h:0),1],"\\text{Verplaats het decimaalteken "+c+" naar rechts.}","right"),e.style({fill:"#000"},function(){e.ellipse([-1,-0.2],[.09,.06])})):e.label([g.length+1,1],"\\text{Zet het decimaalteken in het antwoord.}","right"),e.style({fill:"#000"},function(){e.ellipse([g.length+h-.5,-0.2],[.09,.06]),e.ellipse([g.length+h-.5,.8],[.09,.06])});if(h>0){var a=g;g=KhanUtil.padDigitsToNum(g,g.length+h),drawDigits(g,0,0),i=i.concat(drawDigits(g,0,0,KhanUtil.PINK)),i=i.concat(drawDigits(a,0,0))}}}function squareFractions(a,b,c,d,e){d=d||2.5,c=c||10,e=e||.2;var f=KhanUtil.currentGraph,g=[],h=0,i=0;for(i=0;i<b/c&&i*c<=a;i++)for(h=0;h<c&&i*c+h<a;h++)g.push(f.regularPolygon([h*d*e,i*2.5*e],4,e,Math.PI/4).attr("stroke","none").attr("fill","#6495ed").attr("stroke-linecap","square"));i--;for(h=h;h<c;h++)g.push(f.regularPolygon([h*d*e,i*2.5*e],4,e,Math.PI/4).attr("fill","black").attr("stroke","none").attr("stroke-linecap","square"));i++;for(i=i;i<b/c;i++)for(h=0;h<c;h++)g.push(f.regularPolygon([h*d*e,i*2.5*e],4,e,Math.PI/4).attr("fill","black").attr("stroke","none").attr("stroke-linecap","square"));return g}function numberLine(a,b,c,d,e,f){c=c||1,d=d||0,e=e||0;var g=(c+"").length-(c+"").indexOf(".")-1;(c+"").indexOf(".")<0&&(g=0);var h=KhanUtil.currentGraph,i=h.raphael.set();i.push(h.line([d,e],[d+b-a,e]));for(var j=0;j<=b-a;j+=c){i.push(h.line([d+j,e-.2],[d+j,e+.2]));if(f){var k=KhanUtil.roundTowardsZero(a+j+.001),l=a+j-k,m=k;Math.abs(Math.round(l*f))!==f&&Math.round(l*f)!==0&&(k===0?m=KhanUtil.fraction(Math.round(l*f),f,!1,!1,!0):m=k+"\\frac{"+Math.abs(Math.round(l*f))+"}{"+f+"}"),h.label([d+j,e-.2],m,"below",{labelDistance:3})}else h.label([d+j,e-.2],(a+j).toFixed(g),"below",{labelDistance:3})}return i}function piechart(a,b,c){var d=KhanUtil.currentGraph,e=d.raphael.set(),f=0;jQuery.each(a,function(a,b){f+=b});var g=0;jQuery.each(a,function(a,h){e.push(d.arc([0,0],c,g*360/f,(g+h)*360/f,!0,{stroke:b[2]||"none",fill:b[a]})),g+=h});for(var h=0;h<f;h++)e.push(d.line([0,0],d.polar(c,h*360/f),{stroke:b[2]||"#fff"}));return e}function rectchart(a,b,c){var d=KhanUtil.currentGraph,e=d.raphael.set();c=c||0;var f=0;jQuery.each(a,function(a,b){f+=b});var g=0;jQuery.each(a,function(a,h){var i=g/f,j=h/f;e.push(d.path([[i,c],[i+j,c],[i+j,c+1],[i,c+1]],{stroke:"#fff",fill:b[a]})),g+=h});for(var h=0;h<=f;h++){var i=h/f;e.push(d.line([i,c+0],[i,c+1],{stroke:"#fff"}))}return e}function Rotator(a,b,c){var d=KhanUtil.currentGraph;this.set=d.raphael.set();var e=function(){},f=function(a,b){},g=function(){f.call(this,0,0)};this.set.push(d.arc(a,b+1,150,180,{stroke:"#aab","stroke-width":20}).drag(f,g,e)),this.downArrow=d.path([[a[0]-(b+.25),a[1]],[a[0]-(b+1),a[1]-.75],[a[0]-(b+1.75),a[1]],[a[0]-(b+.75),a[1]]],{"stroke-width":0,fill:"#aae"}),this.set.push(this.downArrow),this.upArrow=d.path([[a[0]+(b+.25)*Math.cos(5*Math.PI/6),a[1]+(b+.25)*Math.sin(5*Math.PI/6)],[a[0]+(b+1)*Math.cos(29*Math.PI/36),a[1]+(b+1)*Math.sin(29*Math.PI/36)],[a[0]+(b+1.75)*Math.cos(5*Math.PI/6),a[1]+(b+1.75)*Math.sin(5*Math.PI/6)]],{"stroke-width":0,fill:"#aae"}),this.set.push(this.upArrow);var h=function(a,b){var c=KhanUtil.currentGraph,d=c.raphael.set();return d.push(c.line([a[0]-(b+4),a[1]+2-.3],[a[0]-(b+1)-.6,a[1]-.75+.2],{"stroke-width":2,arrows:"->"})),d.push(c.line([a[0]-(b+4),a[1]+2+.3],[a[0]+(b+1)*Math.cos(29*Math.PI/36)-.8,a[1]+(b+1)*Math.sin(29*Math.PI/36)-.2],{"stroke-width":2,arrows:"->"})),d.push(c.label([a[0]-(b+4),a[1]+2],"Click hier om te draaien!","center",!1,{"stroke-width":1,"font-size":12,stroke:"black"})),jQuery(document).one("mousedown",function(a){d.remove()}),this.set=d,this};return this.set.push((new h(a,b)).set),jQuery([this.downArrow.node,this.upArrow.node]).css("cursor","hand"),jQuery.each([this.downArrow,this.upArrow],function(a,b){b.hover(function(a){this.attr({fill:"green"})},function(a){this.attr({fill:"#aae"})})}),this.rotationOn=function(){jQuery(this.upArrow.node).mousedown(function(){var a=setInterval(function(){c.rotate(2)},50);jQuery(document).one("mouseup",function(){clearInterval(a)})}),jQuery(this.downArrow.node).mousedown(function(){var a=setInterval(function(){c.rotate(-2)},50);jQuery(document).one("mouseup",function(){clearInterval(a)})}),this.set.show()},this.rotationOff=function(){jQuery(this.upArrow.node).unbind("mousedown").unbind("mouseup"),jQuery(this.downArrow.node).unbind("mousedown").unbind("mouseup"),this.set.hide()},this}function Translator(a,b,c){var d=KhanUtil.currentGraph;this.set=d.raphael.set(),this.set.push(d.line([a[0]+1,a[1]-1],[a[0]+b-1,a[1]-1],{stroke:"#aab","stroke-width":20})),this.leftArrow=d.path([[a[0]+1,a[1]-.25],[a[0]+.25,a[1]-1],[a[0]+1,a[1]-1.75]],{"stroke-width":0,fill:"#aae"}),this.set.push(this.leftArrow),this.rightArrow=d.path([[a[0]+b-1,a[1]-.25],[a[0]+b-1+.75,a[1]-1],[a[0]+b-1,a[1]-1.75]],{"stroke-width":0,fill:"#aae"}),this.set.push(this.rightArrow);var e=function(a,b){var c=KhanUtil.currentGraph,d=c.raphael.set();return d.push(c.line([a[0]+1,a[1]-4],[a[0]+.25,a[1]-1.5],{"stroke-width":2,arrows:"->"})),d.push(c.line([a[0]+b-1.5,a[1]-4],[a[0]+b-1+.5,a[1]-1.5],{"stroke-width":2,arrows:"->"})),d.push(c.label([a[0]+b/2-1+.75,a[1]-4],"Click hier om te verplaatsen!","center",!1,{"stroke-width":1,"font-size":12,stroke:"black"})),jQuery(document).one("mousedown",function(a){d.remove()}),this.set=d,this};return this.set.push((new e(a,b)).set),jQuery([this.leftArrow.node,this.rightArrow.node]).css("cursor","hand"),jQuery.each([this.leftArrow,this.rightArrow],function(a,b){b.hover(function(a){this.attr({fill:"green"})},function(a){this.attr({fill:"#aae"})})}),this.translationOn=function(){jQuery(this.leftArrow.node).mousedown(function(){var a=setInterval(function(){c.rotatedTranslate(-10)},50);jQuery(document).one("mouseup",function(){clearInterval(a)})}),jQuery(this.rightArrow.node).mousedown(function(){var a=setInterval(function(){c.rotatedTranslate(10)},50);jQuery(document).one("mouseup",function(){clearInterval(a)})}),this.set.show()},this.translationOff=function(){jQuery(this.leftArrow.node).unbind("mousedown").unbind("mouseup"),jQuery(this.rightArrow.node).unbind("mousedown").unbind("mouseup"),this.set.hide()},this}function Protractor(a,b){function h(){jQuery(g).css("cursor","move"),jQuery(g).mousedown(function(a){a.preventDefault();var b;for(b=0;b<f.set.items.length;b++){var c=f.set.items[b];c.ox=a.pageX,c.oy=a.pageY,c.animate({opacity:.25},500,">")}jQuery(document).mousemove(function(a){var b;for(b=0;b<f.set.items.length;b++){var c=f.set.items[b],d=a.pageX-c.ox,e=a.pageY-c.oy;c.translate(d,e),c.ox=a.pageX,c.oy=a.pageY}}),jQuery(document).one("mouseup",function(a){var b;for(b=0;b<f.set.items.length;b++){var c=f.set.items[b];delete c.ox,delete c.oy,c.animate({opacity:.5},500,">"),jQuery(document).unbind("mousemove")}})}),f.translator.translationOn()}function i(){jQuery(g).unbind(),jQuery(g).css("cursor","auto"),f.translator.translationOff()}var c=KhanUtil.currentGraph;this.set=c.raphael.set(),this.cx=a[0],this.cy=a[1];var d="#789",e=c.scalePoint([this.cx-b,this.cy+b]);this.set.push(c.raphael.image(Khan.urlBase+"images/protractor.png",e[0],e[1],322,166)),this._rotation=0,this.getRotation=function(){return this._rotation},this.drawAngle=function(a,e,f,g){e=e||-1,f=f||d,g=f||"#000";var h=a-this.getRotation(),i=Math.cos(Math.PI*h/180),j=Math.sin(Math.PI*h/180),k=(b+e)*i,l=(b+e)*j,m=(b+e+.5)*i,n=(b+e+.5)*j;this.set.push(c.line([this.cx+i,this.cy+j],[this.cx+k,this.cy+l],{stroke:f})),this.set.push(c.label([this.cx+m,this.cy+n],a,"center",!1,{"stroke-width":1,"font-size":12,stroke:g}))};var f=this,g=jQuery.map(this.set,function(a){return a.node});return this.rotator=new Rotator([this.cx,this.cy],b,this),this.set.push(this.rotator.set),this.translator=new Translator([this.cx,this.cy],b,this),this.set.push(this.translator.set),this.set.attr({opacity:.5}),jQuery.each(this.set,function(a,b){b.pro=f}),this.getCenter=function(){return[this.set[0].attrs.x+161,this.set[0].attrs.y+161]},this.rotate=function(a,b){var c=this.getCenter(),d=this.getRotation();return typeof b!="undefined"&&b&&(d=0),this.set.rotate(d+a,c[0],c[1]),this._rotation=d+a,this},this.translate=function(a,b,d){if(d){this.cx=a,this.cy=b;var e=c.scalePoint([a,b]),f=this.getCenter();this.set.translate(e[0]-f[0],e[1]-f[1])}else this.cx+=a,this.cy+=b,this.set.translate(a,b);return this},this.rotatedTranslate=function(a){a=a||1;var b=Math.PI*this.getRotation()/180,c=a*Math.cos(b),d=a*Math.sin(b);return this.translate(c,d)},this.translatable=function(a){return typeof a=="undefined"?this._translatable:(this._translatable=a,a?h():i(),this)},this.translatable(!0),this.rotatable=function(a){return typeof a=="undefined"?this._rotatable:(this._rotatable=a,a?this.rotator.rotationOn():this.rotator.rotationOff(),this)},this.rotatable(!0),this.set.translate(0,0),this}function analogClock(a,b,c,d){this.hour=a,this.minute=b,this.radius=c,this.set=KhanUtil.currentGraph.raphael.set(),this.graph=KhanUtil.currentGraph,this.draw=function(){for(var a=0;a<12;a++)this.set.push(this.graph.line([this.radius*Math.sin(2*Math.PI*a/12),this.radius*Math.cos(2*Math.PI*a/12)],[.8*this.radius*Math.sin(2*Math.PI*a/12),.8*this.radius*Math.cos(2*Math.PI*a/12)]));return this.set.push(this.graph.line([.45*this.radius*Math.sin(2*Math.PI*this.hour/12+this.minute/60/12*2*Math.PI),.45*this.radius*
Math.cos(2*Math.PI*this.hour/12+this.minute/60/12*2*Math.PI)],[0,0])),this.set.push(this.graph.line([.6*this.radius*Math.sin(this.minute/60*2*Math.PI),.6*this.radius*Math.cos(this.minute/60*2*Math.PI)],[0,0])),this.set.push(this.graph.circle([0,0],this.radius)),this.set.push(this.graph.circle([0,0],this.radius/40)),d&&this.drawLabels(),this.set},this.drawLabels=function(){for(var a=1;a<13;a++)this.set.push(this.graph.label([.7*this.radius*Math.sin(2*Math.PI*a/12),.7*this.radius*Math.cos(2*Math.PI*a/12)],a));return this.set}}function updateEquation(){var a=KhanUtil.currentGraph;a.plot.remove(),a.style({clipRect:[[-10,-10],[20,20]]},function(){var b=function(b){return b*a.MN/a.MD+a.BN/a.BD};a.plot=a.line([-10,b(-10)],[10,b(10)])}),a.labelHolder.remove(),jQuery("#equationAnswer").html("<code>y ="+KhanUtil.fractionReduce(a.MN,a.MD)+"x +"+KhanUtil.fractionReduce(a.BN,a.BD)+"</code>").tmpl(),jQuery("#slope-sol input").val(a.MN/a.MD+""),jQuery("#intercept-sol input").val(a.BN/a.BD+"")}function changeSlope(a){var b=KhanUtil.currentGraph,c=b.MD;b.MD=KhanUtil.getLCM(c,b.INCR),b.MN=b.MD/c*b.MN+a*b.MD/b.INCR,updateEquation()}function changeIntercept(a){var b=KhanUtil.currentGraph,c=b.BD;b.BD=KhanUtil.getLCM(c,b.INCR),b.BN=b.BD/c*b.BN+a*b.BD/b.INCR,updateEquation()}function Parabola(a,b,c){var d=a,e=b,f=c,g=[];this.graphieFunction=function(a){return d*(a-e)*(a-e)+f},this.plot=function(a){var b=KhanUtil.currentGraph;g.push(b.plot(this.graphieFunction,[-10,10]));if(a){var c=this.getFocusX(),d=this.getFocusY(),e=this.getDirectrixK();b.style({fill:"#6495ED"},function(){g.push(b.circle([c,d],.1)),g.push(b.line([-10,e],[10,e]))})}},this.redraw=function(a){jQuery.each(g,function(a,b){b.remove()}),g=[],this.plot(a)},this.update=function(a,b,c){d=a,e=b,f=c},this.delta=function(a,b,c){this.update(d+a,e+b,f+c)},this.deltaFocusDirectrix=function(a,b,c){var d=this.getFocusY()+b,e=this.getDirectrixK()+c;d===e&&(d+=b,e+=c);var f=(d+e)/2,g=1/(2*(d-e));this.update(g,this.getVertexX()+a,f)},this.getVertexX=function(){return e},this.getVertexY=function(){return f},this.getLeadingCoefficient=function(){return d},this.getFocusX=function(){return e},this.getFocusY=function(){return f+1/(4*d)},this.getDirectrixK=function(){return f-1/(4*d)}}function redrawParabola(a){var b=KhanUtil.currentGraph,c=b.graph,d=c.currParabola;d.redraw(a);var e=d.getLeadingCoefficient(),f=d.getVertexX(),g=d.getVertexY();if(a)jQuery("#focus-x-label").html("<code>"+d.getFocusX()+"</code>").tmpl(),jQuery("#focus-y-label").html("<code>"+d.getFocusY().toFixed(2)+"</code>").tmpl(),jQuery("#directrix-label").html("<code>y = "+d.getDirectrixK().toFixed(2)+"</code>").tmpl();else{var h="y - "+g+"="+e+"(x - "+f+")^{2}";h=KhanUtil.cleanMath(h),jQuery("#equation-label").html("<code>"+h+"</code>").tmpl()}jQuery("#leading-coefficient input").val(e),jQuery("#vertex-x input").val(f),jQuery("#vertex-y input").val(g)}function updateParabola(a,b,c,d){KhanUtil.currentGraph.graph.currParabola.delta(a,b,c),redrawParabola(d)}function updateFocusDirectrix(a,b,c){KhanUtil.currentGraph.graph.currParabola.deltaFocusDirectrix(a,b,c),redrawParabola(!0)}function ParallelLines(a,b,c,d,e){function i(a,b){return jQuery.map(a,function(a,c){if(c===0){var d=b/Math.tan(KhanUtil.toRadians(h));a+=d}return c===1&&(a+=b),a})}function j(a,b,c){var d=KhanUtil.currentGraph,e=b[1]-b[0],f=(b[0]+b[1])/2,g=.8;e<90&&(g=.8/Math.sin(KhanUtil.toRadians(e)));var h=jQuery.map(a,function(a,b){return b===0?a+g*Math.cos(KhanUtil.toRadians(f)):a+g*Math.sin(KhanUtil.toRadians(f))});d.label(h,e+"^{\\circ}","center",{color:c})}var f,g,h;this.draw=function(){var f=KhanUtil.currentGraph;f.line([a,b],[c,d]),f.line([a,b+e],[c,d+e])},this.drawTransverse=function(d){h=d;var j=KhanUtil.currentGraph,k=e/Math.tan(KhanUtil.toRadians(h)),l=a+(c-a-k)/2,m=l+k;f=[l,b],g=[m,b+e],j.line(i(f,-0.8),i(g,.8))},this.drawAngle=function(a,b,c){var d=KhanUtil.currentGraph,e=.5,i,k;c||(c="#6495ED"),a=(a+8)%8,a<4?i=[f,e]:i=[g,e];switch(a%4){case 0:k=[0,h];break;case 1:k=[h,180];break;case 2:k=[180,180+h];break;case 3:k=[180+h,360]}jQuery.merge(i,k),d.style({stroke:c},function(){d.arc.apply(d,i),b&&j(i[0],k,c)})},this.drawVerticalAngle=function(a,b,c){a=(a+8)%8;var d=(a+2)%4;a>=4&&(d+=4),this.drawAngle(d,b,c)},this.drawAdjacentAngles=function(a,b,c){a=(a+8)%8;var d=(a+1)%4,e=(a+3)%4;a>=4&&(d+=4,e+=4),this.drawAngle(d,b,c),this.drawAngle(e,b,c)}}function Chart(a,b){var c=KhanUtil.currentGraph;this.transformX=d3.scale.ordinal().domain(a.ordinals).rangeBands([b.lx,b.lx+b.width],.75),this.transformY=d3.scale.linear().domain([a.min,a.max]).range([b.ly,b.ly+b.height]),this.draw=function(){c.style({stroke:"#ccc"}),c.line([b.lx,b.ly],[b.lx+b.width,b.ly]),c.line([b.lx,b.ly],[b.lx,b.ly+b.height]);for(var d=0;d<a.ordinals.length;d++)this.drawDataPoint(d,"#aaa");c.style({"stroke-width":1});var e=this.transformY.ticks(a.tickCount);for(var d=0;d<e.length;d++){var f=e[d];c.line([b.lx-.1,this.transformY(f)],[b.lx+.1,this.transformY(f)]),c.label([b.lx,this.transformY(f)],"\\small{"+f+"}","left")}},this.highlightDataPoint=function(a,b){this.drawDataPoint(a,b)},this.labelDataPoint=function(d,e){e=e||KhanUtil.BLUE;var f=a.values[d],g=this.transformX(a.ordinals[d]),h=this.transformY(f);c.label([g,h],"\\text{"+f+"}","above",{color:e}),c.style({"stroke-dasharray":"-","stroke-width":1}),c.line([b.lx,h],[g,h])}}function LineChart(a,b){var c=KhanUtil.currentGraph;this.base=Chart,this.base(a,b);var d=null;this.drawDataPoint=function(b,e){e=e||KhanUtil.BLUE,c.style({stroke:e,fill:e});var f=a.ordinals[b],g=this.transformX(f),h=this.transformY(a.values[b]),i=[g,h];c.circle([g,h],.1),d&&c.line(d,i),d=i,c.label([g,this.transformY(a.min)],"\\text{"+f+"}","below")},this.highlightDataPoint=function(a,b){d=null,this.drawDataPoint(a,b)}}function BarChart(a,b){var c=KhanUtil.currentGraph;this.base=Chart,this.base(a,b),this.drawDataPoint=function(b,d){d=d||KhanUtil.BLUE,c.style({stroke:d,"stroke-width":10});var e=a.ordinals[b],f=this.transformX(e),g=[f,this.transformY(a.min)];c.line(g,[f,this.transformY(a.values[b])]),c.label(g,"\\text{"+e+"}","below")}}function Protractor(a){var b=KhanUtil.currentGraph;this.set=b.raphael.set(),this.cx=a[0],this.cy=a[1];var c="#789",d=this,e=8.05,f=b.scalePoint([this.cx-e,this.cy+e-.225]);this.set.push(b.mouselayer.image(Khan.urlBase+"images/protractor.png",f[0],f[1],322,161));var g=function(c,d){var f=b.scaleVector(e),g=b.scalePoint(a),h=Math.sin((c+90)*Math.PI/180)*(f[0]+d)+g[0],i=Math.cos((c+90)*Math.PI/180)*(f[1]+d)+g[1];return h+","+i},h=b.raphael.path(" M"+g(180,6)+" L"+g(180,2)+" L"+g(183,10)+" L"+g(180,18)+" L"+g(180,14)+" A"+(b.scaleVector(e)[0]+10)+","+(b.scaleVector(e)[1]+10)+",0,0,1,"+g(170,14)+" L"+g(170,18)+" L"+g(167,10)+" L"+g(170,2)+" L"+g(170,6)+" A"+(b.scaleVector(e)[0]+10)+","+(b.scaleVector(e)[1]+10)+",0,0,0,"+g(180,6)+" Z").attr({stroke:null,fill:KhanUtil.ORANGE});this.set.push(h),this.centerPoint=KhanUtil.addMovablePoint({coord:a,visible:!1}),this.rotateHandle=KhanUtil.addMovablePoint({coord:[Math.sin(275*Math.PI/180)*(e+.5)+this.cx,Math.cos(275*Math.PI/180)*(e+.5)+this.cy],onMove:function(a,b){var c=Math.atan2(d.centerPoint.coord[1]-b,d.centerPoint.coord[0]-a)*180/Math.PI;d.rotate(-c-5,!0)}}),this.rotateHandle.constraints.fixedDistance.dist=e+.5,this.rotateHandle.constraints.fixedDistance.point=this.centerPoint,this.rotateHandle.visibleShape.remove(),this.rotateHandle.mouseTarget.attr({scale:2}),jQuery(this.rotateHandle.mouseTarget[0]).bind("vmouseover",function(a){h.animate({scale:1.5},50)}),jQuery(this.rotateHandle.mouseTarget[0]).bind("vmouseout",function(a){h.animate({scale:1},50)});var i=jQuery.map(this.set,function(a){return a.node});return this.makeTranslatable=function(){jQuery(i).css("cursor","move"),jQuery(i).bind("vmousedown",function(a){a.preventDefault();var c=a.pageX-jQuery(b.raphael.canvas.parentNode).offset().left,e=a.pageY-jQuery(b.raphael.canvas.parentNode).offset().top;jQuery(i).animate({opacity:.25},150),jQuery(document).bind("vmousemove",function(a){var f=a.pageX-jQuery(b.raphael.canvas.parentNode).offset().left,g=a.pageY-jQuery(b.raphael.canvas.parentNode).offset().top;f=Math.max(10,Math.min(b.xpixels-10,f)),g=Math.max(10,Math.min(b.ypixels-10,g));var h=f-c,i=g-e;jQuery.each(d.set.items,function(){this.translate(h,i)}),d.centerPoint.setCoord([d.centerPoint.coord[0]+h/b.scale[0],d.centerPoint.coord[1]-i/b.scale[1]]),d.rotateHandle.setCoord([d.rotateHandle.coord[0]+h/b.scale[0],d.rotateHandle.coord[1]-i/b.scale[1]]),c=f,e=g}),jQuery(document).one("vmouseup",function(a){jQuery(i).animate({opacity:.5},150),jQuery(document).unbind("vmousemove")})})},this.rotation=0,this.rotate=function(a,c){var d=b.scalePoint(this.centerPoint.coord);return c&&(this.rotation=0),this.set.rotate(this.rotation+a,d[0],d[1]),this.rotation=this.rotation+a,this},this.moveTo=function(b,c){var e=KhanUtil.currentGraph,f=e.scalePoint(d.centerPoint.coord),g=e.scalePoint([b,c]),h=KhanUtil.getDistance(f,g)*2;jQuery({x:f[0],y:f[1]}).animate({x:g[0],y:g[1]},{duration:h,step:function(a,b){var c=0,f=0;b.prop==="x"?c=a-e.scalePoint(d.centerPoint.coord)[0]:b.prop==="y"&&(f=a-e.scalePoint(d.centerPoint.coord)[1]),jQuery.each(d.set.items,function(){this.translate(c,f)}),d.centerPoint.setCoord([d.centerPoint.coord[0]+c/e.scale[0],d.centerPoint.coord[1]-f/e.scale[1]]),d.rotateHandle.setCoord([d.rotateHandle.coord[0]+c/e.scale[0],d.rotateHandle.coord[1]-f/e.scale[1]])}})},this.rotateTo=function(b){Math.abs(this.rotation-b)>180&&(this.rotation+=360);var c=Math.abs(this.rotation-b)*5;jQuery({0:this.rotation}).animate({0:b},{duration:c,step:function(a,b){d.rotate(a,!0),d.rotateHandle.setCoord([Math.sin((a+275)*Math.PI/180)*(e+.5)+d.centerPoint.coord[0],Math.cos((a+275)*Math.PI/180)*(e+.5)+d.centerPoint.coord[1]])}})},this.set.attr({opacity:.5}),this.makeTranslatable(),this}function Scratchpad(a){function r(){for(var a=0,b=[];a<p.length;a++)p[a].removed||p[a].type=="path"&&b.push({path:p[a].attr("path").toString(),stroke:p[a].attr("stroke"),type:"path"});q.push(b)}function s(a){p.remove();for(var b=0;b<a.length;b++)a[b].type=="path"&&p.push(i.path(a[b].path).attr(o).attr("stroke",a[b].stroke))}function v(){n.animate({y:2},100),u="draw"}function w(){n.animate({y:32},100),u="erase"}function x(){s(q.pop())}function B(a,b,c){if(!a||!b||!c)return;A&&(A.remove(),A=null),r();var d=p.length;a>40&&(u=="draw"?C(a,b):u=="erase"&&(A=i.rect(a,b,0,0).attr({"fill-opacity":.15,"stroke-opacity":.5,fill:"#ff0000",stroke:"#ff0000"}),A.sx=a,A.sy=b)),p.length==d&&q.pop()}function C(a,b){y=i.path("M"+a+","+b).attr(o).attr({stroke:k}),z=y.attr("path"),p.push(y)}function D(a,b){return b.x<a.x+a.width&&b.x+b.width>a.x&&b.y<a.y+a.height&&b.y+b.height>a.y}function E(a){var b=a.toString().split("L"),c=b[0].substr(1).split(","),d=+c[0],e=+c[1],f=b[0],g=0;for(var h=1;h<b.length;h++){var i=b[h].split(","),j=Math.pow(+i[0]-d,2)+Math.pow(+i[1]-e,2);if(j>10||j<g||h==b.length-1)f+="L"+b[h],e=i[1],d=i[0];g=j}return f}function F(){y&&y.attr("path",E(z)),y=null;if(u=="erase"&&A){r();var a=A.getBBox();for(var b=0;b<p.length;b++)D(a,p[b].getBBox())&&p[b].remove();A.animate({"fill-opacity":0},100,function(){A.remove(),A=null})}}function G(a,b){if(a<=40)return;if(y&&u=="draw")z+="L"+a+","+b,y.attr("path",z);else if(u=="erase"&&A){var c=Math.min(a,A.sx),d=Math.min(b,A.sy),e=Math.max(a,A.sx),f=Math.max(b,A.sy);A.attr({x:c,y:d,width:e-c,height:f-d})}}var b="M25.31,2.872l-3.384-2.127c-0.854-0.536-1.979-0.278-2.517,0.576l-1.334,2.123l6.474,4.066l1.335-2.122C26.42,4.533,26.164,3.407,25.31,2.872zM6.555,21.786l6.474,4.066L23.581,9.054l-6.477-4.067L6.555,21.786zM5.566,26.952l-0.143,3.819l3.379-1.787l3.14-1.658l-6.246-3.925L5.566,26.952z",c="M23.024,5.673c-1.744-1.694-3.625-3.051-5.168-3.236c-0.084-0.012-0.171-0.019-0.263-0.021H7.438c-0.162,0-0.322,0.063-0.436,0.18C6.889,2.71,6.822,2.87,6.822,3.033v25.75c0,0.162,0.063,0.317,0.18,0.435c0.117,0.116,0.271,0.179,0.436,0.179h18.364c0.162,0,0.317-0.062,0.434-0.179c0.117-0.117,0.182-0.272,0.182-0.435V11.648C26.382,9.659,24.824,7.49,23.024,5.673zM22.157,6.545c0.805,0.786,1.529,1.676,2.069,2.534c-0.468-0.185-0.959-0.322-1.42-0.431c-1.015-0.228-2.008-0.32-2.625-0.357c0.003-0.133,0.004-0.283,0.004-0.446c0-0.869-0.055-2.108-0.356-3.2c-0.003-0.01-0.005-0.02-0.009-0.03C20.584,5.119,21.416,5.788,22.157,6.545zM25.184,28.164H8.052V3.646h9.542v0.002c0.416-0.025,0.775,0.386,1.05,1.326c0.25,0.895,0.313,2.062,0.312,2.871c0.002,0.593-0.027,0.991-0.027,0.991l-0.049,0.652l0.656,0.007c0.003,0,1.516,0.018,3,0.355c1.426,0.308,2.541,0.922,2.645,1.617c0.004,0.062,0.005,0.124,0.004,0.182V28.164z",d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248",e="M12.981,9.073V6.817l-12.106,6.99l12.106,6.99v-2.422c3.285-0.002,9.052,0.28,9.052,2.269c0,2.78-6.023,4.263-6.023,4.263v2.132c0,0,13.53,0.463,13.53-9.823C29.54,9.134,17.952,8.831,12.981,9.073z",f="M2.379,14.729 5.208,11.899 12.958,19.648 25.877,6.733 28.707,9.561 12.958,25.308",g=/AppleWebKit.*Mobile/.test(navigator.userAgent),h=jQuery(a),i=Raphael(h[0],h.width(),h.height());this.resize=function(){i.setSize(h.width(),h.height())},$("body").bind("selectstart",function(a){return!1});var j=i.set(),k="#000000",l=["#000000","#3f3f3f","#7f7f7f","#bfbfbf","#ff0000","#ff7f00","#ffff00","#00ff00","#00ffff","#007fff","#0000ff","#7f00ff"];for(var m=0;m<l.length;m++)(function(a){var b=function(b){k=a,j.animate({x:7},100),this.animate({x:15},100),v()};j.push(i.rect(7,90+m*24,24,24).attr({fill:a,stroke:""}).touchstart(b).click(b))})(l[m]);j[0].attr({x:15});var n=i.rect(2,2,30,30).attr({r:5,stroke:"",fill:"rgba(30, 157, 186, 0.5)"}),o={"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},p=i.set(),q=[[]],t=i.set();t.push(i.path(b).scale(.8).translate(0,0)),t.push(i.path(d).translate(0,30)),t.push(i.path(e).scale(.7).translate(1,60));var u="draw";i.rect(2,2,30,30).attr({stroke:"",fill:"black","fill-opacity":0}).click(v).touchstart(v),i.rect(2,32,30,30).attr({stroke:"",fill:"black","fill-opacity":0}).click(w).touchstart(w),i.rect(2,62,30,30).attr({stroke:"",fill:"black","fill-opacity":0}).click(x).touchstart(x),t.attr({fill:"#000",stroke:"none"});var y=null,z="",A=null;h.mousemove(function(a){var b=jQuery(h).offset();G(a.pageX-b.left,a.pageY-b.top),a.preventDefault()}),h.mousedown(function(a){var b=jQuery(h).offset();B(a.pageX-b.left,a.pageY-b.top,a),a.preventDefault(),$(document).one("mouseup",function(a){F(),a.preventDefault()})}),h.bind("touchstart",function(a){var b=jQuery(h).offset();B(a.originalEvent.touches[0].pageX-b.left,a.originalEvent.touches[0].pageY-b.top,a.originalEvent),a.preventDefault()}),h.bind("touchmove",function(a){var b=jQuery(h).offset();G(a.originalEvent.touches[0].pageX-b.left,a.originalEvent.touches[0].pageY-b.top),a.preventDefault()}),h.bind("touchend",function(a){F(),a.preventDefault()}),this.clear=function(){p.remove()}}var Translate=new function(){this.langdefault="en",this.lang="nl",this.table={},this.production=typeof userExercise!="undefined",this.current=this.production?userExercise.exercise:window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1).split(".")[0],this.exercisefile=(this.production?"/khan-exercises/exercises/":"")+this.current+".lang.js",this.globalfile=(this.production?"/khan-exercises/exercises/":"")+"lang.js",this.switchLang=function(a){return a[this.lang]?a[this.lang]:a[this.langdefault]},this.getTranslation=function(url,name){return $.ajax({type:"GET",url:url,async:!1,success:function(data){Translate.table[name]=eval(data)}}),this.table[name]},this.load=function(){Khan.Util.tokenreplace=Translate,Khan.Util.translate=Translate;var a=this.getTranslation(this.globalfile,"globals");$(".exercise-title").each(function(){var a=$("title").html().substring(0,$("title").html().indexOf("|")-1);Translate.table.globals.titles[Translate.lang][a]&&$(this).html(Translate.table.globals.titles[Translate.lang][a])});var b=this.getTranslation(this.exercisefile,this.current);b&&b[this.lang]&&$("[data-tt]").each(function(){token=$(this).attr("data-tt"),Translate.table[Translate.current][Translate.lang][token]&&$(this).html(Translate.table[Translate.current][Translate.lang][token])})}},Khan=function(){function a(a,b){jQuery(function(){jQuery("#warning-bar-content").html(a),b?jQuery("#warning-bar-close").show():jQuery("#warning-bar-close").hide(),jQuery("#warning-bar").fadeIn("fast")})}function R(a){w.length>1&&jQuery.map(a,function(a){a=jQuery(a);var b=a.parents(".exercise").eq(0),c=b.data("weight-sum");c=c!==undefined?c:0;var d=a.data("weight");d=d!==undefined?d:1,b.data("weight-sum",c+d)})}function S(a,b){var c=[],d=0;if(g&&P.query.test!=null)jQuery.each(a,function(b,d){d=jQuery(d),d.data("id",d.attr("id")||""+b);for(var e=0;e<10;e++)c.push(a.eq(b))}),A=c.length;else if(a.length>0){var e=jQuery.map(a,function(a,b){a=jQuery(a);var c=a.parents(".exercise").eq(0),e=c.data("weight");e=e!==undefined?e:1;var f=c.data("weight-sum"),g=a.data("weight");return g=g!==undefined?g:1,f!==undefined&&(g=g*e/f,a.data("weight",g)),a.data("id",a.attr("id")||""+b),d+=g,g});while(b)c.push(function(){var c=d*KhanUtil.random();for(var f=0;f<a.length;f++){if(c<e[f]||f===a.length-1){var g=Math.min(e[f],d/b--);return e[f]-=g,d-=g,a.eq(f)}c-=e[f]}return P.error("makeProblemBag got confused w/ index "+c)}())}return c}function T(){jQuery("#check-answer-button").removeAttr("disabled").removeClass("buttonDisabled").val(Translate.switchLang({en:"Check Answer",nl:"Check Antwoord"}))}function U(){jQuery("#check-answer-button").attr("disabled","disabled").addClass("buttonDisabled").val("Please wait...")}function V(a,b){typeof Badges!="undefined"&&Badges.hide(),P.scratchpad.enable();if(typeof b!="undefined")s=b;else if(g&&P.query.test!=null||l==null)s=k;k=s,g&&(a=typeof a!="undefined"?a:P.query.problem);if(typeof a!="undefined"){var c=w.children(".problems").children();n=/^\d+$/.test(a)?c.eq(parseFloat(a)):c.filter("#"+a)}else{if(!(y.length>0))return;n=y[z],a=n.data("id")}t=a,o=n.parents(".exercise").eq(0),n=n.clone();var d=jQuery("#workarea").is(":visible");jQuery("#workarea").append(n).show();var e=n.data("type");while(e){var h=o.find(".problems #"+e).clone();n.prepend(h.children().data("inherited",!0)),e=h.data("type")}n.prepend(o.children(":not(.problems)").clone().data("inherited",!0));var i=n.find(".vars").tmplApply({attribute:"class",defaultApply:"appendVars"}).end().find(".vars [id]").tmplApply().end().children("[class][class!='graphie'][class!='spin']").tmplApply({attribute:"class"});i.each(function(){jQuery(this).find("[id]").add(i).tmplApply()}),v=n.children(".hints").remove(),v.length===0&&jQuery(".hint-box").remove(),n.runModules(n,"Load"),n.runModules(n);var j=n.find(".solution"),m=n.find(".choices"),p=jQuery("#solutionarea").empty(),q=j.data("type");if(q&&P.answerTypes&&!P.answerTypes[q]){P.error("Unknown answer type specified: "+q);return}q||(m.length?q="radio":q="number"),F=[],G=[],u=P.answerTypes[q](p,j);if(!u){n.remove(),V(a,k);return}var r=p.find(":input").first();setTimeout(function(){r.focus().select()},1),K=r,p.find(":input").focus(function(){K=this}),j.remove(),m.remove(),jQuery("#workarea").toggle(d).fadeIn(),P.scratchpad.resize(),jQuery("#answercontent input").not("#check-answer-button").removeAttr("disabled"),jQuery("#throbber").is(":visible")||T(),u.examples&&u.examples.length>0?(jQuery("#examples-show").show(),jQuery("#examples").empty(),jQuery.each(u.examples,function(a,b){jQuery("#examples").append("<li>"+b+"</li>")}),jQuery("#examples").children().tmpl()):jQuery("#examples-show").hide(),v=v.tmpl().children().get(),v.length===0&&jQuery("#hint").attr("disabled",!0),g&&parent!==window&&typeof parent.jQuery!="undefined"&&parent.jQuery(parent.document).trigger("problemLoaded",[V,u.solution]);if(g&&P.query.test!=null){var x=jQuery("#tester-info"),H=jQuery.extend(!0,{},{seed:s,type:t,VARS:jQuery.tmpl.VARS,solution:u.solution});I.problems.push(H),jQuery(x).find(".problem-no").text(I.problems.length+I.issues+" of "+A);var J=jQuery(x).find(".answer").empty(),L=u.solution;jQuery.isArray(L)||(L=[L]),jQuery.each(L,function(a,b){if(jQuery.isArray(b)){var c=jQuery("<span>").addClass("group-box").appendTo(J);jQuery.each(b,function(a,b){jQuery("<span>").text(b).addClass("box").appendTo(c)})}else jQuery("<span>").text(b).addClass("box").appendTo(J)})}if(typeof f!="undefined"&&f.read_only){var M,N,O=jQuery("<div id='timelinecontainer'>").append("<div>							<div id='previous-problem' class='simple-button action-gradient'>Previous Problem</div>							<div id='previous-step' class='simple-button action-gradient'><span>Previous Step</span></div>						  </div>").insertBefore("#extras");gb().total_done===0&&jQuery("#previous-problem").addClass("disabled").css({cursor:"default !important",top:"0",color:"#333 !important"}).data("disabled",!0),N=jQuery("<div id='timeline'>").appendTo(O),M=jQuery("<div id='timeline-events'>").appendTo(N),O.append("<div>							<div id='next-problem' class='simple-button action-gradient'>Next Problem</div>							<div id='next-step' class='simple-button action-gradient'><span>Next Step</span></div>						  </div>"),jQuery("<div class='user-activity correct-activity'>Started</div>").data("hint",!1).appendTo(M);var Q=0,R=1;jQuery.each(f.user_activity,function(a,b){var c=b[1]==="Activity Unavailable"?b[1]:JSON.parse(b[1]),d;M.append("<div class='timeline-time'>"+b[2]+"s</div>"),d=jQuery("<div>").addClass("user-activity "+b[0]).appendTo(M);if(b[0]==="hint-activity")d.attr("title","Hint used"),d.data("hint",Q).prepend("Hint #"+(Q+1)),Q+=1;else{d.data("hint",!1);if(c==="Activity Unavailable")d.text(c);else{if(q==="radio")d.append(jQuery("<p class='solution'>"+c+"</p>").tmpl()),a===f.user_activity.length-1?(d.removeClass("incorrect-activity").addClass("correct-activity"),d.attr("title","Correct Answer")):d.attr("title","Incorrect Answer");else{var e=P.answerTypes[q](d,j);e.showGuess(c),e()===!0?(d.removeClass("incorrect-activity").addClass("correct-activity"),d.attr("title","Correct Answer")):(d.removeClass("correct-activity").addClass("incorrect-activity"),d.attr("title","Incorrect Answer"))}d.data("guess",c).find("input").attr("disabled",!0).end().find("select").attr("disabled",!0)}}}),O.height()>N.height()&&N.height(O.height());var S=M.children(".user-activity"),U=S.length-1,W=S.length,X=N.find(".hint-activity:first").index(".user-activity"),Y=N.find(".hint-activity:last").index(".user-activity"),Z=N.find(".hint-activity:last").index(".hint-activity"),$=jQuery("#hint"),_=jQuery("#hint-remainder"),ab=N.width()/2,bb=jQuery("#hintsarea"),cb=jQuery("#workarea"),db=[],fb=1e5;jQuery("#solutionarea").css("background-color",jQuery("#answercontent").css("background-color")),jQuery.fn.scrubber=function(){var a=jQuery("#scrubber1"),b=jQuery("#scrubber2");return a=a.length?a:jQuery("<div id='scrubber1'>").appendTo(document.body),b=b.length?b:jQuery("<div id='scrubber2'>").appendTo(document.body),a.css({display:"block",width:"0",height:"0","border-left":"6px solid transparent","border-right":"6px solid transparent","border-bottom":"6px solid #888",position:"absolute",top:O.offset().top+O.height()-6+"px",left:this.offset().left+this.width()/2+"px",bottom:"0"}),b.css({display:"block",width:"0",height:"0","border-bottom":"6px solid #888","border-left":"6px solid #888","border-right":"6px solid #888",position:"absolute",top:a.offset().top+7+"px",left:a.offset().left+"px"}),this},MathJax.Hub.Queue(function(){var a=0;M.children().each(function(){a=Math.max(a,jQuery(this).height())}),a>O.height()&&(O.height(a+16),N.height(a+16))});var hb=function(a){var b=S.eq(a),c,d,e=jQuery("#timeline-events .user-activity:lt("+(a+1)+")").filter(".hint-activity").length-1,f=b.position().left,g=f+b.width()/2,h=ab-g,i=N.scrollLeft(),j=S.eq(-1).position().left+S.eq(-1).width(),k=Math.min(i-h,i+j-N.width()+25);e>=0&&jQuery(v[e]).appendTo(bb).runModules(n),MathJax.Hub.Queue(function(){var f=function(){jQuery("#problemarea input").attr({disabled:"disabled"}),c=bb.clone(),d=cb.clone();var f={slide:b,hintNum:e,hintArea:c,problem:d,scroll:k};db[a]=f,a+1<S.length?MathJax.Hub.Queue(function(){hb(a+1)}):ib(a)};b.data("guess")!==undefined&&jQuery.isFunction(u.showCustomGuess)?(KhanUtil.currentGraph=jQuery(cb).find(".graphie").data("graphie"),u.showCustomGuess(b.data("guess")),MathJax.Hub.Queue(f)):f()})};MathJax.Hub.Queue(function(){hb(0)});var ib=function(a){var b,c,d=S.eq(a);db[a]&&(c=db[a],N.animate({scrollLeft:c.scroll},150,function(){c.slide.scrubber()}),a<X?(_.fadeOut(150),$.val("I'd like a hint")):a>=Y?S.eq(Y).data("hint")<v.length&&_.fadeOut(150):($.val("I'd like another hint"),_.text(Z-c.hintNum+" remaining").fadeIn(150)),jQuery("#workarea").remove(),jQuery("#hintsarea").remove(),jQuery("#problemarea").append(c.problem).append(c.hintArea),d.data("guess")?(p.effect("highlight",{},200),u.showGuess(d.data("guess"))):u.showGuess(),a>0&&c.hintNum>db[a-1].hintNum&&(jQuery("#hintsarea").children().each(function(a,b){a>fb&&jQuery(b).effect("highlight",{},200)}),fb=c.hintNum),a===0&&(fb=-1))};jQuery(document).keydown(function(a){if(a.keyCode!==37&&a.keyCode!==39)return;return a.keyCode===37?U-=1:U+=1,U=Math.min(U,W-1),U=Math.max(U,0),ib(U),!1}),jQuery(S).click(function(a){var b=jQuery(this).index("#timeline .user-activity");return U=b,ib(U),!1}),jQuery("#previous-step").click(function(a){return U>0&&(U-=1,ib(U)),!1}),jQuery("#next-step").click(function(a){return U<W-1&&(U+=1,ib(U)),!1}),jQuery("#next-problem").click(function(a){window.location.href=f.next_problem_url}),jQuery("#previous-problem").click(function(a){jQuery(this).data("disabled")||(window.location.href=f.previous_problem_url)}),jQuery("#timeline input[type='text']").css("width",jQuery("#answer_area input[type='text']").css("width")),jQuery("#hint").attr("disabled",!0),jQuery("#answercontent input").attr("disabled",!0),jQuery("#answercontent select").attr("disabled",!0)}if(g&&P.query.debug!=null){jQuery(document).keypress(function(a){a.charCode===104&&jQuery("#hint").click()});var jb=jQuery("#debug").empty(),kb=window.location.protocol+"//"+window.location.host+window.location.pathname+"?debug&problem="+t;jQuery("<h3>Debug Info</h3>").appendTo(jb);var lb=o.data("src");if(lb!=null){var mb=jQuery("<p>").appendTo(jb);mb.append("From "),jQuery("<a>").text(lb).attr("href",lb+"?debug").appendTo(mb)}var nb=jQuery("<p>").appendTo(jb);jQuery("<a>Problem permalink</a>").attr("href",kb+"&seed="+s).appendTo(nb);if(!P.query.activity){nb.append("<br>");var ob=kb+"&seed="+s+"&activity=";jQuery("<a>Problem history</a>").attr("href","javascript:").click(function(a){window.location.href=ob+encodeURIComponent(JSON.stringify(G))}).appendTo(nb)}else nb.append("<br>"),jQuery("<a>Random problem</a>").attr("href",kb).appendTo(nb);nb.append("<br>"),nb.append("Problem type: "),jQuery("<a>").text(t).attr("href",kb).appendTo(nb),o.data("name")!=null&&(nb.append("<br>"),nb.append("Original exercise: "+o.data("name")));if(typeof jQuery.tmpl.VARS!="undefined"){var pb=jQuery("<p>");jQuery.each(jQuery.tmpl.VARS,function(a,b){var c;if(typeof b=="function")c=b.toString();else try{c=JSON.stringify(b)}catch(d){c=b.toString()}pb.append(jQuery("<b>").text(a)),pb.append(": "),pb.append(jQuery("<var>").text(c)),pb.append("<br>")}),pb.appendTo(jb)}jQuery("body").addClass("debug")}return B=0,D=0,C=(new Date).getTime(),jQuery("#hint").val("I'd like a hint"),jQuery("#hint-remainder").hide(),E&&(eb(),E=!1),jQuery(P).trigger("newProblem"),q}function W(a){if(window.Raphael){a=a||{};var b=typeof f!="undefined"?f.exercise:(/([^\/.]+)(?:\.html)?$/.exec(window.location.pathname)||[])[1],c=function(){$.ajax({url:"/api/v1/user/exercises/"+b+"/followup_exercises",type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:d})};Raphael.fn.centeredBox=function(a,b,c,d,e){return this.rect(a-c/2,b-d/2,c,d,e)};var d=function(a){$("#you-are-here").empty(),a=a||[],a=a.slice(0,3);var b=Raphael("you-are-here",500,100),c=["M10,50 l75,0 l0,17","M10,50 l150,0 l0,-17","M10,50 l225,0"],d="l2,0 l1-2 l1,2 l2,0 l-2,1 l1,2 l-2,-1 l-2,1 l1,-2 l-2,-1";a.length===2&&(c=c.slice(1,3)),a.length===1&&(c=c.slice(2,3)),b.text(5,30,"You Are Here").attr("text-anchor","start").attr("font-size",12).attr("fill","#444");var e=b.centeredBox(13,51,20,20,4).attr("fill","rgb(0, 128, 201)").attr("stroke-width",0),g=b.path("M10,50 "+d).attr("fill","rgb(255, 255, 72)").attr("stroke","rgb(0, 128, 201)").attr("stroke-width",0).scale(3,3.5).attr("id","you-star"),h=$.map(a,function(a,h){var i=a.exercise_states||{suggested:!0};pathState=!1,$.each(i,function(a,b){pathState=b||pathState});var j="#ccc",k="#ccc",l="#fff";pathState&&(i.suggested&&(j="rgb(137, 185, 8)",k="rgb(208, 227, 156)",l="#fff"),i.proficient&&(j="rgb(0, 128, 201)",k="rgb(167, 211, 236)",l="rgb(255, 255, 72)"),i.reviewing&&(j="rgb(227, 93, 4)",k="rgb(244, 189, 154)",l="#ccc"));var m=b.path(c[h]).attr("stroke-width",6).attr("stroke",k),n=m.getPointAtLength(m.getTotalLength()),o=b.centeredBox(n.x,n.y,20,20,4).attr("fill",j).attr("stroke-width",0),p="M"+(n.x-3)+","+(n.y-1)+d,q=b.path(p).attr("fill",l).attr("stroke-width",0).scale(3,3.5);yoffset=h===0?25:-15,xoffset=-10;var r=a.hasOwnProperty("exercise_model")?a.exercise_model.display_name:a.display_name,s=a.hasOwnProperty("exercise_model")?a.exercise:a.name,t=typeof f!="undefined"?"/exercises?exid="+s:"./"+s+".html",u=b.text(n.x+xoffset,n.y+yoffset,r).attr("text-anchor","start").attr("font-size",14).attr("href",t).attr("fill","#999"),v=b.set(),w=b.set();w.push(o).push(q).push(u),v.push(m).push(w);var x=function(){v.toFront(),m.toFront(),w.toFront(),e.toFront(),g.toFront(),m.animate({stroke:j},350,"<>")},y=function(){m.animate({stroke:k},550,"<>")},z=function(){window.location=t},A=function(a){return gae_bingo.bingo("clicked_followup",z,z),!1};v.mouseover(x).mouseout(y).click(A)});e.toFront(),g.toFront()};if(jQuery.isArray(a)){d(a);return}c();return}}function X(a,b){jQuery("body").prepend(a),jQuery("#container").html(b),P.query.layout==="lite"&&jQuery("html").addClass("lite")}function Y(){function a(a,b,c,d){var e=Math.round((d-C)/1e3);return c!=="hint"?G.push([a?"correct-activity":"incorrect-activity",c,e]):G.push(["hint-activity","0",e]),{complete:a===!0?1:0,count_hints:B,time_taken:e,attempt_number:b,attempt_content:c,sha1:typeof f!="undefined"?f.exercise_model.sha1:i,seed:s,problem_type:t,non_summative:o.data("name")}}function b(){var b=u();if(jQuery.trim(u.guess)===""||u.guess instanceof Array&&jQuery.trim(u.guess.join("").replace(/,/g,""))==="")return!1;F.push(u.guess);if(jQuery("#answercontent input").not("#hint").is(":disabled"))return!1;jQuery("#throbber").show(),U(),jQuery("#answercontent input").not("#check-answer-button, #hint").attr("disabled","disabled"),jQuery("#check-answer-results p").hide();if(b===!0)jQuery("#happy").show(),jQuery("#sad").hide();else{jQuery("#happy").hide(),jQuery("#sad").show(),typeof b=="string"&&jQuery("#check-answer-results .check-answer-message").html(b).tmpl().show();var c=jQuery("#examples"),d=jQuery("#examples-show");d.is(":visible")&&(c.is(":visible")||d.click(),c.effect("pulsate",{times:1},"slow")),K!=null&&setTimeout(function(){jQuery(K).focus().select()},1)}var e=(new Date).getTime(),h=a(b,++D,JSON.stringify(u.guess),e);db("problems/"+p+"/attempt",h,function(){jQuery(P).trigger("answerSaved"),jQuery("#throbber").hide(),T()},function(){if(typeof f=="undefined"||!f.tablet)l!=null&&i!=null&&delete window.localStorage["exercise:"+l+":"+i],window.location.reload()});if(b===!0){jQuery("#check-answer-button").hide();if(!g||P.query.test==null)jQuery("#next-question-button").show(),jQuery("#next-question-button").removeAttr("disabled").removeClass("buttonDisabled").focus();_(1)}else jQuery("#answercontent input").not("#check-answer-button, #hint").removeAttr("disabled");return C=e,jQuery(P).trigger("checkAnswer",b),!1}jQuery(".exercise-title").text().length==0&&jQuery(".exercise-title").text(typeof f!="undefined"&&f.exercise_model?f.exercise_model.display_name:document.title),Translate.load(),w=jQuery(".exercise").detach(),jQuery("#sad").attr("src",J+"css/images/face-sad.gif"),jQuery("#happy").attr("src",J+"css/images/face-smiley.gif"),jQuery("#throbber, #issue-throbber").attr("src",J+"css/images/throbber.gif"),typeof f!="undefined"&&f.read_only&&jQuery("#extras").css("visibility","hidden"),jQuery("#answerform").attr("action",window.location.href),jQuery("#check-answer-button").click(b),jQuery("#answerform").submit(b),jQuery("#next-question-button").click(function(a){jQuery("#happy").hide(),jQuery("#examples-show").data("show")||jQuery("#examples-show").click(),jQuery("#check-answer-button").show(),jQuery("#next-question-button").blur().hide(),jQuery("#workarea").hide(),jQuery("#workarea, #hintsarea").runModules(n,"Cleanup").empty(),jQuery
("#hint").attr("disabled",!1),P.scratchpad.clear(),g&&P.query.test!=null&&I.problems.length+I.issues>=A?(jQuery("#problemarea").append("<p>Thanks! You're all done testing this exercise.</p><p>Please copy the text below and send it to us.</p>"),jQuery("<textarea>").val("Khan.testExercise("+JSON.stringify(I)+");").css({width:"60%",height:"200px"}).prop("readonly",!0).click(function(){this.focus(),this.select()}).appendTo("#problemarea"),jQuery("#sidebar").hide()):V()}),jQuery("#hint").click(function(){if(l&&D===0){var b=window.localStorage["hintApproved:"+l];if(typeof b=="undefined"||!JSON.parse(b))if(typeof f=="undefined"||!f.read_only){if(!confirm("One-time warning: Using a hint will set back your progress.\nAre you sure you want to continue?"))return;window.localStorage["hintApproved:"+l]=!0}}var c=v.shift();jQuery("#hint-remainder").text(v.length+" remaining").fadeIn(500);if(c){B+=1,jQuery(this).val(jQuery(this).data("buttonText")||"I'd like another hint");var d=jQuery(c).parent();jQuery(c).appendTo("#hintsarea").runModules(d),P.scratchpad.resize(),v.length===0&&(jQuery(this).attr("disabled",!0),jQuery("#hint-remainder").fadeOut(500))}var e=!g&&f.read_only,h=jQuery("#next-question-button").is(":visible");!e&&!h&&db("problems/"+p+"/hint",a(!1,D,"hint",(new Date).getTime()),function(){},function(){}),B===1&&D>0&&(gae_bingo.bingo("hints_free_hint"),gae_bingo.bingo("hints_free_hint_binary"))}),jQuery("<a>Report a Problem</a>").attr("id","report").addClass("simple-button action-gradient green").replaceAll(jQuery(".footer-links #report")),jQuery("#report").click(function(a){a.preventDefault();var b=jQuery("#issue").css("display")!=="none",c=jQuery("#issue form").css("display")!=="none";if(b&&c)jQuery("#issue").hide();else if(!b||!c)jQuery("#issue-email").val(userEmail),jQuery("#issue-status").removeClass("error").html(N),jQuery("#issue, #issue form").show(),jQuery("html, body").animate({scrollTop:jQuery("#issue").offset().top},500,function(){jQuery("#issue-title").focus()})}),jQuery("#issue-cancel").click(function(a){a.preventDefault(),jQuery("#issue").hide(500),jQuery("#issue-title, #issue-email, #issue-body").val("")}),jQuery("[name=issue-type] ").click(function(a){console.log(this),jQuery("[data-forlabel]").hide(),jQuery("[data-for="+jQuery(this).attr("id")+"]").show()}),jQuery("#issue form input:submit").click(function(a){a.preventDefault();var b=jQuery(".exercise-title").text()||jQuery("title").text().replace(/ \|.*/,""),c={page:b,ureport:jQuery("#issue-body").val(),ucontact:jQuery("#issue-email").val(),utype:jQuery("input[name=issue-type]:checked").data("text"),ustamp:(new Date).getTime(),udate:(new Date).toUTCString()};if(jQuery("#issue form").css("display")==="none")return;var d=jQuery("#issue input").add("#issue textarea");d.attr("disabled",!0),jQuery("#issue-cancel").hide(),jQuery("#issue-throbber").show(),jQuery.ajax({url:"/nl_report",type:"POST",data:c,success:function(a){jQuery("#issue form").hide(),jQuery("#issue-status").removeClass("error").html(Translate.switchLang({nl:"Bedankt voor je feedback!",en:"Thanks for your feedback!"})).show(),d.attr("disabled",!1).not("input:submit").val(""),jQuery("#issue-cancel").show(),jQuery("#issue-throbber").hide()},error:function(a){jQuery("#issue-status").addClass("error").html(Translate.switchLang({nl:"Het melden is mislukt, probeer het later nog een keer.",en:"Reporting the problem failed, try again later."})).show(),d.attr("disabled",!1),jQuery("#issue-cancel").show(),jQuery("#issue-throbber").hide()}})}),jQuery("#print-ten").data("show",!0).click(function(a){a.preventDefault();var b=jQuery(this),c=b.data("show");jQuery("#next-question-button").click();if(c){b.text("Try current problem"),jQuery("#answerform").hide();for(var d=0;d<9;d++)jQuery("#workarea").append("<hr>"),_(1),V();ab(9)}else b.text("Show next 10 problems"),jQuery("#answerform").show();jQuery("#answerform input[type='button']").attr("disabled",c),b.data("show",!c)}),jQuery("#examples-show").data("show",!0).click(function(a){a&&a.preventDefault();var b=jQuery(this),c=jQuery("#examples"),d=b.data("show");b.data("show")?b.text(Translate.switchLang({nl:"Verberg geaccepteerde antwoordformaten.",en:"Hide acceptable answer formats"})):b.text(Translate.switchLang({nl:"Laat geaccepteerde antwoordformaten zien.",en:"Show acceptable answer formats"})),c.slideToggle(190),b.data("show",!d)}).trigger("click"),jQuery("#warning-bar-close a").click(function(a){a.preventDefault(),jQuery("#warning-bar").fadeOut("slow")}),jQuery("#scratchpad-show").click(function(a){a.preventDefault(),P.scratchpad.toggle(),l&&(window.localStorage["scratchpad:"+l]=P.scratchpad.isVisible())}),jQuery("#answer_area").delegate("input.button, select","keydown",function(a){if(a.keyCode===8)return!1}),g&&P.query.test!=null&&(jQuery("#answer_area").prepend('<div id="tester-info" class="info-box"><span class="info-box-header">Testing Mode</span><p><strong>Problem No.</strong> <span class="problem-no"></span></p><p><strong>Answer:</strong> <span class="answer"></span></p><p><input type="button" class="pass button green" value="This problem was generated correctly."><input type="button" class="fail button orange" value="There is an error in this problem."></p></div>'),jQuery("#tester-info .pass").click(function(){I.problems[I.problems.length-1].pass=!0,_(1),jQuery("#next-question-button").trigger("click")}),jQuery("#tester-info .fail").click(function(){var a=prompt("Please provide a short description of the error");if(a==null)return;var b=I.problems.pop(),c="```js\n"+JSON.stringify(b)+"\n```",d=window.location.pathname.replace(/^.+\//,""),e=d+"?problem="+t+"&seed="+s,f=encodeURIComponent("Issue Found in Testing - "+jQuery("title").html()),g=encodeURIComponent([a,e,c,navigator.userAgent].join("\n\n")),h=encodeURIComponent("tester bugs"),i=function(a,b,c){a.push(b),a[a.length-1].pass=c},j=function(c){jQuery.ajax({url:"http://66.220.0.98:2563/file_exercise_tester_bug_comment?id="+c+"&body="+g,dataType:"jsonp",success:function(c){c.meta.status!==201?i(I.problems,b,a):I.issues+=1},error:function(c){i(I.problems,b,a)}})},k=function(){jQuery.ajax({url:"http://66.220.0.98:2563/file_exercise_tester_bug?title="+f+"&body="+g+"&label="+h,dataType:"jsonp",success:function(c){c.meta.status!==201?i(I.problems,b,a):I.issues+=1},error:function(c){i(I.problems,b,a)}})};jQuery.ajax({url:"https://api.github.com/repos/PerceptumNL/khan-exercises/issues?labels=tester%20bugs",dataType:"jsonp",error:function(c){i(I.problems,b,a)},success:function(a){var b=!1;jQuery.each(a.data,function(a,c){encodeURIComponent(c.title)===f&&(b=c.number)}),b?j(b):k()}}),jQuery("#next-question-button").trigger("click")}),jQuery(document).keyup(function(a){a.keyCode==="H".charCodeAt(0)&&jQuery("#hint").click(),a.keyCode==="Y".charCodeAt(0)&&jQuery("#tester-info .pass").click(),a.keyCode==="N".charCodeAt(0)&&jQuery("#tester-info .fail").click()})),g&&P.query.debug!=null&&jQuery('<div id="debug"></div>').appendTo("#answer_area"),typeof APIActionResults!="undefined"&&APIActionResults.register("exercise_state",function(a){var b=jQuery("#exercise-message-container");a.template!==null?(b.empty().append(a.template),setTimeout(function(){b.slideDown()},50)):b.slideUp()}),document.referrer.indexOf("move_on")>0&&window.gae_bingo&&gae_bingo.bingo("clicked_followup");if(l){var c=window.localStorage["scratchpad:"+l];typeof c!="undefined"&&JSON.parse(c)&&P.scratchpad.show()}}function Z(a){p=a,s=(q+r*(p-1))%j,z=(p+A-1)%A}function _(a){Z(p+a)}function ab(a){_(-a)}function bb(a){var b=jQuery("#exercise-icon-container"),c=a&&a.exercise_states;if(c){var d=c.summative?"node-challenge":"node",e=c.review?"/images/node-review.png":c.suggested?"/images/"+d+"-suggested.png":c.proficient?"/images/"+d+"-complete.png":"/images/"+d+"-not-started.png";jQuery("#exercise-icon-container img").attr("src",e),b.addClass("hint").click(function(){jQuery(this).toggleClass("hint")})}}function cb(a){eb(a),a.exercise&&(i=a.exercise),l!=null&&(r=c[m%c.length],q=m%j,Z(gb().total_done+1))}function db(a,b,c,d){if(g){jQuery.isFunction(c)&&c();return}var e={};typeof XMLHTTPRequest!="undefined"&&(e.withCredentials=!0);var f={url:h+"/api/v1/user/exercises/"+i+"/"+a,type:"POST",data:b,dataType:"json",xhrFields:e,success:function(a){eb(a),jQuery.isFunction(c)&&c(a)},error:d};typeof oauth!="undefined"&&jQuery.oauth?jQuery.oauth(jQuery.extend({},oauth,f)):jQuery.ajax(f)}function eb(a){jQuery.extend(jQuery.easing,{easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c}}),a&&(l=a.user||l,m=l!=null?e(l):null,k=m||k);var b=gb();a&&(a.total_done>=b.total_done||a.user!==b.user)?l!=null&&(window.localStorage["exercise:"+l+":"+i]=JSON.stringify(a)):a=b;var c=jQuery(".streak-bar").width(),d=Math.min(Math.ceil(c*a.progress),c);if(a.summative){jQuery(".summative-help ").find(".summative-required-streaks").text(a.num_milestones).end().show();if(jQuery(".level-label").length===0){var f=[],g=a.num_milestones;for(var h=1;h<g;h++)f[f.length]=Math.ceil(h*(c/g));jQuery.each(f,function(a,b){jQuery(".best-label").after(jQuery("<li class='level-label' ></li>").css({left:b}))})}}jQuery(".current-rating").animate({width:d},365,"easeInOutCubic"),jQuery(".streak-icon").css({width:"100%"}),jQuery(".streak-bar").toggleClass("proficient",a.progress>=1),bb(a);var j=a&&a.exercise_model.related_videos;j&&j.length&&jQuery(".related-video-list").is(":empty")&&typeof ModalVideo!="undefined"&&(fb(j),ModalVideo&&ModalVideo.hookup())}function fb(a){var b=function(b,c){var d=b<a.length-1,e=jQuery("<li>").append("<a href='"+P.relatedVideoHref(c)+"'><img src='http://img.youtube.com/vi/"+c.youtube_id+"/hqdefault.jpg' width='' height='' alt='"+c.title+"'/></a>");jQuery(".related-content > .related-video-list").append(e).show(),jQuery("#related-video-list,#related-video-list>*,#related-video-list>ul>li>a").show()},c=function(a,b){var c=jQuery("#thumbnail-tmpl").tmpl({href:P.relatedVideoHref(b),video:b}).find("a.related-video").data("video",b).end(),d=jQuery("<a href='"+P.relatedVideoHref(b)+"' alt='"+b.title+"'><img src='http://img.youtube.com/vi/"+b.youtube_id+"/hqdefault.jpg' width='120px' height='60px'/></a>"),e=jQuery("<li>").append(d).append(c);jQuery("#related-video-list .related-video-list").append(e)};jQuery.tmpl&&(jQuery.each(a,b),jQuery.each(a,c),jQuery(".related-content, .related-video-box").show());var d=45,e=23,f={duration:150,queue:!1};jQuery(".thumbnail").hover(function(){jQuery(this).find(".thumbnail_label").animate({marginTop:e},f).end().find(".thumbnail_teaser").animate({height:d},f)},function(){jQuery(this).find(".thumbnail_label").animate({marginTop:e+d},f).end().find(".thumbnail_teaser").animate({height:0},f)})}function gb(){if(typeof f!="undefined"&&f.read_only)return f;var a=window.localStorage["exercise:"+l+":"+i];return a?JSON.parse(a):{total_done:0,total_correct:0,streak:0,longest_streak:0,next_points:225,exercise_model:{summative:x}}}function hb(){var a=jQuery(this),b=a.data("name"),c=a.data("weight");H++,jQuery.get(J+"exercises/"+b+".html",function(d,e,f){var g,h;if(!/success|notmodified/.test(e)){P.error("Error loading exercise from file "+b+".html: "+f.status+" "+f.statusText);return}d=d.replace(/(<body[^>]*>)/,"$1<pre>").replace("</body>","</pre></body>"),h=jQuery(d).find("div.exercise"),a.replaceWith(h),h.find(".exercise[data-name]").each(hb);var i=(Translate.production?"/khan-exercises/exercises/":"")+b+".lang.js",j=Translate.getTranslation(i,b);j&&j[Translate.lang]&&h.find("[data-tt]").each(function(){token=$(this).attr("data-tt"),j[Translate.lang][token]&&$(this).html(j[Translate.lang][token])}),h.filter(".exercise").data("name",b),h.filter(".exercise").data("weight",c);var k=d.match(/<html(?:[^>]+)data-require=(['"])((?:(?!\1).)*)\1/);k!=null&&(k=k[2]),P.require(k);var l=/<title>([^<]*(?:(?!<\/title>)<[^<]*)*)<\/title>/gi;while((g=l.exec(d))!=null)h.filter(".exercise").data("title",g[1]);var m=/<(?:)script\b[^s>]*(?:(?!src=)s[^s>]*)*>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/gi;while((g=m.exec(d))!=null)jQuery.globalEval(g[1]);H--,H===0&&ib()})}function ib(){function a(a,c){X(a,c),b()}function b(){Y();if(!g||!P.query.problem){var a=w.children(".problems").children();R(a),y=S(a,10)}var b=V()}P.loadScripts(jQuery.map(P.modules,function(a,b){return a}),function(){jQuery(function(){jQuery("#answer_area").length===0?jQuery.ajax({url:J+"exercises/khan-site.html",dataType:"html",success:function(b){jQuery.ajax({url:J+"exercises/khan-exercise.html",dataType:"text",success:function(c){a(b,c)}})}}):b()})})}var b=function(){var a,b=+(new Date);try{return localStorage[b]=b,a=localStorage[b]==b,localStorage.removeItem(b),a}catch(c){return!1}}();if(!b){typeof jQuery!="undefined"&&a("You must enable DOM storage in your browser to see an exercise.",!1);return}var c=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83],d="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",e=function(a,b){b==window.undefined&&(b=0);var c=0,e=0;b^=-1;for(var f=0,g=a.length;f<g;f++)c=(b^a.charCodeAt(f))&255,e="0x"+d.substr(c*9,8),b=b>>>8^e;return Math.abs(b^-1)},f=window.userExercise,g=typeof f=="undefined",h=typeof apiServer!="undefined"?apiServer:g?"http://localhost:8080":"",i=typeof f!="undefined"?f.exercise:(/([^\/.]+)(?:\.html)?$/.exec(window.location.pathname)||[])[1],j=200,k,l=window.localStorage["exercise:lastUser"]||null,m,n,o,p=1,q=0,r=1,s=0,t,u,v,w,x=!1,y,z=0,A=10,B,C,D,E=!0,F,G,H=0,I={exercise:i,problems:[],issues:0},J=typeof urlBaseOverride!="undefined"?urlBaseOverride:g?"../":"/khan-exercises/",K=null,L='Communication with GitHub isn\'t working. Please file the issue manually at <a href="http://github.com/PerceptumNL/khan-exercises/issues/new">GitHub</a>. Please reference exercise: '+i+".",M=function(a,b,c){return["Thank you for your feedback! Your issue has been created and can be ","found at the following link:",'<p><a id="issue-link" href="',a,'">',b,"</a>","<p>",c,"</p>"].join("")},N="Ga eerst door alle hints en vul het antwoord uit de hints in, gebruik report a problem bij vragen waarvan je denkt dat ze het niet doen alleen als je echt zeker weet dat de vraag niet werkt of niet goed is. Als de vraag fout is kopieer de vraag dan in je omschrijving, dat helpt enorm, bedankt voor het helpen!";try{delete window.userExercise}catch(O){window.userExercise=undefined}g&&function(){var a=document.createElement("link");a.rel="stylesheet",a.href=J+"css/khan-site.css",document.getElementsByTagName("head")[0].appendChild(a),a=document.createElement("link"),a.rel="stylesheet",a.href=J+"css/khan-exercise.css",document.getElementsByTagName("head")[0].appendChild(a)}();var P={modules:{},urlBase:J,moduleDependencies:{math:[{src:J+"utils/MathJax/1.1a/MathJax.js?config=KAthJax-7018d213c4354228862b1ba15a62d3d5"},"raphael"],calculus:["math","expressions","polynomials"],exponents:["math","math-format"],kinematics:["math"],"math-format":["math","expressions"],polynomials:["math","expressions"],stat:["math"],"word-problems":["math"],"derivative-intuition":["jquery.mobile.vmouse"],"unit-circle":["jquery.mobile.vmouse"],interactive:["jquery.mobile.vmouse"]},warnTimeout:function(){a('Your internet might be too slow to see an exercise. Refresh the page or <a href="" id="warn-report">report a problem</a>.',!1),jQuery("#warn-report").click(function(a){a.preventDefault(),jQuery("#report").click()})},warnFont:function(){var b="enable font download in your browser";jQuery.browser.msie&&(b='<a href="http://missmarcialee.com/2011/08/how-to-enable-font-download-in-internet-explorer-8/"  target="_blank">enable font download</a>'),a("You should "+b+" to improve the appearance of math expressions.",!0)},require:function(a){if(a==null)return;typeof a=="string"?a=a.split(" "):jQuery.isArray(a)||(a=[a]),jQuery.each(a,function(a,b){var c,d;if(typeof b=="string"){var e="";g&&P.query.nocache!=null&&(e="?"+Math.random()),c=J+"utils/"+b+".js"+e,d=P.moduleDependencies[b],b={src:c,name:b}}else c=b.src,d=b.dependencies,delete b.dependencies;P.modules[c]||(P.modules[c]=b,P.require(d))})},Util:{random:function(){var a=k;return a=a+2127912214+(a<<12)&4294967295,a=(a^3345072700^a>>>19)&4294967295,a=a+374761393+(a<<5)&4294967295,a=(a+3550635116^a<<9)&4294967295,a=a+4251993797+(a<<3)&4294967295,a=(a^3042594569^a>>>16)&4294967295,(k=a&268435455)/268435456}},loadScripts:function(a,b){function h(a){a!==!0&&c++,b&&d===c&&b()}var c=0,d=a.length,e=document.getElementsByTagName("head")[0];b||(b=function(){});for(var f=0;f<d;f++)(function(a){if(!g&&a.src.indexOf("/khan-exercises/")===0&&a.src.indexOf("/MathJax/")===-1){c++;return}var b=document.createElement("script");b.async="async";for(var d in a)b[d]=a[d];b.onerror=function(){P.error("Error loading script "+b.src)},b.onload=b.onreadystatechange=function(){if(!b.readyState||/loaded|complete/.test(b.readyState))b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=undefined,h()},e.appendChild(b)})(a[f]);h(!0)},queryString:function(){var a={},b,c=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=function(a){return decodeURIComponent(a.replace(c," "))},f=window.location.search.substring(1);while(b=d.exec(f))a[e(b[1])]=e(b[2]);return a},error:function(){typeof console!="undefined"&&jQuery.each(arguments,function(a,b){console.error(b)})},scratchpad:function(){var a=!1,b=!1,c,d,e={disable:function(){c=b,e.hide(),jQuery("#scratchpad-show").hide(),jQuery("#scratchpad-not-available").show(),a=!0},enable:function(){c&&(e.show(),c=!1),jQuery("#scratchpad-show").show(),jQuery("#scratchpad-not-available").hide(),a=!1},isVisible:function(){return b},show:function(){if(b)return;var a=function(){jQuery("#workarea, #hintsarea").css("padding-left",60),jQuery("#scratchpad").show(),jQuery("#scratchpad-show").text("Hide scratchpad"),b=!0};d?a():P.loadScripts([{src:J+"utils/scratchpad.js"}],function(){a(),d||(d=new Scratchpad(jQuery("#scratchpad div")[0]))})},hide:function(){if(!b)return;jQuery("#workarea, #hintsarea").css("padding-left",0),jQuery("#scratchpad").hide(),jQuery("#scratchpad-show").text("Show scratchpad"),b=!1},toggle:function(){b?e.hide():e.show()},clear:function(){d&&d.clear()},resize:function(){d&&d.resize()}};return e}(),showThumbnail:function(a){jQuery("#related-video-list .related-video-list li").each(function(b,c){b===a?jQuery(c).find("a.related-video-inline").hide().end().find(".thumbnail").show():jQuery(c).find("a.related-video-inline").show().end().find(".thumbnail").hide()})},relatedVideoHref:function(a,b){var c="";return b=b||f,b&&(c="?exid="+b.exercise_model.name),a.ka_url+c},showSolutionButtonText:function(){return B?"Show step ("+v.length+" left)":"Show Solution"}};P.query=P.queryString(),P.query.activity!==undefined&&(f={exercise_model:{},read_only:!0,user_activity:JSON.parse(P.query.activity)}),k=g&&parseFloat(P.query.seed)||m||(new Date).getTime()&4294967295;var Q=typeof jQuery!="undefined"?[]:[{src:"../jquery.js"}];return P.loadScripts(Q,function(){g&&P.require(["../jquery-ui"]),P.require(["answer-types","tmpl","underscore"]),P.require(document.documentElement.getAttribute("data-require")),typeof f!="undefined"?cb(f):jQuery.ajax({url:h+"/api/v1/user/exercises/"+i,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:cb}),jQuery(function(){var a=jQuery(".exercise[data-name]");a.length?(x=!0,a.each(hb)):jQuery(".exercise").length&&ib()}),jQuery.fn.extend({getRandom:function(){return this.eq(Math.floor(this.length*KhanUtil.random()))},runModules:function(a,b){b=b||"";var c={testMode:g};return this.each(function(d,e){e=jQuery(e),jQuery.each(P.modules,function(d,f){var g=f.name;jQuery.fn[g+b]&&e[g+b](a,c)})})}}),jQuery.expr[":"].attached=function(a){return jQuery.contains(a.ownerDocument.documentElement,a)}}),typeof f!="undefined"&&f.tablet&&(P.loadExercise=hb,P.prepareUserExercise=cb),P}(),KhanUtil=Khan.Util;jQuery.extend(KhanUtil,{commonAngles:[{deg:15,rad:"\\frac{\\pi}{12}"},{deg:30,rad:"\\frac{\\pi}{6}"},{deg:45,rad:"\\frac{\\pi}{4}"},{deg:60,rad:"\\frac{\\pi}{3}"},{deg:90,rad:"\\frac{\\pi}{2}"},{deg:120,rad:"\\frac{2\\pi}{3}"},{deg:135,rad:"\\frac{3\\pi}{4}"},{deg:150,rad:"\\frac{5\\pi}{6}"},{deg:180,rad:"\\pi"},{deg:210,rad:"\\frac{7\\pi}{6}"},{deg:225,rad:"\\frac{5\\pi}{4}"},{deg:240,rad:"\\frac{4\\pi}{3}"},{deg:270,rad:"\\frac{3\\pi}{2}"},{deg:300,rad:"\\frac{5\\pi}{3}"},{deg:315,rad:"\\frac{7\\pi}{4}"},{deg:330,rad:"\\frac{11\\pi}{6}"},{deg:360,rad:"2\\pi"}],toRadians:function(a){return a*Math.PI/180},wrongCommonAngle:function(a,b){return KhanUtil.commonAngles[(a+4*b)%KhanUtil.commonAngles.length]},wrongDegrees:function(a){var b,c;do b=KhanUtil.randRange(10,35),KhanUtil.rand(2)&&(b*=-1),c=a+b;while(!(c>=0&&c<=360));return c},wrongRadians:function(a){var b,c;do b=KhanUtil.randRange(10,35)/100,KhanUtil.rand(2)&&(b*=-1),c=KhanUtil.roundTo(2,a+b);while(!(c>=0&&c<=2*Math.PI));return c}}),function(){var inexactMessages={unsimplified:"Je antwoord is bijna goed, maar moet vereenvoudigd worden.",missingPercentSign:"Je antwoord is bijna goed, maar het <code>\\%</code> ontbreekt."};Khan.answerTypes=Khan.answerTypes||{},jQuery.extend(Khan.answerTypes,{text:function(a,b,c,d,e){e||(e=jQuery('<input type="text">')),jQuery(a).append(e);var f=typeof b=="object"?jQuery(b).text():b;d==null&&(d=function(a,b){return a=jQuery.trim(a),b=jQuery.trim(b),a===b});var g=function(){var a=e.val().length>0?e.val():typeof c!="undefined"?c+"":"";return g.guess=e.val(),d(f,a)};return g.solution=jQuery.trim(f),g.examples=d.examples||[],g.showGuess=function(a){e.val(a)},g},graphic:function(a,b,c){var d=function(a,b){return Math.abs(a-b)<.3};return Khan.answerTypes.text(a,b,c,d)},line:function(solutionarea,solution,fallback){var verifier=function(correct,guess){var result=!0;for(var i=0;i<5;i++){var sampleX=KhanUtil.randRange(-100,100);if(guess.match(/[A-W]|[a-w]|[y-z]|[Y-Z]/)!==null)return!1;var newGuess=guess.replace(/\u2212/,"-").replace(/(\d)(x)/,"�1 * �2").replace("x",sampleX).replace(/(\d)(\()/,"�1 * �2"),newCorrect=correct.replace(/(\d)(x)/,"�1 * �2").replace("x",sampleX).replace(/(\d)(\()/,"�1 * �2").replace(/-\s?-/,"");result=result&&eval(newCorrect)===eval(newGuess)}return result};return verifier.examples="Een vergelijking van een lijn, zoals 3(x+1)/2 of 2x + 1",Khan.answerTypes.text(solutionarea,solution,fallback,verifier)},number:function(a,b,c,d){var e=jQuery.extend({simplify:"required",ratio:!1,maxError:Math.pow(2,-42),forms:"literal, integer, proper, improper, mixed, decimal"},jQuery(b).data()),f=(d||e.forms).split(/\s*,\s*/),g=function(a){a=a.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/(^\s*)|(\s*$)/gi,"");var b=a.match(/^([+-]?\d+)\s*\/\s*([+-]?\d+)$/),c=parseInt(a,10);if(b){var d=parseFloat(b[1]),f=parseFloat(b[2]),g=f>0&&(e.ratio||b[2]!=="1")&&KhanUtil.getGCD(d,f)===1;return[{value:d/f,exact:g}]}return!isNaN(c)&&""+c===a?[{value:c,exact:!0}]:[]},h={literal:{transformer:function(a){return[{value:/[^+-\u2212\d\.\s]/.test(a)?a:null}]}},integer:{transformer:function(a){return h.decimal.transformer(a)},example:"een geheel getal, zoals bijv. <code>6</code>"},proper:{transformer:function(a){return jQuery.map(g(a),function(a){return Math.abs(a.value)<1?[a]:[]})},example:function(){return e.simplify==="optional"?"een <em>breuk</em>, zoals <code>1/2</code> of <code>6/10</code>":"een <em>vereenvoudigde</em> breuk, zoals <code>3/5</code>"}()},improper:{transformer:function(a){return jQuery.map(g(a),function(a){return Math.abs(a.value)>=1?[a]:[]})},example:function(){return e.simplify==="optional"?"an <em>improper</em> fraction, like <code>10/7</code> or <code>14/8</code>":"a <em>simplified improper</em> fraction, like <code>7/4</code>"}()},pi:{transformer:function(a){var b,c=[];a=a.replace(/\u2212/,"-");if(b=a.match(/^([+-]?)\s*(?:pi?|\u03c0)$/i))c=[{value:parseFloat(b[1]+"1"),exact:!0}];else if(b=a.match(/^([+-]?\d+\s*(?:\/\s*[+-]?\d+)?)\s*\*?\s*(?:pi?|\u03c0)$/i))c=g(b[1]);else if(b=a.match(/^([+-]?\d+)\s*\*?\s*(?:pi?|\u03c0)\s*(?:\/\s*([+-]?\d+))?$/i))c=g(b[1]+b[2]);else if(b=a.match(/^([+-]?)\s*\*?\s*(?:pi?|\u03c0)\s*(?:\/\s*([+-]?\d+))?$/i))c=g(b[1]+"1/"+b[2]);else if(a==="0")c=[{value:0,exact:!0}];else if(b=a.match(/^(\S+)\s*\*?\s*(?:pi?|\u03c0)$/i))c=h.decimal.transformer(b[1]);return jQuery.each(c,function(a,b){b.value*=Math.PI}),c},example:"een veelvoud van pi, bijv. <code>12\\ \\text{pi}</code> of <code>2/3\\ \\text{pi}</code>"},log:{transformer:function(a){var b,c=[];return a=a.replace(/\u2212/,"-"),(b=a.match(/^log\(\s*(\S+)\s*\)$/i))?c=h.decimal.transformer(b[1]):a==="0"&&(c=[{value:0,exact:!0}]),c},example:"an expression, bijv. <code>\\log(100)</code>"},percent:{transformer:function(a){a=jQuery.trim(a);var b=!1;a.indexOf("%")===a.length-1&&(a=jQuery.trim(a.substring(0,a.length-1)),b=!0);var c=h.decimal.transformer(a);return jQuery.each(c,function(a,c){c.exact=b}),c},example:"een percentage, bijv. <code>12.34\\%</code>"},dollar:{transformer:function(a){return a=jQuery.trim(a).replace("$",""),h.decimal.transformer(a)},example:"een geldbedrag, bijv. <code>&euro;2,75</code>"},mixed:{transformer:function(a){var b=a.replace(/\u2212/,"-").replace(/([+-])\s+/g,"&euro;1").match(/^([+-]?)(\d+)\s+(\d+)\s*\/\s*(\d+)$/);if(b){var c=parseFloat(b[1]+"1"),d=parseFloat(b[2]),e=parseFloat(b[3]),f=parseFloat(b[4]),g=e<f&&KhanUtil.getGCD(e,f)===1;return[{value:c*(d+e/f),exact:g}]}return[]},example:"a mixed number, like <code>1\\ 3/4</code>"},decimal:{transformer:function(a){var b=function(a){var b=a.replace(/\u2212/,"-").replace(/([+-])\s+/g,"$1").replace(/,\s*/g,"").match(/^([+-]?(?:\d+\.?|\d*\.\d+))$/);if(b){var c=parseFloat(b[1]);if(e.inexact===undefined){var d=Math.pow(10,10);c=Math.round(c*d)/d}return c}},c=function(a){return a=a.replace(/([\.,])/g,function(a,b){return b==="."?",":"."}),b(a)};return[{value:b(a),exact:!0},{value:c(a),exact:!0}]},example:function(){return e.inexact===undefined?"een <em>decimaal</em>, bijv. <code>0,75</code>":"een decimaal, zoals <code>0,75</code>"}()}},i=function(a,b){a=jQuery.trim(a),b=jQuery.trim(b);var c=parseFloat(a),d=!1;return jQuery.each(f,function(f,g){var i=h[g].transformer(jQuery.trim(b));for(var j=0,k=i.length;j<k;j++){var l=i[j].value,m=i[j].exact;if(typeof l=="string"&&a.toLowerCase()===l.toLowerCase())return d=!0,!1;if(typeof l=="number"&&Math.abs(c-l)<e.maxError)return m||e.simplify==="optional"?d=!0:g==="percent"?d=inexactMessages.missingPercentSign:d=inexactMessages.unsimplified,!1}}),d};i.examples=[],jQuery.each(f,function(a,b){h[b]!=null&&h[b].example!=null&&i.examples.push(h[b].example)});var j;return typeof userExercise!="undefined"&&userExercise.tablet&&(j=jQuery("<input type='number'/>")),Khan.answerTypes.text(a,b,c,i,j)},regex:function(a,b,c){var d=function(a,b){return jQuery.trim(b).match(a)!=null};return Khan.answerTypes.text(a,b,c,d)},decimal:function(a,b,c){return Khan.answerTypes.number(a,b,c,"decimal")},rational:function(a,b,c){return Khan.answerTypes.number(a,b,c,"integer, proper, improper, mixed")},improper:function(a,b,c){return Khan.answerTypes.number(a,b,c,"integer, proper, improper")},mixed:function(a,b,c){return Khan.answerTypes.number(a,b,c,"integer, proper, mixed")},radical:function(a,b){var c=jQuery.extend({simplify:"required"},jQuery(b).data()),d=parseFloat(jQuery(b).text()),e=KhanUtil.splitRadical(d),f=jQuery("<span>"),g,h=jQuery("<span>"),i,j=Khan.answerTypes.text(f,null,"1",function(a,b){g=b}),k=Khan.answerTypes.text(h,null,"1",function(a,b){i=b});a.addClass("radical").append(f).append('<span class="surd">&radic;</span>').append(h.addClass("overline"));var l=function(){j(),k(),g=parseFloat(g),i=parseFloat(i),l.guess=[g,i];var a=g===e[0]&&i===e[1],b=Math.abs(g)*g*i===d;return b?a||c.simplify==="optional"?!0:inexactMessages.unsimplified:!1};return c.simplify==="required"?l.examples=["a simplified radical, like <code>\\sqrt{2}</code> or <code>3\\sqrt{5}</code>"]:l.examples=["a radical, like <code>\\sqrt{8}</code> or <code>2\\sqrt{2}</code>"],l.solution=e,l.showGuess=function(a){j.showGuess(a?a[0]:""),k.showGuess(a?a[1]:"")},l},multiple:function(a,b){a=jQuery(a),a.append(jQuery(b).clone().contents().tmpl());var c=[];a.find(".sol").each(function(){var a=jQuery(this).data("type");a=a!=null?a:"number";var b=jQuery(this).clone(),d=jQuery(this).empty(),e=b.data("fallback"),f=Khan.answerTypes[a](d,b,e);jQuery(this).data("validator",f),c.unshift(f.solution)});var d=function(){var b=!0,c=[];return a.find(".sol").each(function(){var a=jQuery(this).data("validator",a);a!=null&&(b=a()&&b,c.push(a.guess))}),d.guess=c,b};return d.showGuess=function(b){b=jQuery.extend(!0,[],b),a.find(".sol").each(function(){var a=jQuery(this).data("validator",a);if(a!=null){var c=b.shift();typeof a.showGuess=="function"&&a.showGuess(c)}})},d.showCustomGuess=function(b){b=jQuery.extend(!0,[],b),a.find(".sol").each(function(){var a=jQuery(this).data("validator",a);if(a!=null){var c=b.shift();jQuery.isFunction(a.showCustomGuess)&&a.showCustomGuess(c)}})},d.examples=a.find(".example").remove().map(function(a,b){return jQuery(b).html()}),d.solution=c,d},set:function(a,b){var a=jQuery(a),c=jQuery(b).data("showUnused")===!0;a.append(jQuery(b).find(".input-format").clone().contents().tmpl());var d=[],e=[],f=[];checkboxArray=[],jQuery(b).find(".set-sol").clone().each(function(){var a=jQuery(this).data("type");a=a!=null?a:"number";var b=null;a=="multiple"&&(b=jQuery(this).clone().empty());var c=jQuery(this).clone(),f=c.data("fallback"),g=Khan.answerTypes[a](b,c,f);d.push(g),e.push(g.solution)}),a.find(".entry").each(function(){var a=jQuery(this),b=jQuery(this).data("type");b=b!=null?b:"number",Khan.answerTypes[b](a,jQuery(this).clone().empty(),null),f.push(jQuery(a).find(":input"))}),a.find(".checkbox").each(function(){var a=jQuery(this).clone(),b=jQuery(this).empty(),c=jQuery('<input type="checkbox"/>');b.append(c);var d=KhanUtil.tmpl.getVAR(a.text());jQuery(c).data("solution",d),checkboxArray.push(c),e.push(d)});var g=function(){var b=!0,e=d.slice(0),h=[];jQuery(f).each(function(){var a=[],c=!1,d=0;jQuery(this).each(function(){a.push(jQuery(this).val())}),a.length==1?h.push(a[0]):h.push(a);while(d<e.length&&!c)e[d].showGuess(a),c=e[d](),++d;c?e.splice(d-1,1):jQuery.trim(a.join(""))!==""&&(b=!1)}),d.length>f.length?e.length>d.length-f.length&&(b=!1):e.length>0&&(b=!1),jQuery(checkboxArray).each(function(){var a=jQuery(this).is(":checked"),c=jQuery(this).data("solution"),d=jQuery(this).closest("label").text();d==""&&(d="checked"),h.push(a?d:""),a!=c&&(b=!1)}),g.guess=h;if(c&&b&&e.length){var i=jQuery("<p>").appendTo(a);jQuery(e).each(function(a,b){other_solution=b.solution,a>0&&jQuery("<span>").text(" and "
).appendTo(i),jQuery.each(other_solution,function(a,b){if(jQuery.isArray(b)){var c=jQuery("<span>").appendTo(i);jQuery.each(b,function(a,b){jQuery("<span>").text(b+" ").appendTo(c)})}else jQuery("<span> ").text(b+" ").appendTo(i)})}),e.length==1?jQuery("<span>").text(" is also correct").appendTo(i):jQuery("<span>").text(" are also correct").appendTo(i)}return b};return g.showGuess=function(b){b=jQuery.extend(!0,[],b),jQuery(f).each(function(){var a=b.shift();a instanceof Array?jQuery(this).each(function(){jQuery(this).val(a.shift())}):this.val(a)}),a.find(".checkbox input:checkbox").each(function(){var a=b.shift();jQuery(this).attr("checked",a!==undefined&&a!=="")})},g.examples=b.find(".example").remove().map(function(a,b){return jQuery(b).html()}),g.solution=e,g},radio:function(a,b){var c=function(a){return jQuery(a).find(".value").clone().find(".MathJax").remove().end().find("code").removeAttr("id").end().html()},d=c(b),e=jQuery("<ul></ul>");jQuery(a).append(e);var f=jQuery(b).siblings(".choices"),g=f.children().length+1;f.data("show")&&(g=parseFloat(f.data("show")));var h=f.data("none"),i=!1;h&&(i=KhanUtil.rand(g)===0,g-=1);var j=f.data("category"),k=f.children().get();j?g-=1:k=KhanUtil.shuffle(k),!i&&!j&&jQuery(b).data("correct",!0),j||k.splice(0,0,b);var l={},m=[],n=b.text().replace(/\s+/g,"");for(var o=0;o<k.length&&m.length<g;o++){var p=jQuery(k[o]);p.runModules();var q=p.text().replace(/\s+/g,"");j&&n===q&&p.data("correct",!0),l[q]||(l[q]=!0,(!i||o!==0||j)&&m.push(p))}if(m.length<g)return!1;j||(m=KhanUtil.shuffle(m));if(h){var r=jQuery("<span>Geen van allen.</span>");i&&(r.data("correct",!0),d=r.text(),e.data("real-answer",jQuery(b).runModules().contents().wrapAll('<span class="value""></span>').parent())),m.push(r)}jQuery.each(m,function(a,b){var c=b.data("correct");b.contents().wrapAll('<li><label><span class="value"></span></label></li>').parent().before('<input type="radio" name="solution" value="'+(c?1:0)+'">').parent().parent().appendTo(e)});var s=function(){var a=e.find("input:checked");return i&&a.val()==="1"&&a.next().fadeOut("fast",function(){jQuery(this).replaceWith(e.data("real-answer")).fadeIn("fast")}),s.guess=jQuery.trim(c(a.closest("li"))),a.val()==="1"};return s.solution=jQuery.trim(d),s.showGuess=function(a){e.find("input:checked").prop("checked",!1);var b=e.children().filter(function(){return jQuery.trim(c(this))===a});b.find("input[name=solution]").prop("checked",!0)},s},list:function(a,b){var c=jQuery("<select></select>");jQuery(a).append(c);var d=jQuery.tmpl.getVAR(jQuery(b).data("choices"));jQuery.each(d,function(a,b){c.append('<option value="'+b+'">'+b+"</option>")});var e=jQuery(b).text(),f=function(a,b){return a=jQuery.trim(a),b=jQuery.trim(b),a===b},g=function(){return g.guess=c.val(),f(e,g.guess)};return g.solution=jQuery.trim(e),g.showGuess=function(a){c.val(a)},g},primeFactorization:function(a,b,c){var d=function(a,b){return b=b.split(" ").join("").toLowerCase(),b=KhanUtil.sortNumbers(b.split(/x|\*|\u00d7/)).join("x"),b===a};return d.examples=["het product van priemgetallen, bijv. <code>2 \\times 3</code>","een enkel priemgetal, bijv. <code>5</code>"],Khan.answerTypes.text(a,b,c,d)},custom:function(a,b){var c=a.attr("id")!=="solutionarea"&&a.parent().attr("id")!=="solutionarea",d=!1;b.find(".instruction").appendTo(a);var e=b.find(".guess").text(),f=b.find(".validator-function").text(),g=function(a){var b="(function() { var guess = "+JSON.stringify(a)+";"+f+"})()";return KhanUtil.tmpl.getVAR(b,KhanUtil.currentGraph)};ret=function(){ret.guess=KhanUtil.tmpl.getVAR(e,KhanUtil.currentGraph);if(c)return d;var a=g(ret.guess);return a===""&&(ret.guess=""),a},ret.examples=b.find(".example").map(function(a,b){return jQuery(b).html()}),ret.solution="custom",ret.showGuess=function(b){c&&(d=g(b),jQuery(a).empty(),jQuery(a).append(d?"Juist antwoord":"Fout antwoord"))};var h=jQuery(b).find(".show-guess").text();return ret.showCustomGuess=function(a){var b="(function() { var guess = "+JSON.stringify(a)+";"+h+"})()";KhanUtil.tmpl.getVAR(b,KhanUtil.currentGraph)},ret}})}(),jQuery.extend(KhanUtil,{trigFuncs:["sin","cos","tan"],ddxTrigFuncs:{sin:function(a){return["cos",a]},cos:function(a){return["-",["sin",a]]},tan:function(a){return["^",["sec",a],2]}},generateFunction:function(a){var b;do b=new(KhanUtil.randFromArray(KhanUtil.CalcFunctions))(a);while(b.f==="0");return b},generateSpecialFunction:function(a){var b;do{var c=KhanUtil.rand(10);c<2?b=new KhanUtil.CalcFunctions[0](a):c<6?b=new KhanUtil.CalcFunctions[1](a):c<10&&(b=new KhanUtil.CalcFunctions[3](a))}while(b.f==="0");return b},ddxPolynomial:function(a){var b=[];for(var c=a.maxDegree;c>=a.minDegree;c--)b[c-1]=c*a.coefs[c];return new KhanUtil.Polynomial(a.minDegree-1,a.maxDegree-1,b,a.variable)},ddxPolynomialWrong1:function(a){var b=[];for(var c=a.maxDegree;c>=a.minDegree;c--)b[c]=c*a.coefs[c];return new KhanUtil.Polynomial(a.minDegree,a.maxDegree,b,a.variable)},ddxPolynomialWrong2:function(a){var b=[];for(var c=a.maxDegree;c>=a.minDegree;c--)c<0?b[c+1]=c*a.coefs[c]:b[c-1]=c*a.coefs[c];return new KhanUtil.Polynomial(a.minDegree,a.maxDegree,b,a.variable)},ddxPolynomialWrong3:function(a){var b=[];for(var c=a.maxDegree;c>=a.minDegree;c--)b[c-1]=-1*c*a.coefs[c];return new KhanUtil.Polynomial(a.minDegree-1,a.maxDegree-1,b,a.variable)},ddxPolynomialWrong4:function(a){var b=[];for(var c=a.maxDegree;c>=a.minDegree;c--)b[c-1]=a.coefs[c];return new KhanUtil.Polynomial(a.minDegree-1,a.maxDegree-1,b,a.variable)},ddxPolynomialWrong5:function(a){var b=[];for(var c=a.maxDegree;c>=a.minDegree;c--)b[c]=a.coefs[c]*-1;return new KhanUtil.Polynomial(a.minDegree,a.maxDegree,b,a.variable)},funcNotation:function(a,b){a=typeof a!="undefined"?a:"x";var c=[["y","\\frac{dy}{d"+a+"}",function(b){return"y="+b+" \\implies \\frac{dy}{d"+a+"}"}],["f("+a+")","f'("+a+")",function(a){return"f'("+a+")"}],["g("+a+")","g'("+a+")",function(a){return"g'("+a+")"}],["y","y'",function(a){return"y="+a+" \\implies y'"}],["f("+a+")","\\frac{d}{d"+a+"}f("+a+")",function(b){return"f("+a+")="+b+" \\implies \\frac{d}{d"+a+"}f("+a+")"}],["a","a'",function(a){return"a="+a+" \\implies a'"}],["a","\\frac{da}{d"+a+"}",function(b){return"a="+b+" \\implies \\frac{da}{d"+a+"}"}]],d=typeof b=="number"&&b>=0&&b<c.length?b:KhanUtil.rand(c.length);return{f:c[d][0],ddxF:c[d][1],diffHint:c[d][2]("A"+a+"^{n}")+"=n \\cdot A"+a+"^{n-1}",diffHintFunction:c[d][2]}},PowerRule:function(a,b,c,d,e){if(this instanceof KhanUtil.PowerRule){var a=typeof a=="number"?a:KhanUtil.randRange(-2,2),b=typeof b=="number"?b:KhanUtil.randRange(2,4),c=typeof c=="object"?c:KhanUtil.randCoefs(a,b),f=new KhanUtil.Polynomial(a,b,c,d);this.f=f.expr(),this.ddxF=KhanUtil.ddxPolynomial(f).expr(),this.fText=KhanUtil.expr(this.f),this.ddxFText=KhanUtil.expr(this.ddxF),this.notation=typeof e=="object"?e:KhanUtil.funcNotation(d),this.hints=[];for(var g=0;g<f.getNumberOfTerms();g+=1){var h=f.getCoefAndDegreeForTerm(g),i=h.degree*h.coef,j=h.degree!=0?h.degree-1:0,k=i==1?"":i+"",l=j==0?i:k+f.variable+(j==1?"":"^{"+j+"}");this.hints[g]="\\dfrac{d ("+KhanUtil.expr(this.f[g+1])+")}{dx} \\implies "+h.degree+" \\cdot "+h.coef+f.variable+"^{"+h.degree+"-1} = "+l}return this.wrongs=[KhanUtil.ddxPolynomialWrong1(f).expr(),KhanUtil.ddxPolynomialWrong2(f).expr(),KhanUtil.ddxPolynomialWrong3(f).expr(),KhanUtil.ddxPolynomialWrong4(f).expr(),KhanUtil.ddxPolynomialWrong5(f).expr()],this.wrongs=jQuery.map(this.wrongs,function(a,b){return a.length>1?[a]:[]}),this.wrongsText=jQuery.map(this.wrongs,function(a,b){return KhanUtil.expr(a)}),this}return new KhanUtil.PowerRule},CalcFunctions:[function(a){var b=KhanUtil.randRange(-2,2),c=KhanUtil.randRange(2,4);return KhanUtil.PowerRule(b,c,KhanUtil.randCoefs(b,c),a)},function(a){var b=KhanUtil.rand(3);return this.wrongs=[],this.wrongs[0]=["sin",a],this.wrongs[1]=["csc",a],this.wrongs[2]=["sec",a],this.wrongs[3]=["tan",a],this.wrongs[4]=["-",["sec",a]],this.wrongs[5]=["-",["cos",a]],this.f=[KhanUtil.trigFuncs[b],a],this.ddxF=KhanUtil.ddxTrigFuncs[KhanUtil.trigFuncs[b]](a),this.fText=KhanUtil.expr(this.f),this.ddxFText=KhanUtil.expr(this.ddxF),this.wrongsText=jQuery.map(this.wrongs,function(a,b){return KhanUtil.expr(a)}),this},function(a){var b=KhanUtil.randRange(2,6),c=b,d=[];d[b]=1;var e=new KhanUtil.Polynomial(c,b,d,a);return this.f=e.expr(),this.ddxF=KhanUtil.ddxPolynomial(e).expr(),this.wrongs=[KhanUtil.ddxPolynomialWrong1(e).expr(),KhanUtil.ddxPolynomialWrong2(e).expr(),KhanUtil.ddxPolynomialWrong3(e).expr(),KhanUtil.ddxPolynomialWrong4(e).expr(),KhanUtil.ddxPolynomialWrong5(e).expr()],this.wrongs=jQuery.map(this.wrongs,function(a,b){return a.length>1?[a]:[]}),this.fText=KhanUtil.expr(this.f),this.ddxFText=KhanUtil.expr(this.ddxF),this.wrongsText=jQuery.map(this.wrongs,function(a,b){return KhanUtil.expr(a)}),this},function(a){return this.wrongs=[],KhanUtil.rand(2)?(this.wrongs[0]=["frac",1,["ln",a]],this.wrongs[1]=["^","e",a],this.wrongs[2]=["frac",1,["^","e",a]],this.wrongs[3]=["ln",a],this.wrongs[4]=["frac",1,["^",a,2]],this.wrongs[5]=a,this.f=["ln",a],this.ddxF=["frac",1,a]):(this.wrongs[0]=["*",a,["^","e",["-",a,1]]],this.wrongs[1]=["frac",1,a],this.wrongs[2]=["*",a,["^","e",a]],this.wrongs[3]=["^","e",["-",a,1]],this.wrongs[4]=["^",["-","e",a],a],this.wrongs[5]=["frac","e",a],this.f=["^","e",a],this.ddxF=["^","e",a]),this.fText=KhanUtil.expr(this.f),this.ddxFText=KhanUtil.expr(this.ddxF),this.wrongsText=jQuery.map(this.wrongs,function(a,b){return KhanUtil.expr(a)}),this}]}),jQuery.extend(KhanUtil,{initCongruence:function(a){a=jQuery.extend({ticks:[],numArcs:[0,0,0],reflected:!1},a),a.sides=a.triangle.sideLengths.slice(),a.angles=a.triangle.angles.slice();var b=function(a){var b=a;while(Math.abs(b-a)<10)b=Math.floor(KhanUtil.random()*70)+10;return b},c=function(a){var b=a;while(Math.abs(b-a)<1)b=KhanUtil.random()*30/10+1;return b};if(a.type==="SSS"){a.angles[0]=b(a.angles[0]),a.angles[1]=b(a.angles[1]),a.angles[2]=b(a.angles[2]),a.ticks=[1,2,3];var d=KhanUtil.addInteractiveTriangle(a);d.points[0].constraints.fixedDistance={dist:a.sides[0],point:d.points[1]},d.setRotationPoint(1),d.setRotationPoint(2),d.points[3].constraints.fixedDistance={dist:a.sides[2],point:d.points[2]},d.points[0].onMove=function(a,b){return d.points[0].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.3&&d.snapCorrect(),d.update(),d.points[0].coord},d.points[3].onMove=function(a,b){return d.points[3].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.3&&d.snapCorrect(),d.update(),d.points[3].coord},d.snapCorrect=function(){Math.abs((a.triangle.angles[1]*(d.reflected?-1:1)+360)%360-(KhanUtil.findAngle(this.points[0].coord,this.points[2].coord,this.points[1].coord)+360)%360)>90&&(d.reflected=!d.reflected),this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedAngle:{angle:a.triangle.angles[1]*(d.reflected?-1:1),vertex:this.points[1],ref:this.points[2]}})),this.points[3].setCoord(this.points[3].applyConstraint(this.points[3].coord,{fixedAngle:{angle:a.triangle.angles[2]*(d.reflected?1:-1),vertex:this.points[2],ref:this.points[1]}}))}}else if(a.type==="SSA"){a.angles[0]=b(a.angles[0]),a.angles[1]=b(a.angles[1]),a.sides[2]=c(a.sides[2]),a.ticks=[1,2,0],a.numArcs=[0,1,0];var d=KhanUtil.addInteractiveTriangle(a);d.points[0].constraints.fixedDistance={dist:a.sides[0],point:d.points[1]},d.setRotationPoint(1),d.points[2].constraints.fixedDistance={dist:a.sides[1],point:d.points[1]},d.points[3].constraints.fixedAngle={angle:a.angles[2]*(d.reflected?1:-1),vertex:d.points[2],ref:d.points[1]},d.points[0].onMove=function(a,b){return d.points[0].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.2&&d.snapCorrect(),d.update(),d.points[0].coord},d.points[2].onMove=function(a,b){var c=d.points[2].coord;d.points[2].coord=[a,b],d.points[3].setCoord(d.points[3].applyConstraint(d.points[3].coord,{fixedDistance:{dist:KhanUtil.distance(d.points[3].coord,c),point:d.points[2]}})),KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.2&&d.snapCorrect(),d.update()},d.points[3].onMove=function(a,b){return d.points[3].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.2&&d.snapCorrect(),d.update(),d.points[3].coord},d.snapCorrect=function(){var b=a.triangle.angles[1]*(d.reflected?-1:1);if(Math.abs(KhanUtil.distance(d.points[2].coord,d.points[3].coord)-a.triangle.sideLengths[2])>1){this.isCongruent=!1,b=Math.abs(b);var c=Math.abs(a.triangle.angles[2]*(d.reflected?-1:1));b=(180-2*c-b)*(d.reflected?-1:1)}else this.isCongruent=!0;this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedAngle:{angle:b,vertex:this.points[1],ref:this.points[2]}})),this.points[3].setCoord(this.points[0].coord)}}else if(a.type==="SAS"){a.angles[0]=b(a.angles[0]),a.sides[2]=c(a.sides[2]),a.angles[2]=b(a.angles[2]),a.ticks=[1,2,0],a.numArcs=[1,0,0];var d=KhanUtil.addInteractiveTriangle(a);d.setRotationPoint(0),d.points[1].constraints.fixedDistance={dist:a.sides[1],point:d.points[2]},d.setRotationPoint(2),d.points[1].onMove=function(b,c){return d.points[1].coord=[b,c],d.points[0].setCoord(d.points[0].applyConstraint(d.points[0].coord,{fixedDistance:{dist:a.sides[0],point:d.points[1]},fixedAngle:{angle:a.angles[1]*(d.reflected?-1:1),vertex:d.points[1],ref:d.points[2]}})),KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.2&&d.snapCorrect(),d.update(),d.points[1].coord},d.points[3].onMove=function(a,b){return d.points[3].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.2&&d.snapCorrect(),d.update(),d.points[3].coord},d.snapCorrect=function(){this.points[3].setCoord(this.points[0].coord)}}else if(a.type==="SAA"){a.angles[0]=b(a.angles[0]),a.sides[1]=c(a.sides[1]),a.sides[2]=c(a.sides[2]),a.ticks=[1,0,0],a.numArcs=[1,2,0];var d=KhanUtil.addInteractiveTriangle(a);d.setRotationPoint(0),d.points[1].constraints.fixedAngle={angle:a.angles[2]*(d.reflected?-1:1),vertex:d.points[2],ref:d.points[3]},d.setRotationPoint(2),d.points[3].constraints.fixedAngle={angle:a.angles[2]*(d.reflected?1:-1),vertex:d.points[2],ref:d.points[1]},d.points[1].onMove=function(b,c){return d.points[1].coord=[b,c],d.points[0].setCoord(d.points[0].applyConstraint(d.points[0].coord,{fixedDistance:{dist:a.sides[0],point:d.points[1]},fixedAngle:{angle:a.angles[1]*(d.reflected?-1:1),vertex:d.points[1],ref:d.points[2]}})),KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.3&&d.snapCorrect(),d.update(),d.points[1].coord},d.points[3].onMove=function(a,b){return d.points[3].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.3&&d.snapCorrect(),d.update(),d.points[3].coord},d.snapCorrect=function(){this.points[1].setCoord(this.points[1].applyConstraint(this.points[1].coord,{fixedDistance:{dist:a.triangle.sideLengths[1],point:this.points[2]}})),this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedDistance:{dist:a.triangle.sideLengths[0],point:this.points[1]},fixedAngle:{angle:a.angles[1]*(this.reflected?-1:1),vertex:this.points[1],ref:this.points[2]}})),this.points[3].setCoord(this.points[3].applyConstraint(this.points[3].coord,{fixedDistance:{dist:a.triangle.sideLengths[2],point:this.points[2]}}))}}else if(a.type==="ASA"){a.sides[0]=c(a.sides[0]),a.angles[0]=b(a.angles[0]),a.sides[2]=c(a.sides[2]),a.ticks=[0,1,0],a.numArcs=[1,2,0];var d=KhanUtil.addInteractiveTriangle(a);d.points[0].constraints.fixedAngle={angle:a.angles[1]*(d.reflected?-1:1),vertex:d.points[1],ref:d.points[2]},d.setRotationPoint(1),d.setRotationPoint(2),d.points[3].constraints.fixedAngle={angle:a.angles[2]*(d.reflected?1:-1),vertex:d.points[2],ref:d.points[1]},d.points[0].onMove=function(a,b){return d.points[0].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.3&&d.snapCorrect(),d.update(),d.points[0].coord},d.points[3].onMove=function(a,b){return d.points[3].coord=[a,b],KhanUtil.distance(d.points[0].coord,d.points[3].coord)<.3&&d.snapCorrect(),d.update(),d.points[3].coord},d.snapCorrect=function(){this.points[0].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedDistance:{dist:a.triangle.sideLengths[0],point:this.points[1]}})),this.points[3].setCoord(this.points[3].applyConstraint(this.points[3].coord,{fixedDistance:{dist:a.triangle.sideLengths[2],point:this.points[2]}}))}}else if(a.type==="AAA"){var e=KhanUtil.random()<.5?1:KhanUtil.random()>.5?KhanUtil.random()*.4+1.2:KhanUtil.random()*.2+.6;a.sides[0]*=e,a.sides[1]*=e,a.sides[2]*=e,a.numArcs=[2,3,1];var d=KhanUtil.addInteractiveTriangle(a);d.isCongruent=e===1,d.points[0].visibleShape.remove(),d.points[0].mouseTarget.remove(),d.points[0].visible=!1,d.setRotationPoint(1),d.setRotationPoint(2),d.points[3].constraints.fixedAngle={angle:KhanUtil.findAngle(d.points[3].coord,d.points[1].coord,d.rotationPoint.coord),vertex:d.rotationPoint,ref:d.points[1]},d.points[3].onMove=function(b,c){var e=d.points[3].coord;d.points[3].coord=[b,c],d.points[0].setCoord([b,c]);var f=KhanUtil.distance([b,c],d.rotationPoint.coord)/d.radii[3];return d.points[1].setCoord(d.points[1].applyConstraint(d.points[1].coord,{fixedDistance:{dist:d.radii[1]*f,point:d.rotationPoint}})),d.points[2].setCoord(d.points[2].applyConstraint(d.points[2].coord,{fixedDistance:{dist:d.radii[2]*f,point:d.rotationPoint}})),Math.abs(KhanUtil.distance(d.points[0].coord,d.points[1].coord)-a.triangle.sideLengths[0])<.3?(d.snapCorrect(),d.isCongruent=!0):d.isCongruent=!1,d.update(),d.points[3].coord},d.snapCorrect=function(){this.points[3].setCoord(this.points[0].applyConstraint(this.points[0].coord,{fixedDistance:{dist:KhanUtil.distance(a.triangle.points[0],a.triangle.centroid),point:this.rotationPoint}})),this.points[0].setCoord(this.points[3].coord),this.points[1].setCoord(this.points[1].applyConstraint(this.points[1].coord,{fixedDistance:{dist:KhanUtil.distance(a.triangle.points[1],a.triangle.centroid),point:this.rotationPoint}})),this.points[2].setCoord(this.points[2].applyConstraint(this.points[2].coord,{fixedDistance:{dist:KhanUtil.distance(a.triangle.points[2],a.triangle.centroid),point:this.rotationPoint}}))}}KhanUtil.currentGraph.interactiveTriangle=d},addInteractiveTriangle:function(a){var b=jQuery.extend({points:[],lines:[],numArcs:a.numArcs,arcs:[],radii:[],reflected:!1,animating:!1,isCongruent:!0,isTriangle:!1},a);b.update=function(){if(!KhanUtil.dragging){if(Math.abs(b.points[0].coord[0]-b.points[3].coord[0])<.001&&Math.abs(b.points[0].coord[1]-b.points[3].coord[1])<.001)b.isTriangle=!0,b.rotationPoint.setCoord([1/3*(b.points[0].coord[0]+b.points[1].coord[0]+b.points[2].coord[0]),1/3*(b.points[0].coord[1]+b.points[1].coord[1]+b.points[2].coord[1])]);else{b.isTriangle=!1;var c=Math.min(b.points[0].coord[0],b.points[1].coord[0],b.points[2].coord[0],b.points[3].coord[0]),d=Math.max(b.points[0].coord[0],b.points[1].coord[0],b.points[2].coord[0],b.points[3].coord[0]),e=Math.min(b.points[0].coord[1],b.points[1].coord[1],b.points[2].coord[1],b.points[3].coord[1]),f=Math.max(b.points[0].coord[1],b.points[1].coord[1],b.points[2].coord[1],b.points[3].coord[1]);b.rotationPoint.setCoord([(d-c)/2+c,(f-e)/2+e])}for(var g=0;g<4;++g)b.radii[g]=KhanUtil.distance(b.points[g].coord,b.rotationPoint.coord),b.points[g].isRotationPoint&&(b.points[g].constraints.fixedDistance={dist:b.radii[g],point:b.rotationPoint})}KhanUtil.currentGraph.style({stroke:KhanUtil.BLUE,opacity:1,"stroke-width":2});for(var h=0;h<2;++h)jQuery(b.arcs[h]).each(function(){this.remove()}),b.arcs[h]=KhanUtil.drawArcs(b.points[h].coord,b.points[h+1].coord,b.points[h+2].coord,a.numArcs[h]);a.numArcs[2]&&(jQuery(b.arcs[2]).each(function(){this.remove()}),b.arcs[h]=KhanUtil.drawArcs(b.points[2].coord,b.points[3].coord,b.points[1].coord,a.numArcs[2])),jQuery(b.lines).each(function(){this.transform(!0),this.toFront()}),jQuery(b.points).each(function(){this.toFront()})},b.setRotationPoint=function(a){b.points[a].isRotationPoint=!0,b.points[a].normalStyle={fill:KhanUtil.BLUE,stroke:KhanUtil.BLUE,scale:1},b.points[a].highlightStyle={fill:KhanUtil.BLUE,stroke:KhanUtil.BLUE,scale:1.5},b.points[a].visibleShape.attr(b.points[a].normalStyle),b.points[a].constraints.fixedDistance={dist:b.radii[a],point:b.rotationPoint},b.points[a].onMove=function(c,d){var e=KhanUtil.findAngle([c,d],b.points[a].coord,b.rotationPoint.coord)*Math.PI/180;for(var f=0;f<4;++f)f!==a&&b.points[f].setCoord([(b.points[f].coord[0]-b.rotationPoint.coord[0])*Math.cos(e)-(b.points[f].coord[1]-b.rotationPoint.coord[1])*Math.sin(e)+b.rotationPoint.coord[0],(b.points[f].coord[0]-b.rotationPoint.coord[0])*Math.sin(e)+(b.points[f].coord[1]-b.rotationPoint.coord[1])*Math.cos(e)+b.rotationPoint.coord[1]]);b.points[a].coord=[c,d],b.update()}},jQuery(".question").prepend('<button id="reflect">Reflect shape</button>'),jQuery("button#reflect").bind("click",function(a){this.blur();if(!b.animating){b.animating=!0;var c=jQuery.map(b.points,function(a){return[a.coord.slice()]}),d=Math.min.apply(Math,jQuery.map(c,function(a){return a[0]})),e=Math.max.apply(Math,jQuery.map(c,function(a){return a[0]})),f=(d+e)/2,g=jQuery.map(b.points,function(a){return[[f-a.coord[0]+f,a.coord[1]]]});jQuery(b.points).each(function(a,b){typeof b.constraints.fixedAngle.angle=="number"&&(b.constraints.fixedAngle.angle*=-1)}),b.reflected=!b.reflected,jQuery(b.arcs[0]).each(function(){this.remove()}),jQuery(b.arcs[1]).each(function(){this.remove()}),jQuery(b.arcs[2]).each(function(){this.remove()});var h={0:c[0][0],1:c[1][0],2:c[2][0],3:c[3][0]};jQuery(h).animate({0:g[0][0],1:g[1][0],2:g[2][0],3:g[3][0]},{duration:500,easing:"linear",step:function(a,c){jQuery(b.points).each(function(a){this.setCoord([h[a],g[a][1]])}),jQuery(b.lines).each(function(){this.transform(!0)})},complete:function(){jQuery(b.points).each(function(a){this.setCoord(g[a])}),b.update(),b.animating=!1}})}});var c=a.angles.slice();a.reflected||jQuery(c).each(function(a){c[a]*=-1});var d=[0,0];b.points.push(KhanUtil.addMovablePoint({coord:d})),d[0]+=a.sides[0]*Math.cos(c[0]*Math.PI/180),d[1]+=a.sides[0]*Math.sin(c[0]*Math.PI/180),b.points.push(KhanUtil.addMovablePoint({coord:d})),d[0]+=a.sides[1]*Math.cos(-(180-c[1]-c[0])*Math.PI/180),d[1]+=a.sides[1]*Math.sin(-(180-c[1]-c[0])*Math.PI/180),b.points.push(KhanUtil.addMovablePoint({coord:d})),d[0]+=a.sides[2]*Math.cos((c[2]+c[1]+c[0])*Math.PI/180),d[1]+=a.sides[2]*Math.sin((c[2]+c[1]+c[0])*Math.PI/180),b.points.push(KhanUtil.addMovablePoint({coord:d})),b.lines.push(KhanUtil.addMovableLineSegment({pointA:b.points[0],pointZ:b.points[1],ticks:a.ticks[0],highlightStyle:{stroke:KhanUtil.BLUE,"stroke-width":4}})),b.lines.push(KhanUtil.addMovableLineSegment({pointA:b.points[1],pointZ:b.points[2],ticks:a.ticks[1],highlightStyle:{stroke:KhanUtil.BLUE,"stroke-width":4}})),b.lines.push(KhanUtil.addMovableLineSegment({pointA:b.points[2],pointZ:b.points[3],ticks:a.ticks[2],highlightStyle:{stroke:KhanUtil.BLUE,"stroke-width":4}})),b.rotationPoint=KhanUtil.addMovablePoint({visible:!1});var e=4-Math.max(b.points[0].coord[0],b.points[1].coord[0],b.points[2].coord[0],b.points[3].coord[0]),f=4-Math.max(b.points[0].coord[1],b.points[1].coord[1],b.points[2].coord[1],b.points[3].coord[1]);jQuery(b.points).each(function(){this.setCoord([this.coord[0]+e,this.coord[1]+f])});for(var g=0;g<3;++g)b.lines[g].onMove=function(a,c){jQuery(b.points).each(function(){this.setCoord([this.coord[0]+a,this.coord[1]+c])}),b.update()},b.lines[g].onMoveEnd=function(){b.update()};for(var h=0;h<4;++h)b.points[h].onMoveEnd=function(a,c){b.update()};return b.update(),b},addTriangleDecorations:function(a,b){var c=[0,0,0],d=[0,0,0];b==="SSS"?c=[1,2,3]:b==="SSA"?(d=[0,0,1],c=[1,2,0]):b==="SAS"?(d=[0,1,0],c=[1,2,0]):b==="SAA"?(d=[0,1,2],c=[1,0,0]):b==="ASA"?(d=[0,1,2],c=[0,1,0]):b==="AAA"&&(d=[1,2,3]),KhanUtil.addMovableLineSegment({coordA:a.points[0],coordZ:a.points[1],fixed:!0,ticks:c[0],normalStyle:{stroke:"#b1c9f5","stroke-width":2}}),KhanUtil.addMovableLineSegment({coordA:a.points[1],coordZ:a.points[2],fixed:!0,ticks:c[1],normalStyle:{stroke:"#b1c9f5","stroke-width":2}}),KhanUtil.addMovableLineSegment({coordA:a.points[2],coordZ:a.points[0],fixed:!0,ticks:c[2],normalStyle:{stroke:"#b1c9f5","stroke-width":2}}),KhanUtil.drawArcs(a.points[2],a.points[0],a.points[1],d[0]),KhanUtil.drawArcs(a.points[0],a.points[1],a.points[2],d[1]),KhanUtil.drawArcs(a.points[1],a.points[2],a.points[0],d[2]),jQuery(a.set).each(function(){this.toBack()})}}),jQuery.extend(Khan.answerTypes,{congruence:function(a,b,c,d,e){jQuery(a).append(jQuery(b).clone().contents().tmpl());var f=a.find(".answer").text();return a.find(".answer").empty(),ret=function(){var b=KhanUtil.currentGraph.interactiveTriangle,c=a.find("input:checked").val();return ret.guess=[c,b.points[0].coord,b.points[1].coord,b.points[2].coord,b.points[3].coord],c===undefined?(ret.guess="",!1):c!==f?!1:b.isTriangle?f==="No"&&b.isCongruent?"Your answer is almost correct, but the two triangles are congruent. Prove your answer by trying to construct an incongruent triangle.":!0:"Your answer is almost correct, but you haven't constructed a triangle."},ret.examples=["the shapes to the left are part of your answer"],ret.solution=f,ret.showGuess=function(b){var c=KhanUtil.currentGraph.interactiveTriangle;a.find("input:checked").prop("checked",!1),a.find("input[value="+b[0]+"]").prop("checked",!0),c.points[0].setCoord(b[1]),c.points[1].setCoord(b[2]),c.points[2].setCoord(b[3]),c.points[3].setCoord(b[4]),c.update()},ret}}),jQuery.extend(KhanUtil,{trigFunc:{csc:{name:"csc",print:function(a){return KhanUtil.trigFunc.sec.print(90-a)},convertsTo:["sin"],convertTo:function(a,b){if(a.name=="sin"){var c=KhanUtil.trigFunc.csc.print(b),d=KhanUtil.trigFunc.sin.print(b),e=[];return e.push("\\csc x = \\frac{1}{\\sin x}"),e.push("\\csc x = "+c),e.push("\\frac{1}{\\sin x} = "+c),e.push("\\sin x = "+d),e}}},sec:{name:"sec",print:function(a){return a==0?1:a==30?"\\frac{2}{\\sqrt 3}":a==45?"\\sqrt 2":a==60?"2":a==90?"undefined":"undef"},convertsTo:["cos","tan"],convertTo:function(a,b){if(a.name=="cos"){var c=KhanUtil.trigFunc.cos.print(b),d=KhanUtil.trigFunc.sec.print(b),e=[];return e.push("\\sec x = \\frac{1}{\\cos x}"),e.push("\\sec x = "+d),e.push("\\frac{1}{\\cos x} = "+d),e.push("\\cos x = "+c),e}if(a.name=="tan"){var f=KhanUtil.trigFunc.tan.print(b),d=KhanUtil.trigFunc.sec.print(b),e=[];return e.push("\\sin^2 x + \\cos^2 x = 1"),e.push("\\frac{\\sin^2 x}{\\cos^2 x} + \\frac{\\cos^2 x}{\\cos^2 x} = \\frac{1}{\\cos^2 x}"),e.push("\\tan^2 x + 1 = \\sec^2 x"),e.push("\\tan^2 x + 1 = ("+d+")^2"),e.push("\\tan^2 x = ("+d+")^2 - 1"),e.push("\\tan x = \\sqrt { "+d+"  ^2 - 1 }"),e.push("\\tan x = "+f),e}}},tan:{name:"tan",print:function(a){return a==0?0:a==30?"\\frac{1}{\\sqrt 3}":a==45?"1":a==60?"\\sqrt 3":a==90?"undefined":"undef"},convertsTo:["sec"],convertTo:function(a,b){if(a.name=="sec"){var c=KhanUtil.trigFunc.tan.print(b),d=KhanUtil.trigFunc.sec.print(b),e=[];return e.push("\\sin^2 x + \\cos^2 x = 1"),e.push("\\frac{\\sin^2 x}{\\cos^2 x} + \\frac{\\cos^2 x}{\\cos^2 x} = \\frac{1}{\\cos^2 x}"),e.push("\\tan^2 x + 1 = \\sec^2 x"),e.push("("+c+")^2 + 1 = \\sec^2 x"),e.push("\\sqrt{("+c+")^2 + 1} = \\sec x"),e.push(d+" = \\sec x"),e}}},cos:{name:"cos",print:function(a){return KhanUtil.trigFunc.sin.print(90-a)},convertsTo:["sin","sec"],convertTo:function(a,b){if(a.name=="sin"){var c=KhanUtil.trigFunc.cos.print(b),d=KhanUtil.trigFunc.sin.print(b),e=[];return e.push("\\sin^2 x + \\cos^2 x = 1"),e.push("\\sin^2 x + ("+c+")^2 = 1"),e.push("("+c+")^2 = 1 - \\sin^2 x"),e.push("("+c+")^2 - 1 = - \\sin^2 x"),e.push("-("+c+")^2 + 1 = \\sin^2 x"),e.push(d+" = \\sin x"),e}if(a.name=="sec")return c=KhanUtil.trigFunc.cos.print(b),secv=KhanUtil.trigFunc.sec.print(b),e=new Array,e.push(c+" = \\cos x"),e.push(secv+" = \\frac{1}{\\cos x}"),e.push(secv+" = \\sec x"),e}},sin:{name:"sin",print:function(a){return a==0?0:a==30?"\\frac{1}{2}":a==45?"\\frac{\\sqrt 2}{2}":a==60?"\\frac{\\sqrt 3}{2}":a==90?"1":"undefined"},convertsTo:["cos","csc"],convertTo:function(a,b){if(a.name=="cos"){var c=KhanUtil.trigFunc.sin.print(b),d=KhanUtil.trigFunc.cos.print(b),e=[];return e.push("\\sin^2 x + \\cos^2 x = 1"),e.push("("+c+")^2 + \\cos^2 x = 1"),e.push("("+c+")^2 = 1- \\cos^2 x "),e.push("("+c+")^2 - 1 = - \\cos^2 x "),e.push("-("+c+")^2 + 1 = \\cos^2 x "),e.push(d+" =  \\cos x"),e}if(a.name=="csc"){var c=KhanUtil.trigFunc.sin.print(b),f=KhanUtil.trigFunc.csc.print(b),e=[];return e.push(c+" = \\sin x"),e.push(f+" = \\frac{1}{\\sin x}"),e.push(f+" = \\csc x"),e}}}}}),jQuery.extend(KhanUtil,{trigTypes:[KhanUtil.trigFunc.sin,KhanUtil.trigFunc.cos,KhanUtil.trigFunc.tan,KhanUtil.trigFunc.csc,KhanUtil.trigFunc.sec],findSteps:function(a,b,c){var d={},e=[],f=a;while(f.name!=b.name)f.convertsTo&&$.each(f.convertsTo,function(a,b){if(!(b in d)){var c=KhanUtil.trigFunc[b];c.parent=f,e.push(c)}d[b]=!0}),f=e.shift();var g=f,h=[];while(g.name!=a.name)h.unshift(g.name),g=g.parent;h.unshift(g.name);var i=[];for(var j=0;j<h.length-1;j++){var k=KhanUtil.trigFunc[h[j]].convertTo(KhanUtil.trigFunc[h[j+1]],c);delete k.parent,i.push(k)}for(j=0;j<KhanUtil.trigTypes.length-1;j++)delete KhanUtil.trigTypes[j].parent;return i}}),Array.prototype.map||(Array.prototype.map=function(a,b){var c,d,e;if(this==null)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if({}.toString.call(a)!="[object Function]")throw new TypeError(a+" is not a function");b&&(c=b),d=new Array(g),e=0;while(e<g){var h,i;e in f&&(h=f[e],i=a.call(c,h,e,f),d[e]=i),e++}return d}),function(){function e(a){var b=-1,c=a.length,d=[];while(++b<c)d.push(a[b]);return d}function f(a){return Array.prototype.slice.call(a)}function i(){return this}function j(a){return a.length}function k(a){return a==null}function l(a){return a.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function n(a){var b={},c=[];return b.add=function(a){for(var d=0;d<c.length;d++)if(c[d].listener==a)return b;return c.push({listener:a,on:!0}),b},b.remove=function(a){for(var d=0;d<c.length;d++){var e=c[d];if(e.listener==a){e.on=!1,c=c.slice(0,d).concat(c.slice(d+1));break}}return b},b.dispatch=function(){var a=c;for(var b=0,d=a.length;b<d;b++){var e=a[b];e.on&&e.listener.apply(this,arguments)}},b}function q(a){return a+""}function r(a){var b=a.lastIndexOf("."),c=b>=0?a.substring(b):(b=a.length,""),d=[];while(b>0)d.push(a.substring(b-=3,b+3));return d.reverse().join(",")+c}function w(a){return function(b){return b<=0?0:b>=1?1:a(b)}}function x(a){return function(b){return 1-a(1-b)}}function y(a){return function(b){return.5*(b<.5?a(2*b):2-a(2-2*b))}}function z(a){return a}function A(a){return function(b){return Math.pow(b,a)}}function B(a){return 1-Math.cos(a*Math.PI/2)}function C(a){return Math.pow(2,10*(a-1))}function D(a){return 1-Math.sqrt(1-a*a)}function E(a,b){var c;return arguments.length<2&&(b=.45),arguments.length<1?(a=1,c=b/4):c=b/(2*Math.PI)*Math.asin(1/a),function(d){return 1+a*Math.pow(2,10*-d)*Math.sin((d-c)*2*Math.PI/b)}}function F(a){return a||(a=1.70158),function(b){return b*b*((a+1)*b-a)}}function G(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function J(a){return a in I||/\bcolor\b/.test(a)?d3.interpolateRgb:d3.interpolate}function K(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return(c-a)*b}}function L(a,b){return b=b-(a=+a)?1/(b-a):0,function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function M(a,b,c){return new N(a,b,c)}function N(a,b,c){this.r=a,this.g=b,this.b=c}function O(a){return a<16?"0"+a.toString(16):a.toString(16)}function P(a,b,c){var d=0,e=0,f=0,g,h,i;g=/([a-z]+)\((.*)\)/i.exec(a);if(g){h=g[2].split(",");switch(g[1]){case"hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case"rgb":return b(R(h[0]),R(h[1]),R(h[2]))}}return(i=S[a])?b(i.r,i.g,i.b):(a!=null&&a.charAt(0)==="#"&&(a.length===4?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):a.length===7&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),f=parseInt(f,16)),b(d,e,f))}function Q(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),f=e-d,g,h,i=(e+d)/2;return f?(h=i<.5?f/(e+d):f/(2-e-d),a==e?g=(b-c)/f+(b<c?6:0):b==e?g=(c-a)/f+2:g=(a-b)/f+4,g*=60):h=g=0,U(g,h,i)}function R(a){var b=parseFloat(a);return a.charAt(a.length-1)==="%"?Math.round(b*2.55):b}function U(a,b,c){return new V(a,b,c)}function V(a,b,c){this.h=a,this.s=b,this.l=c}function W(a,b,c){function f(a){return a>360?a-=360:a<0&&(a+=360),a<60?d+(e-d)*a/60:a<180?e:a<240?d+(e-d)*(240-a)/60:d}function g(a){return Math.round(f(a)*255)}var d,e;return a%=360,a<0&&(a+=360),b=b<0?0:b>1?1:b,c=c<0?0:c>1?1:c,e=c<=.5?c*(1+b):c+b-c*b,d=2*c-e,M(g(a+120),g(a),g(a-120))}function X(a){return h(a,$),a}function _(a){return function(){return Y(a,this)}}function ab(a){return function(){return Z(a,this)}}function bb
(a){return{__data__:a}}function cb(a){return h(a,db),a}function eb(a){return arguments.length||(a=d3.ascending),function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function gb(a,b){h(a,ib);var c={},d=d3.dispatch("start","end"),e=lb,f=Date.now();return a.id=b,a.tween=function(b,d){return arguments.length<2?c[b]:(d==null?delete c[b]:c[b]=d,a)},a.ease=function(b){return arguments.length?(e=typeof b=="function"?b:d3.ease.apply(d3,arguments),a):e},a.each=function(b,c){return arguments.length<2?mb.call(a,b):(d[b].add(c),a)},d3.timer(function(g){return a.each(function(h,i,j){function p(a){if(o.active>b)return r();o.active=b;for(var e in c)(e=c[e].call(l,h,i))&&k.push(e);return d.start.dispatch.call(l,h,i),q(a)||d3.timer(q,0,f),1}function q(a){if(o.active!==b)return r();var c=(a-m)/n,f=e(c),g=k.length;while(g>0)k[--g].call(l,f);if(c>=1)return r(),kb=b,d.end.dispatch.call(l,h,i),kb=0,1}function r(){return--o.count||delete l.__transition__,1}var k=[],l=this,m=a[j][i].delay,n=a[j][i].duration,o=l.__transition__||(l.__transition__={active:0,count:0});++o.count,m<=g?p(g):d3.timer(p,m,f)}),1},0,f),a}function hb(a){return typeof a=="function"?function(b,c,d){var e=a.call(this,b,c)+"";return d!=e&&d3.interpolate(d,e)}:(a+="",function(b,c,d){return d!=a&&d3.interpolate(d,a)})}function mb(a){for(var b=0,c=this.length;b<c;b++)for(var d=this[b],e=0,f=d.length;e<f;e++){var g=d[e];g&&a.call(g=g.node,g.__data__,e,b)}return this}function qb(){var a,b=Date.now(),c=nb;while(c)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),c=c.next;var d=rb()-b;d>24?(isFinite(d)&&(clearTimeout(pb),pb=setTimeout(qb,d)),ob=0):(ob=1,sb(qb))}function rb(){var a=null,b=nb,c=Infinity;while(b)b.flush?b=a?a.next=b.next:nb=b.next:(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function tb(){}function ub(a){var b=a[0],c=a[a.length-1];return b<c?[b,c]:[c,b]}function vb(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],g;return f<e&&(g=c,c=d,d=g,g=e,e=f,f=g),b=b(f-e),a[c]=b.floor(e),a[d]=b.ceil(f),a}function wb(){return Math}function xb(a,b,c,d){function g(){var g=a.length==2?Db:Eb,i=d?L:K;return e=g(a,b,i,c),f=g(b,a,i,d3.interpolate),h}function h(a){return e(a)}var e,f;return h.invert=function(a){return f(a)},h.domain=function(b){return arguments.length?(a=b.map(Number),g()):a},h.range=function(a){return arguments.length?(b=a,g()):b},h.rangeRound=function(a){return h.range(a).interpolate(d3.interpolateRound)},h.clamp=function(a){return arguments.length?(d=a,g()):d},h.interpolate=function(a){return arguments.length?(c=a,g()):c},h.ticks=function(b){return Bb(a,b)},h.tickFormat=function(b){return Cb(a,b)},h.nice=function(){return vb(a,zb),g()},h.copy=function(){return xb(a,b,c,d)},g()}function yb(a,b){return a.range=d3.rebind(a,b.range),a.rangeRound=d3.rebind(a,b.rangeRound),a.interpolate=d3.rebind(a,b.interpolate),a.clamp=d3.rebind(a,b.clamp),a}function zb(a){return a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1),{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function Ab(a,b){var c=ub(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),f=b/d*e;return f<=.15?e*=10:f<=.35?e*=5:f<=.75&&(e*=2),c[0]=Math.ceil(c[0]/e)*e,c[1]=Math.floor(c[1]/e)*e+e*.5,c[2]=e,c}function Bb(a,b){return d3.range.apply(d3,Ab(a,b))}function Cb(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Ab(a,b)[2])/Math.LN10+.01))+"f")}function Db(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],b[1]);return function(a){return f(e(a))}}function Eb(a,b,c,d){var e=[],f=[],g=0,h=a.length;while(++g<h)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=d3.bisect(a,b,1,a.length-1)-1;return f[c](e[c](b))}}function Fb(a,b){function d(c){return a(b(c))}var c=b.pow;return d.invert=function(b){return c(a.invert(b))},d.domain=function(e){return arguments.length?(b=e[0]<0?Ib:Hb,c=b.pow,a.domain(e.map(b)),d):a.domain().map(c)},d.nice=function(){return a.domain(vb(a.domain(),wb)),d},d.ticks=function(){var d=ub(a.domain()),e=[];if(d.every(isFinite)){var f=Math.floor(d[0]),g=Math.ceil(d[1]),h=Math.round(c(d[0])),i=Math.round(c(d[1]));if(b===Ib){e.push(c(f));for(;f++<g;)for(var j=9;j>0;j--)e.push(c(f)*j)}else{for(;f<g;f++)for(var j=1;j<10;j++)e.push(c(f)*j);e.push(c(f))}for(f=0;e[f]<h;f++);for(g=e.length;e[g-1]>i;g--);e=e.slice(f,g)}return e},d.tickFormat=function(a,e){arguments.length<2&&(e=Gb);if(arguments.length<1)return e;var f=a/d.ticks().length,g=b===Ib?(h=-1e-15,Math.floor):(h=1e-15,Math.ceil),h;return function(a){return a/c(g(b(a)+h))<f?e(a):""}},d.copy=function(){return Fb(a.copy(),b)},yb(d,a)}function Hb(a){return Math.log(a)/Math.LN10}function Ib(a){return-Math.log(-a)/Math.LN10}function Jb(a,b){function e(b){return a(c(b))}var c=Kb(b),d=Kb(1/b);return e.invert=function(b){return d(a.invert(b))},e.domain=function(b){return arguments.length?(a.domain(b.map(c)),e):a.domain().map(d)},e.ticks=function(a){return Bb(e.domain(),a)},e.tickFormat=function(a){return Cb(e.domain(),a)},e.nice=function(){return e.domain(vb(e.domain(),zb))},e.exponent=function(a){if(!arguments.length)return b;var f=e.domain();return c=Kb(b=a),d=Kb(1/b),e.domain(f)},e.copy=function(){return Jb(a.copy(),b)},yb(e,a)}function Kb(a){return function(b){return b<0?-Math.pow(-b,a):Math.pow(b,a)}}function Lb(a,b){function f(b){return d[((c[b]||(c[b]=a.push(b)))-1)%d.length]}var c,d,e;return f.domain=function(d){if(!arguments.length)return a;a=[],c={};var e=-1,g=d.length,h;while(++e<g)c[h=d[e]]||(c[h]=a.push(h));return f[b.t](b.x,b.p)},f.range=function(a){return arguments.length?(d=a,e=0,b={t:"range",x:a},f):d},f.rangePoints=function(c,g){arguments.length<2&&(g=0);var h=c[0],i=c[1],j=(i-h)/(a.length-1+g);return d=a.length<2?[(h+i)/2]:d3.range(h+j*g/2,i+j/2,j),e=0,b={t:"rangePoints",x:c,p:g},f},f.rangeBands=function(c,g){arguments.length<2&&(g=0);var h=c[0],i=c[1],j=(i-h)/(a.length+g);return d=d3.range(h+j*g,i,j),e=j*(1-g),b={t:"rangeBands",x:c,p:g},f},f.rangeRoundBands=function(c,g){arguments.length<2&&(g=0);var h=c[0],i=c[1],j=Math.floor((i-h)/(a.length+g)),k=i-h-(a.length-g)*j;return d=d3.range(h+Math.round(k/2),i,j),e=Math.round(j*(1-g)),b={t:"rangeRoundBands",x:c,p:g},f},f.rangeBand=function(){return e},f.copy=function(){return Lb(a,b)},f.domain(a)}function Qb(a,b){function d(){var d=0,f=a.length,g=b.length;c=[];while(++d<g)c[d-1]=d3.quantile(a,d/g);return e}function e(a){return isNaN(a=+a)?NaN:b[d3.bisect(c,a)]}var c;return e.domain=function(b){return arguments.length?(a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending),d()):a},e.range=function(a){return arguments.length?(b=a,d()):b},e.quantiles=function(){return c},e.copy=function(){return Qb(a,b)},d()}function Rb(a,b,c){function f(b){return c[Math.max(0,Math.min(e,Math.floor(d*(b-a))))]}function g(){return d=c.length/(b-a),e=c.length-1,f}var d,e;return f.domain=function(c){return arguments.length?(a=+c[0],b=+c[c.length-1],g()):[a,b]},f.range=function(a){return arguments.length?(c=a,g()):c},f.copy=function(){return Rb(a,b,c)},g()}function Ub(a){return a.innerRadius}function Vb(a){return a.outerRadius}function Wb(a){return a.startAngle}function Xb(a){return a.endAngle}function Yb(a){function g(d){return d.length<1?null:"M"+e(a(Zb(this,d,b,c)),f)}var b=$b,c=_b,d="linear",e=ac[d],f=.7;return g.x=function(a){return arguments.length?(b=a,g):b},g.y=function(a){return arguments.length?(c=a,g):c},g.interpolate=function(a){return arguments.length?(e=ac[d=a],g):d},g.tension=function(a){return arguments.length?(f=a,g):f},g}function Zb(a,b,c,d){var e=[],f=-1,g=b.length,h=typeof c=="function",i=typeof d=="function",j;if(h&&i)while(++f<g)e.push([c.call(a,j=b[f],f),d.call(a,j,f)]);else if(h)while(++f<g)e.push([c.call(a,b[f],f),d]);else if(i)while(++f<g)e.push([c,d.call(a,b[f],f)]);else while(++f<g)e.push([c,d]);return e}function $b(a){return a[0]}function _b(a){return a[1]}function bc(a){var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];while(++b<c)e.push("L",(d=a[b])[0],",",d[1]);return e.join("")}function cc(a){var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];while(++b<c)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function dc(a){var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];while(++b<c)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function ec(a,b){return a.length<4?bc(a):a[1]+hc(a.slice(1,a.length-1),ic(a,b))}function fc(a,b){return a.length<3?bc(a):a[0]+hc((a.push(a[0]),a),ic([a[a.length-2]].concat(a,[a[1]]),b))}function gc(a,b,c){return a.length<3?bc(a):a[0]+hc(a,ic(a,b))}function hc(a,b){if(b.length<1||a.length!=b.length&&a.length!=b.length+2)return bc(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],h=g,i=1;c&&(d+="Q"+(f[0]-g[0]*2/3)+","+(f[1]-g[1]*2/3)+","+f[0]+","+f[1],e=a[1],i=2);if(b.length>1){h=b[1],f=a[i],i++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1];for(var j=2;j<b.length;j++,i++)f=a[i],h=b[j],d+="S"+(f[0]-h[0])+","+(f[1]-h[1])+","+f[0]+","+f[1]}if(c){var k=a[i];d+="Q"+(f[0]+h[0]*2/3)+","+(f[1]+h[1]*2/3)+","+k[0]+","+k[1]}return d}function ic(a,b){var c=[],d=(1-b)/2,e,f=a[0],g=a[1],h=1,i=a.length;while(++h<i)e=f,f=g,g=a[h],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);return c}function jc(a){if(a.length<3)return bc(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],h=[f,f,f,d[1]],i=[e,",",f];rc(i,g,h);while(++b<c)d=a[b],g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),rc(i,g,h);b=-1;while(++b<2)g.shift(),g.push(d[0]),h.shift(),h.push(d[1]),rc(i,g,h);return i.join("")}function kc(a){if(a.length<4)return bc(a);var b=[],c=-1,d=a.length,e,f=[0],g=[0];while(++c<3)e=a[c],f.push(e[0]),g.push(e[1]);b.push(nc(qc,f)+","+nc(qc,g)),--c;while(++c<d)e=a[c],f.shift(),f.push(e[0]),g.shift(),g.push(e[1]),rc(b,f,g);return b.join("")}function lc(a){var b,c=-1,d=a.length,e=d+4,f,g=[],h=[];while(++c<4)f=a[c%d],g.push(f[0]),h.push(f[1]);b=[nc(qc,g),",",nc(qc,h)],--c;while(++c<e)f=a[c%d],g.shift(),g.push(f[0]),h.shift(),h.push(f[1]),rc(b,g,h);return b.join("")}function mc(a,b){var c=a.length-1,d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,h=-1,i,j;while(++h<=c)i=a[h],j=h/c,i[0]=b*i[0]+(1-b)*(d+j*f),i[1]=b*i[1]+(1-b)*(e+j*g);return jc(a)}function nc(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function rc(a,b,c){a.push("C",nc(oc,b),",",nc(oc,c),",",nc(pc,b),",",nc(pc,c),",",nc(qc,b),",",nc(qc,c))}function sc(a,b){return(b[1]-a[1])/(b[0]-a[0])}function tc(a){var b=0,c=a.length-1,d=[],e=a[0],f=a[1],g=d[0]=sc(e,f);while(++b<c)d[b]=g+(g=sc(e=f,f=a[b+1]));return d[b]=g,d}function uc(a){var b=[],c,d,e,f,g=tc(a),h=-1,i=a.length-1;while(++h<i)c=sc(a[h],a[h+1]),Math.abs(c)<1e-6?g[h]=g[h+1]=0:(d=g[h]/c,e=g[h+1]/c,f=d*d+e*e,f>9&&(f=c*3/Math.sqrt(f),g[h]=f*d,g[h+1]=f*e));h=-1;while(++h<=i)f=(a[Math.min(i,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+g[h]*g[h])),b.push([f||0,g[h]*f||0]);return b}function vc(a){return a.length<3?bc(a):a[0]+hc(a,uc(a))}function wc(a){var b,c=-1,d=a.length,e,f;while(++c<d)b=a[c],e=b[0],f=b[1]+Sb,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function xc(a){function i(f){if(f.length<1)return null;var i=Zb(this,f,b,d),j=Zb(this,f,b===c?yc(i):c,d===e?zc(i):e);return"M"+g(a(j),h)+"L"+g(a(i.reverse()),h)+"Z"}var b=$b,c=$b,d=0,e=_b,f="linear",g=ac[f],h=.7;return i.x=function(a){return arguments.length?(b=c=a,i):c},i.x0=function(a){return arguments.length?(b=a,i):b},i.x1=function(a){return arguments.length?(c=a,i):c},i.y=function(a){return arguments.length?(d=e=a,i):e},i.y0=function(a){return arguments.length?(d=a,i):d},i.y1=function(a){return arguments.length?(e=a,i):e},i.interpolate=function(a){return arguments.length?(g=ac[f=a],i):f},i.tension=function(a){return arguments.length?(h=a,i):h},i}function yc(a){return function(b,c){return a[c][0]}}function zc(a){return function(b,c){return a[c][1]}}function Ac(a){return a.source}function Bc(a){return a.target}function Cc(a){return a.radius}function Dc(a){return a.startAngle}function Ec(a){return a.endAngle}function Fc(a){return[a.x,a.y]}function Gc(a){return function(){var b=a.apply(this,arguments),c=b[0],d=b[1]+Sb;return[c*Math.cos(d),c*Math.sin(d)]}}function Ic(a,b){var c=(a.ownerSVGElement||a).createSVGPoint();if(Hc<0&&(window.scrollX||window.scrollY)){var d=d3.select(document.body).append("svg:svg").style("position","absolute").style("top",0).style("left",0),e=d[0][0].getScreenCTM();Hc=!e.f&&!e.e,d.remove()}return Hc?(c.x=b.pageX,c.y=b.pageY):(c.x=b.clientX,c.y=b.clientY),c=c.matrixTransform(a.getScreenCTM().inverse()),[c.x,c.y]}function Jc(){return 64}function Kc(){return"circle"}function Oc(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Pc(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Qc(a,b,c){e=[];if(c&&b.length>1){var d=ub(a.domain()),e,f=-1,g=b.length,h=(b[1]-b[0])/++c,i,j;while(++f<g)for(i=c;--i>0;)(j=+b[f]-i*h)>=d[0]&&e.push(j);for(--f,i=0;++i<c&&(j=+b[f]+i*h)<d[1];)e.push(j)}return e}function Yc(a){var b=d3.event,c=Tc.parentNode,d=0,e=0;c&&(c=Zc(c),d=c[0]-Vc[0],e=c[1]-Vc[1],Vc=c,Wc|=d|e);try{d3.event={dx:d,dy:e},Rc[a].dispatch.apply(Tc,Uc)}finally{d3.event=b}b.preventDefault()}function Zc(a){return d3.event.touches?d3.svg.touches(a)[0]:d3.svg.mouse(a)}function $c(){if(!Tc)return;var a=Tc.parentNode;if(!a)return _c();Yc("drag"),bd()}function _c(){if(!Tc)return;Yc("dragend"),Tc=null,Wc&&Sc===d3.event.target&&(Xc=!0,bd())}function ad(){Xc&&Sc===d3.event.target&&(bd(),Xc=!1,Sc=null)}function bd(){d3.event.stopPropagation(),d3.event.preventDefault()}function od(a){return[a[0]-hd[0],a[1]-hd[1],hd[2]]}function pd(){cd||(cd=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a=d3.event,b;try{cd.scrollTop=1e3,cd.dispatchEvent(a),b=1e3-cd.scrollTop}catch(c){b=a.wheelDelta||-a.detail*5}return b*.005}function qd(){var a=d3.svg.touches(kd),b=-1,c=a.length,d;while(++b<c)fd[(d=a[b]).identifier]=od(d);return a}function rd(){var a=d3.svg.touches(kd);switch(a.length){case 1:var b=a[0];vd(hd[2],b,fd[b.identifier]);break;case 2:var c=a[0],d=a[1],e=[(c[0]+d[0])/2,(c[1]+d[1])/2],f=fd[c.identifier],g=fd[d.identifier],h=[(f[0]+g[0])/2,(f[1]+g[1])/2,f[2]];vd(Math.log(d3.event.scale)/Math.LN2+f[2],e,h)}}function sd(){ed=null,dd&&(md=!0,vd(hd[2],d3.svg.mouse(kd),dd))}function td(){dd&&(md&&jd===d3.event.target&&(nd=!0),sd(),dd=null)}function ud(){nd&&jd===d3.event.target&&(d3.event.stopPropagation(),d3.event.preventDefault(),nd=!1,jd=null)}function vd(a,b,c){function i(a,b){var c=a.__domain||(a.__domain=a.domain()),d=a.range().map(function(a){return(a-b)/h});a.domain(c).domain(d.map(a.invert))}var d=Math.pow(2,(hd[2]=a)-c[2]),e=hd[0]=b[0]-d*c[0],f=hd[1]=b[1]-d*c[1],g=d3.event,h=Math.pow(2,a);d3.event={scale:h,translate:[e,f],transform:function(a,b){a&&i(a,e),b&&i(b,f)}};try{id.apply(kd,ld)}finally{d3.event=g}g.preventDefault()}Date.now||(Date.now=function(){return+(new Date)});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(a){var b=CSSStyleDeclaration.prototype,c=b.setProperty;b.setProperty=function(a,b,d){c.call(this,a,b+"",d)}}d3={version:"2.3.0"};var d=f;try{d(document.documentElement.childNodes)[0].nodeType}catch(g){d=e}var h=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};d3.functor=function(a){return typeof a=="function"?a:function(){return a}},d3.rebind=function(a,b){return function(){var c=b.apply(a,arguments);return arguments.length?a:c}},d3.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN},d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN},d3.min=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){while(++c<d&&((e=a[c])==null||e!=e))e=undefined;while(++c<d)(f=a[c])!=null&&e>f&&(e=f)}else{while(++c<d&&((e=b.call(a,a[c],c))==null||e!=e))e=undefined;while(++c<d)(f=b.call(a,a[c],c))!=null&&e>f&&(e=f)}return e},d3.max=function(a,b){var c=-1,d=a.length,e,f;if(arguments.length===1){while(++c<d&&((e=a[c])==null||e!=e))e=undefined;while(++c<d)(f=a[c])!=null&&f>e&&(e=f)}else{while(++c<d&&((e=b.call(a,a[c],c))==null||e!=e))e=undefined;while(++c<d)(f=b.call(a,a[c],c))!=null&&f>e&&(e=f)}return e},d3.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(arguments.length===1)while(++f<d)isNaN(e=+a[f])||(c+=e);else while(++f<d)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c},d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=a[d-1],f=c-d;return f?e+f*(a[d]-e):e},d3.zip=function(){if(!(e=arguments.length))return[];for(var a=-1,b=d3.min(arguments,j),c=new Array(b);++a<b;)for(var d=-1,e,f=c[a]=new Array(e);++d<e;)f[d]=arguments[d][a];return c},d3.bisectLeft=function(a,b,c,d){arguments.length<3&&(c=0),arguments.length<4&&(d=a.length);while(c<d){var e=c+d>>1;a[e]<b?c=e+1:d=e}return c},d3.bisect=d3.bisectRight=function(a,b,c,d){arguments.length<3&&(c=0),arguments.length<4&&(d=a.length);while(c<d){var e=c+d>>1;b<a[e]?d=e:c=e+1}return c},d3.first=function(a,b){var c=0,d=a.length,e=a[0],f;arguments.length===1&&(b=d3.ascending);while(++c<d)b.call(a,e,f=a[c])>0&&(e=f);return e},d3.last=function(a,b){var c=0,d=a.length,e=a[0],f;arguments.length===1&&(b=d3.ascending);while(++c<d)b.call(a,e,f=a[c])<=0&&(e=f);return e},d3.nest=function(){function f(c,g){if(g>=b.length)return e?e.call(a,c):d?c.sort(d):c;var h=-1,i=c.length,j=b[g++],k,l,m={};while(++h<i)(k=j(l=c[h]))in m?m[k].push(l):m[k]=[l];for(k in m)m[k]=f(m[k],g);return m}function g(a,d){if(d>=b.length)return a;var e=[],f=c[d++],h;for(h in a)e.push({key:h,values:g(a[h],d)});return f&&e.sort(function(a,b){return f(a.key,b.key)}),e}var a={},b=[],c=[],d,e;return a.map=function(a){return f(a,0)},a.entries=function(a){return g(f(a,0),0)},a.key=function(c){return b.push(c),a},a.sortKeys=function(d){return c[b.length-1]=d,a},a.sortValues=function(b){return d=b,a},a.rollup=function(b){return e=b,a},a},d3.keys=function(a){var b=[];for(var c in a)b.push(c);return b},d3.values=function(a){var b=[];for(var c in a)b.push(a[c]);return b},d3.entries=function(a){var b=[];for(var c in a)b.push({key:c,value:a[c]});return b},d3.permute=function(a,b){var c=[],d=-1,e=b.length;while(++d<e)c[d]=a[b[d]];return c},d3.merge=function(a){return Array.prototype.concat.apply([],a)},d3.split=function(a,b){var c=[],d=[],e,f=-1,g=a.length;arguments.length<2&&(b=k);while(++f<g)b.call(d,e=a[f],f)?d=[]:(d.length||c.push(d),d.push(e));return c},d3.range=function(a,b,c){arguments.length<3&&(c=1,arguments.length<2&&(b=a,a=0));if((b-a)/c==Infinity)throw new Error("infinite range");var d=[],e=-1,f;if(c<0)while((f=a+c*++e)>b)d.push(f);else while((f=a+c*++e)<b)d.push(f);return d},d3.requote=function(a){return a.replace(m,"\\$&")};var m=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*Math.pow(10,b))*Math.pow(10,-b):Math.round(a)},d3.xhr=function(a,b,c){var d=new XMLHttpRequest;arguments.length<3?c=b:b&&d.overrideMimeType&&d.overrideMimeType(b),d.open("GET",a,!0),d.onreadystatechange=function(){d.readyState===4&&c(d.status<300?d:null)},d.send(null)},d3.text=function(a,b,c){function d(a){c(a&&a.responseText)}arguments.length<3&&(c=b,b=null),d3.xhr(a,b,d)},d3.json=function(a,b){d3.text(a,"application/json",function(a){b(a?JSON.parse(a):null)})},d3.html=function(a,b){d3.text(a,"text/html",function(a){if(a!=null){var c=document.createRange();c.selectNode(document.body),a=c.createContextualFragment(a)}b(a)})},d3.xml=function(a,b,c){function d(a){c(a&&a.responseXML)}arguments.length<3&&(c=b,b=null),d3.xhr(a,b,d)},d3.ns={prefix:{svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},qualify:function(a){var b=a.indexOf(":");return b<0?a:{space:d3.ns.prefix[a.substring(0,b)],local:a.substring(b+1)}}},d3.dispatch=function(a){var b={},c;for(var d=0,e=arguments.length;d<e;d++)c=arguments[d],b[c]=n(c);return b},d3.format=function(a){var b=o.exec(a),c=b[1]||" ",d=b[3]||"",e=b[5],f=+b[6],g=b[7],h=b[8],i=b[9],j=!1,k=!1;h&&(h=h.substring(1)),e&&(c="0",g&&(f-=Math.floor((f-1)/4)));switch(i){case"n":g=!0,i="g";break;case"%":j=!0,i="f";break;case"p":j=!0,i="r";break;case"d":k=!0,h="0"}return i=p[i]||q,function(a){var b=j?a*100:+a,l=b<0&&(b=-b)?"−":d;if(k&&b%1)return"";a=i(b,h);if(e){var m=a.length+l.length;m<f&&(a=(new Array(f-m+1)).join(c)+a),g&&(a=r(a)),a=l+a}else{g&&(a=r(a)),a=l+a;var m=a.length;m<f&&(a=(new Array(f-m+1)).join(c)+a)}return j&&(a+="%"),a}};var o=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,p={g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){var c=a?1+Math.floor(1e-15+Math.log(a)/Math.LN10):1;return d3.round(a,b-c).toFixed(Math.max(0,Math.min(20,b-c)))}},s=A(2),t=A(3),u={linear:function(){return z},poly:A,quad:function(){return s},cubic:function(){return t},sin:function(){return B},exp:function(){return C},circle:function(){return D},elastic:E,back:F,bounce:function(){return G}},v={"in":function(a){return a},out:x,"in-out":y,"out-in":function(a){return y(x(a))}};d3.ease=function(a){var b=a.indexOf("-"),c=b>=0?a.substring(0,b):a,d=b>=0?a.substring(b+1):"in";return w(v[d](u[c].apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(a,b){var c=d3.interpolators.length,d;while(--c>=0&&!(d=d3.interpolators[c](a,b)));return d},d3.interpolateNumber=function(a,b){return b-=a,function(c){return a+b*c}},d3.interpolateRound=function(a,b){return b-=a,function(c){return Math.round(a+b*c)}},d3.interpolateString=function(a,b){var c,d,e,f=0,g=0,h=[],i=[],j,k;H.lastIndex=0;for(d=0;c=H.exec(b);++d)c.index&&h.push(b.substring(f,g=c.index)),i.push({i:h.length,x:c[0]}),h.push(null),f=H.lastIndex;f<b.length&&h.push(b.substring(f));for(d=0,j=i.length;(c=H.exec(a))&&d<j;++d){k=i[d];if(k.x==c[0]){if(k.i)if(h[k.i+1]==null){h[k.i-1]+=k.x,h.splice(k.i,1);for(e=d+1;e<j;++e)i[e].i--}else{h[k.i-1]+=k.x+h[k.i+1],h.splice(k.i,2);for(e=d+1;e<j;++e)i[e].i-=2}else if(h[k.i+1]==null)h[k.i]=k.x;else{h[k.i]=k.x+h[k.i+1],h.splice(k.i+1,1);for(e=d+1;e<j;++e)i[e].i--}i.splice(d,1),j--,d--}else k.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(k.x))}while(d<j)k=i.pop(),h[k.i+1]==null?h[k.i]=k.x:(h[k.i]=k.x+h[k.i+1],h.splice(k.i+1,1)),j--;return h.length===1?h[0]==null?i[0].x:function(){return b}:function(a){for(d=0;d<j;++d)h[(k=i[d]).i]=k.x(a);return h.join("")}},d3.interpolateRgb=function(a,b){a=d3.rgb(a),b=d3.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,h=b.b-e;return function(a){return"rgb("+Math.round(c+f*a)+","+Math.round(d+g*a)+","+Math.round(e+h*a)+")"}},d3.interpolateHsl=function(a,b){a=d3.hsl(a),b=d3.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,h=b.l-e;return function(a){return W(c+f*a,d+g*a,e+h*a).toString()}},d3.interpolateArray=function(a,b){var c=[],d=[],e=a.length,f=b.length,g=Math.min(a.length,b.length),h;for(h=0;h<g;++h)c.push(d3.interpolate(a[h],b[h]));for(;h<e;++h)d[h]=a[h];for(;h<f;++h)d[h]=b[h];return function(a){for(h=0;h<g;++h)d[h]=c[h](a);return d}},d3.interpolateObject=function(a,b){var c={},d={},e;for(e in a)e in b?c[e]=J(e)(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}};var H=/[-+]?(?:\d+\.\d+|\d+\.|\.\d+|\d+)(?:[eE][-]?\d+)?/g,I={background:1,fill:1,stroke:1};d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return typeof b=="string"&&d3.interpolateString(String(a),b)},function(a,b){return(typeof b=="string"?b in S||/^(#|rgb\(|hsl\()/.test(b):b instanceof N||b instanceof V)&&d3.interpolateRgb(String(a),b)},function(a,b){return typeof b=="number"&&d3.interpolateNumber(+a,b)}],d3.rgb=function(a,b,c){return arguments.length===1?P(""+a,M,W):M(~~a,~~b,~~c)},N.prototype.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b,e=30;return!b&&!c&&!d?M(e,e,e):(b&&b<e&&(b=e),c&&c<e&&(c=e),d&&d<e&&(d=e),M(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a))))},N.prototype.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),M(Math.max(0,Math.floor(a*this.r)),Math.max(0,Math.floor(a*this.g)),Math.max(0,Math.floor(a*this.b)))},N.prototype.hsl=function(){return Q(this.r,this.g,this.b)},N.prototype.toString=function(){return"#"+O(this.r)+O(this.g)+O(this.b)};var S={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var T in S)S[T]=P(S[T],M,W);d3.hsl=function(a,b,c){return arguments.length===1?P(""+a,Q,U):U(+a,+b,+c)},V.prototype.brighter=function(a){return a=Math.pow(.7,arguments.length?a:1),U(this.h,this.s,this.l/a)},V.prototype.darker=function(a){return a=Math.pow(.7,arguments.length?a:1),U(this.h,this.s,a*this.l)},V.prototype.rgb=function(){return W(this.h,this.s,this.l)},V.prototype.toString=function(){return"hsl("+this.h+","+this.s*100+"%,"+this.l*100+"%)"};var Y=function(a,b){return b.querySelector(a)},Z=function(a,b){return b.querySelectorAll(a)};typeof Sizzle=="function"&&(Y=function(a,b){return Sizzle(a,b)[0]},Z=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))});var $=[];d3.selection=function(){return fb},d3.selection.prototype=$,$.select=function(a){var b=[],c,d,e,f;typeof a!="function"&&(a=_(a));for(var g=-1,h=this.length;++g<h;){b.push(c=[]),c.parentNode=(e=this[g]).parentNode;for(var i=-1,j=e.length;++i<j;)(f=e[i])?(c.push(d=a.call(f,f.__data__,i)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return X(b)},$.selectAll=function(a){var b=[],c,e;typeof a!="function"&&(a=ab(a));for(var f=-1,g=this.length;++f<g;)for(var h=this[f],i=-1,j=h.length;++i<j;)if(e=h[i])b.push(c=d(a.call(e,e.__data__,i))),c.parentNode=e;return X(b)},$.attr=function(a,b){function d(){this.removeAttribute(a)}function e(){this.removeAttributeNS(a.space,a.local)}function f(){this.setAttribute(a,b)}function g(){this.setAttributeNS(a.space,a.local,b)}function h(){var c=b.apply(this,arguments);c==null?this.removeAttribute(a):this.setAttribute(a,c)}function i(){var c=b.apply(this,arguments);c==null?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=d3.ns.qualify(a);if(arguments.length<2){var c=this.node();return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}return this.each(b==null?a.local?e:d:typeof b=="function"?a.local?i:h:a.local?g:f)},$.classed=function(a,b){function f(){if(b=this.classList)return b.add(a);var b=this.className,d=b.baseVal!=null,e=d?b.baseVal:b;c.lastIndex=0,c.test(e)||(e=l(e+" "+a),d?b.baseVal=e:this.className=e)}function g(){if(b=this.classList)return b.remove(a);var b=this.className,d=b.baseVal!=null,e=d?b.baseVal:b;e=l(e.replace(c," ")),d?b.baseVal=e:this.className=e}function h(){(b.apply(this,arguments)?f:g).call(this)}var c=new RegExp("(^|\\s+)"+d3.requote(a)+"(\\s+|$)","g");if(arguments.length<2){var d=this.node();if(e=d.classList)return e.contains(a);var e=d.className;return c.lastIndex=0,c.test(e.baseVal!=null?e.baseVal:e)}return this.each(typeof b=="function"?h:b?f:g)},$.style=function(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);d==null?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return arguments.length<3&&(c=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(a):this.each(b==null?d:typeof b=="function"?f:e)},$.property=function(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);c==null?delete this[a]:this[a]=c}return arguments.length<2?this.node()[a]:this.each(b==null?c:typeof b=="function"?e:d)},$.text=function(a){return arguments.length<1?this.node().textContent:this.each(typeof a=="function"?function(){this.textContent=a.apply(this,arguments)}:function(){this.textContent=a})},$.html=function(a){return arguments.length<1?this.node().innerHTML:this.each(typeof a=="function"?function(){this.innerHTML=a.apply(this,arguments)}:function(){this.innerHTML=a})},$.append=function(a){function b(){return this.appendChild(document.createElement(a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}return a=d3.ns.qualify(a),this.select(a.local?c:b)},$.insert=function(a,b){function c(){return this.insertBefore(document.createElement(a),Y(b,this))}function d(){return this.insertBefore(document.createElementNS(a.space,a.local),Y(b,this))}return a=d3.ns.qualify(a),this.select(a.local?d:c)},$.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})},$.data=function(a,b){function f(a,f){var g,h=a.length,i=f.length,j=Math.min(h,i),k=Math.max(h,i),l=[],m=[],n=[],o,p;if(b){var q={},r=[],s,t=f.length;for(g=-1;++g<h;)s=b.call(o=a[g],o.__data__,g),s in q?n[t++]=o:q[s]=o,r.push(s);for(g=-1;++g<i;)o=q[s=b.call(f,p=f[g],g)],o?(o.__data__=p,l[g]=o,m[g]=n[g]=null):(m[g]=bb(p),l[g]=n[g]=null),delete q[s];for(g=-1;++g<h;)r[g]in q&&(n[g]=a[g])}else{for(g=-1;++g<j;)o=a[g],p=f[g],o?(o.__data__=p,l[g]=o,m[g]=n[g]=null):(m[g]=bb(p),l[g]=n[g]=null);for(;g<i;++g)m[g]=bb(f[g]),l[g]=n[g]=null;for(;g<k;++g)n[g]=a[g],m[g]=l[g]=null}m.update=l,m.parentNode=l.parentNode=n.parentNode=a.parentNode,c.push(m),d.push(l),e.push(n)}var c=[],d=[],e=[],g=-1,h=this.length,i;if(typeof a=="function")while(++g<h)f(i=this[g],a.call(i,i.parentNode.__data__,g));else while(++g<h)f(i=this[g],a);var j=X(d);return j.enter=function(){return cb(c)},j.exit=function(){return X(e)},j};var db=[];db.append=$.append,db.insert=$.insert,db.empty=$.empty,db.select=function(a){var b=[],c,d,e,f,g;for(var h=-1,i=this.length;++h<i;){e=(f=this[h]).update,b.push(c=[]),c.parentNode=f.parentNode;for(var j=-1,k=f.length;++j<k;)(g=f[j])?(c.push(e[j]=d=a.call(f.parentNode,g.__data__,j)),d.__data__=g.__data__):c.push(null)}return X(b)},$.filter=function(a){var b=[],c,d,e;for(var f=0,g=this.length;f<g;f++){b.push(c=[]),c.parentNode=(d=this[f]).parentNode;for(var h=0,i=d.length;h<i;h++)(e=d[h])&&a.call(e,e.__data__,h)&&c.push(e)}return X(b)},$.map=function(a
){return this.each(function(){this.__data__=a.apply(this,arguments)})},$.sort=function(a){a=eb.apply(this,arguments);for(var b=0,c=this.length;b<c;b++)for(var d=this[b].sort(a),e=1,f=d.length,g=d[0];e<f;e++){var h=d[e];h&&(g&&g.parentNode.insertBefore(h,g.nextSibling),g=h)}return this},$.on=function(a,b,c){arguments.length<3&&(c=!1);var d="__on"+a,e=a.indexOf(".");return e>0&&(a=a.substring(0,e)),arguments.length<2?(e=this.node()[d])&&e._:this.each(function(e,f){function h(a){var c=d3.event;d3.event=a;try{b.call(g,g.__data__,f)}finally{d3.event=c}}var g=this;g[d]&&g.removeEventListener(a,g[d],c),b&&g.addEventListener(a,g[d]=h,c),h._=b})},$.each=function(a){for(var b=-1,c=this.length;++b<c;)for(var d=this[b],e=-1,f=d.length;++e<f;){var g=d[e];g&&a.call(g,g.__data__,e,b)}return this},$.call=function(a){return a.apply(this,(arguments[0]=this,arguments)),this},$.empty=function(){return!this.node()},$.node=function(a){for(var b=0,c=this.length;b<c;b++)for(var d=this[b],e=0,f=d.length;e<f;e++){var g=d[e];if(g)return g}return null},$.transition=function(){var a=[],b,c;for(var d=-1,e=this.length;++d<e;){a.push(b=[]);for(var f=this[d],g=-1,h=f.length;++g<h;)b.push((c=f[g])?{node:c,delay:0,duration:250}:null)}return gb(a,kb||++jb)};var fb=X([[document]]);fb[0].parentNode=document.documentElement,d3.select=function(a){return typeof a=="string"?fb.select(a):X([[a]])},d3.selectAll=function(a){return typeof a=="string"?fb.selectAll(a):X([d(a)])};var ib=[],jb=0,kb=0,lb=d3.ease("cubic-in-out");ib.call=$.call,d3.transition=function(){return fb.transition()},d3.transition.prototype=ib,ib.select=function(a){var b=[],c,d,e;typeof a!="function"&&(a=_(a));for(var f=-1,g=this.length;++f<g;){b.push(c=[]);for(var h=this[f],i=-1,j=h.length;++i<j;)(e=h[i])&&(d=a.call(e.node,e.node.__data__,i))?("__data__"in e.node&&(d.__data__=e.node.__data__),c.push({node:d,delay:e.delay,duration:e.duration})):c.push(null)}return gb(b,this.id).ease(this.ease())},ib.selectAll=function(a){var b=[],c,d;typeof a!="function"&&(a=ab(a));for(var e=-1,f=this.length;++e<f;)for(var g=this[e],h=-1,i=g.length;++h<i;)if(d=g[h]){b.push(c=a.call(d.node,d.node.__data__,h));for(var j=-1,k=c.length;++j<k;)c[j]={node:c[j],delay:d.delay,duration:d.duration}}return gb(b,this.id).ease(this.ease())},ib.attr=function(a,b){return this.attrTween(a,hb(b))},ib.attrTween=function(a,b){function c(c,d){var e=b.call(this,c,d,this.getAttribute(a));return e&&function(b){this.setAttribute(a,e(b))}}function d(c,d){var e=b.call(this,c,d,this.getAttributeNS(a.space,a.local));return e&&function(b){this.setAttributeNS(a.space,a.local,e(b))}}return a=d3.ns.qualify(a),this.tween("attr."+a,a.local?d:c)},ib.style=function(a,b,c){return arguments.length<3&&(c=""),this.styleTween(a,hb(b),c)},ib.styleTween=function(a,b,c){return arguments.length<3&&(c=""),this.tween("style."+a,function(d,e){var f=b.call(this,d,e,window.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})},ib.text=function(a){return this.tween("text",function(b,c){this.textContent=typeof a=="function"?a.call(this,b,c):a})},ib.remove=function(){return this.each("end",function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})},ib.delay=function(a){var b=this;return b.each(typeof a=="function"?function(c,d,e){b[e][d].delay=+a.apply(this,arguments)}:(a=+a,function(c,d,e){b[e][d].delay=a}))},ib.duration=function(a){var b=this;return b.each(typeof a=="function"?function(c,d,e){b[e][d].duration=+a.apply(this,arguments)}:(a=+a,function(c,d,e){b[e][d].duration=a}))},ib.transition=function(){return this.select(i)};var nb=null,ob,pb;d3.timer=function(a,b,c){var d=!1,e,f=nb;if(arguments.length<3){if(arguments.length<2)b=0;else if(!isFinite(b))return;c=Date.now()}while(f){if(f.callback===a){f.then=c,f.delay=b,d=!0;break}e=f,f=f.next}d||(nb={callback:a,then:c,delay:b,next:nb}),ob||(pb=clearTimeout(pb),ob=1,sb(qb))},d3.timer.flush=function(){var a,b=Date.now(),c=nb;while(c)a=b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;rb()};var sb=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.scale={},d3.scale.linear=function(){return xb([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return Fb(d3.scale.linear(),Hb)};var Gb=d3.format("e");Hb.pow=function(a){return Math.pow(10,a)},Ib.pow=function(a){return-Math.pow(10,-a)},d3.scale.pow=function(){return Jb(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return Lb([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Mb)},d3.scale.category20=function(){return d3.scale.ordinal().range(Nb)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Ob)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Pb)};var Mb=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Nb=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Ob=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Pb=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Qb([],[])},d3.scale.quantize=function(){return Rb(0,1,[0,1])},d3.svg={},d3.svg.arc=function(){function e(){var e=a.apply(this,arguments),f=b.apply(this,arguments),g=c.apply(this,arguments)+Sb,h=d.apply(this,arguments)+Sb,i=(h<g&&(i=g,g=h,h=i),h-g),j=i<Math.PI?"0":"1",k=Math.cos(g),l=Math.sin(g),m=Math.cos(h),n=Math.sin(h);return i>=Tb?e?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+ -f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":e?"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L"+e*m+","+e*n+"A"+e+","+e+" 0 "+j+",0 "+e*k+","+e*l+"Z":"M"+f*k+","+f*l+"A"+f+","+f+" 0 "+j+",1 "+f*m+","+f*n+"L0,0"+"Z"}var a=Ub,b=Vb,c=Wb,d=Xb;return e.innerRadius=function(b){return arguments.length?(a=d3.functor(b),e):a},e.outerRadius=function(a){return arguments.length?(b=d3.functor(a),e):b},e.startAngle=function(a){return arguments.length?(c=d3.functor(a),e):c},e.endAngle=function(a){return arguments.length?(d=d3.functor(a),e):d},e.centroid=function(){var e=(a.apply(this,arguments)+b.apply(this,arguments))/2,f=(c.apply(this,arguments)+d.apply(this,arguments))/2+Sb;return[Math.cos(f)*e,Math.sin(f)*e]},e};var Sb=-Math.PI/2,Tb=2*Math.PI-1e-6;d3.svg.line=function(){return Yb(Object)};var ac={linear:bc,"step-before":cc,"step-after":dc,basis:jc,"basis-open":kc,"basis-closed":lc,bundle:mc,cardinal:gc,"cardinal-open":ec,"cardinal-closed":fc,monotone:vc},oc=[0,2/3,1/3,0],pc=[0,1/3,2/3,0],qc=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=Yb(wc);return a.radius=a.x,delete a.x,a.angle=a.y,delete a.y,a},d3.svg.area=function(){return xc(Object)},d3.svg.area.radial=function(){var a=xc(wc);return a.radius=a.x,delete a.x,a.innerRadius=a.x0,delete a.x0,a.outerRadius=a.x1,delete a.x1,a.angle=a.y,delete a.y,a.startAngle=a.y0,delete a.y0,a.endAngle=a.y1,delete a.y1,a},d3.svg.chord=function(){function f(c,d){var e=g(this,a,c,d),f=g(this,b,c,d);return"M"+e.p0+i(e.r,e.p1)+(h(e,f)?j(e.r,e.p1,e.r,e.p0):j(e.r,e.p1,f.r,f.p0)+i(f.r,f.p1)+j(f.r,f.p1,e.r,e.p0))+"Z"}function g(a,b,f,g){var h=b.call(a,f,g),i=c.call(a,h,g),j=d.call(a,h,g)+Sb,k=e.call(a,h,g)+Sb;return{r:i,a0:j,a1:k,p0:[i*Math.cos(j),i*Math.sin(j)],p1:[i*Math.cos(k),i*Math.sin(k)]}}function h(a,b){return a.a0==b.a0&&a.a1==b.a1}function i(a,b){return"A"+a+","+a+" 0 0,1 "+b}function j(a,b,c,d){return"Q 0,0 "+d}var a=Ac,b=Bc,c=Cc,d=Wb,e=Xb;return f.radius=function(a){return arguments.length?(c=d3.functor(a),f):c},f.source=function(b){return arguments.length?(a=d3.functor(b),f):a},f.target=function(a){return arguments.length?(b=d3.functor(a),f):b},f.startAngle=function(a){return arguments.length?(d=d3.functor(a),f):d},f.endAngle=function(a){return arguments.length?(e=d3.functor(a),f):e},f},d3.svg.diagonal=function(){function d(d,e){var f=a.call(this,d,e),g=b.call(this,d,e),h=(f.y+g.y)/2,i=[f,{x:f.x,y:h},{x:g.x,y:h},g];return i=i.map(c),"M"+i[0]+"C"+i[1]+" "+i[2]+" "+i[3]}var a=Ac,b=Bc,c=Fc;return d.source=function(b){return arguments.length?(a=d3.functor(b),d):a},d.target=function(a){return arguments.length?(b=d3.functor(a),d):b},d.projection=function(a){return arguments.length?(c=a,d):c},d},d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=Fc,c=a.projection;return a.projection=function(a){return arguments.length?c(Gc(b=a)):b},a},d3.svg.mouse=function(a){return Ic(a,d3.event)};var Hc=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(a){var b=d3.event.touches;return b?d(b).map(function(b){var c=Ic(a,b);return c.identifier=b.identifier,c}):[]},d3.svg.symbol=function(){function c(c,d){return(Lc[a.call(this,c,d)]||Lc.circle)(b.call(this,c,d))}var a=Kc,b=Jc;return c.type=function(b){return arguments.length?(a=d3.functor(b),c):a},c.size=function(a){return arguments.length?(b=d3.functor(a),c):b},c};var Lc={circle:function(a){var b=Math.sqrt(a/Math.PI);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+ -b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"},cross:function(a){var b=Math.sqrt(a/5)/2;return"M"+ -3*b+","+ -b+"H"+ -b+"V"+ -3*b+"H"+b+"V"+ -b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+ -b+"V"+b+"H"+ -3*b+"Z"},diamond:function(a){var b=Math.sqrt(a/(2*Nc)),c=b*Nc;return"M0,"+ -b+"L"+c+",0"+" 0,"+b+" "+ -c+",0"+"Z"},square:function(a){var b=Math.sqrt(a)/2;return"M"+ -b+","+ -b+"L"+b+","+ -b+" "+b+","+b+" "+ -b+","+b+"Z"},"triangle-down":function(a){var b=Math.sqrt(a/Mc),c=b*Mc/2;return"M0,"+c+"L"+b+","+ -c+" "+ -b+","+ -c+"Z"},"triangle-up":function(a){var b=Math.sqrt(a/Mc),c=b*Mc/2;return"M0,"+ -c+"L"+b+","+c+" "+ -b+","+c+"Z"}};d3.svg.symbolTypes=d3.keys(Lc);var Mc=Math.sqrt(3),Nc=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function j(j){j.each(function(k,l,m){function F(a){return j.delay?a.transition().delay(j[m][l].delay).duration(j[m][l].duration).ease(j.ease()):a}var n=d3.select(this),o=a.ticks.apply(a,g),p=h==null?a.tickFormat.apply(a,g):h,q=Qc(a,o,i),r=n.selectAll(".minor").data(q,String),s=r.enter().insert("svg:line","g").attr("class","tick minor").style("opacity",1e-6),t=F(r.exit()).style("opacity",1e-6).remove(),u=F(r).style("opacity",1),v=n.selectAll("g").data(o,String),w=v.enter().insert("svg:g","path").style("opacity",1e-6),x=F(v.exit()).style("opacity",1e-6).remove(),y=F(v).style("opacity",1),z,A=ub(a.range()),B=n.selectAll(".domain").data([0]),C=B.enter().append("svg:path").attr("class","domain"),D=F(B),E=this.__chart__||a;this.__chart__=a.copy(),w.append("svg:line").attr("class","tick"),w.append("svg:text"),y.select("text").text(p);switch(b){case"bottom":z=Oc,u.attr("y2",d),w.select("text").attr("dy",".71em").attr("text-anchor","middle"),y.select("line").attr("y2",c),y.select("text").attr("y",Math.max(c,0)+f),D.attr("d","M"+A[0]+","+e+"V0H"+A[1]+"V"+e);break;case"top":z=Oc,u.attr("y2",-d),w.select("text").attr("text-anchor","middle"),y.select("line").attr("y2",-c),y.select("text").attr("y",-(Math.max(c,0)+f)),D.attr("d","M"+A[0]+","+ -e+"V0H"+A[1]+"V"+ -e);break;case"left":z=Pc,u.attr("x2",-d),w.select("text").attr("dy",".32em").attr("text-anchor","end"),y.select("line").attr("x2",-c),y.select("text").attr("x",-(Math.max(c,0)+f)),D.attr("d","M"+ -e+","+A[0]+"H0V"+A[1]+"H"+ -e);break;case"right":z=Pc,u.attr("x2",d),w.select("text").attr("dy",".32em"),y.select("line").attr("x2",c),y.select("text").attr("x",Math.max(c,0)+f),D.attr("d","M"+e+","+A[0]+"H0V"+A[1]+"H"+e)}w.call(z,E),y.call(z,a),x.call(z,a),s.call(z,E),u.call(z,a),t.call(z,a)})}var a=d3.scale.linear(),b="bottom",c=6,d=6,e=6,f=3,g=[10],h,i=0;return j.scale=function(b){return arguments.length?(a=b,j):a},j.orient=function(a){return arguments.length?(b=a,j):b},j.ticks=function(){return arguments.length?(g=arguments,j):g},j.tickFormat=function(a){return arguments.length?(h=a,j):h},j.tickSize=function(a,b,f){if(!arguments.length)return c;var g=arguments.length-1;return c=+a,d=g>1?+b:c,e=g>0?+arguments[g]:c,j},j.tickPadding=function(a){return arguments.length?(f=+a,j):f},j.tickSubdivide=function(a){return arguments.length?(i=+a,j):i},j},d3.behavior={},d3.behavior.drag=function(){function b(){this.on("mousedown.drag",d).on("touchstart.drag",d),d3.select(window).on("mousemove.drag",$c).on("touchmove.drag",$c).on("mouseup.drag",_c,!0).on("touchend.drag",_c,!0).on("click.drag",ad,!0)}function c(){Rc=a,Sc=d3.event.target,Vc=Zc((Tc=this).parentNode),Wc=0,Uc=arguments}function d(){c.apply(this,arguments),Yc("dragstart")}var a=d3.dispatch("drag","dragstart","dragend");return b.on=function(c,d){return a[c].add(d),b},b};var Rc,Sc,Tc,Uc,Vc,Wc,Xc;d3.behavior.zoom=function(){function c(){this.on("mousedown.zoom",e).on("mousewheel.zoom",f).on("DOMMouseScroll.zoom",f).on("dblclick.zoom",g).on("touchstart.zoom",h),d3.select(window).on("mousemove.zoom",sd).on("mouseup.zoom",td).on("touchmove.zoom",rd).on("touchend.zoom",qd).on("click.zoom",ud,!0)}function d(){hd=a,id=b.zoom.dispatch,jd=d3.event.target,kd=this,ld=arguments}function e(){d.apply(this,arguments),dd=od(d3.svg.mouse(kd)),md=!1,d3.event.preventDefault(),window.focus()}function f(){d.apply(this,arguments),ed||(ed=od(d3.svg.mouse(kd))),vd(pd()+a[2],d3.svg.mouse(kd),ed)}function g(){d.apply(this,arguments);var b=d3.svg.mouse(kd);vd(d3.event.shiftKey?Math.ceil(a[2]-1):Math.floor(a[2]+1),b,od(b))}function h(){d.apply(this,arguments);var b=qd(),c,e=Date.now();b.length===1&&e-gd<300&&vd(1+Math.floor(a[2]),c=b[0],fd[c.identifier]),gd=e}var a=[0,0,0],b=d3.dispatch("zoom");return c.on=function(a,d){return b[a].add(d),c},c};var cd,dd,ed,fd={},gd=0,hd,id,jd,kd,ld,md,nd}(),jQuery.extend(KhanUtil,{FN_COLOR:"#6495ED",DDX_COLOR:"#FFA500",TANGENT_COLOR:"#AAA",TANGENT_LINE_LENGTH:200,TANGENT_GROWTH_FACTOR:3,TANGENT_SHIFT:5,initAutoscaledGraph:function(a,b){var c=KhanUtil.currentGraph;b=jQuery.extend({xpixels:600,ypixels:600,xdivisions:20,ydivisions:20,labels:!0,unityLabels:!0,range:typeof a=="undefined"?[[-10,10],[-10,10]]:a},b),b.scale=[b.xpixels/(b.range[0][1]-b.range[0][0]),b.ypixels/(b.range[1][1]-b.range[1][0])],b.gridStep=[(b.range[0][1]-b.range[0][0])/b.xdivisions,(b.range[1][1]-b.range[1][0])/b.ydivisions],c.xpixels=b.xpixels,c.ypixels=b.ypixels,c.range=b.range,c.scale=b.scale,c.graphInit(b)},initDerivativeIntuition:function(a,b,c){var d=KhanUtil.currentGraph;KhanUtil.fnx=a,KhanUtil.ddx=b,KhanUtil.points=c,KhanUtil.highlight=!1,KhanUtil.dragging=!1,KhanUtil.ddxShown=!1,d.tangentLines=[],d.tangentPoints=[],d.slopePoints=[],d.mouseTargets=[],d.mouselayer=Raphael("ddxplot",d.xpixels,d.ypixels),jQuery(d.mouselayer.canvas).css("z-index",1),jQuery(c).each(function(a,b){KhanUtil.plotTangentLine(a)}),jQuery(c).each(function(a,b){KhanUtil.plotTangentPoint(a),KhanUtil.plotSlopePoint(a)}),jQuery(Khan).one("newProblem",function(){jQuery(c).each(function(a,b){KhanUtil.setSlope(a,0)})})},plotTangentLine:function(a){var b=KhanUtil.currentGraph,c=KhanUtil.points[a],d=KhanUtil.fnx(c),e=c,f=d,g=0,h=KhanUtil.ddx(c),i=(KhanUtil.ddx(c-.001)-KhanUtil.ddx(c+.001))/.002;if(h!==0){g=-1/(h*(b.scale[1]/b.scale[0]))/(b.scale[1]/b.scale[0]);if(i>0&&g>0||i<0&&g<0)e=c+Math.cos(Math.atan(g*(b.scale[1]/b.scale[0])))*KhanUtil.TANGENT_SHIFT/(2*b.scale[0]),f=g*(e-c)+d;else if(i<0&&g>0||i>0&&g<0)e=c-Math.cos(Math.atan(g*(b.scale[1]/b.scale[0])))*KhanUtil.TANGENT_SHIFT/(2*b.scale[0]),f=g*(e-c)+d}else i<0?f=d-KhanUtil.TANGENT_SHIFT/(2*b.scale[1]):i>0&&(f=d+KhanUtil.TANGENT_SHIFT/(2*b.scale[1]));b.style({stroke:KhanUtil.TANGENT_COLOR,strokeWidth:2},function(){b.tangentLines[a]=b.line([e-KhanUtil.TANGENT_LINE_LENGTH/(2*b.scale[0]),f],[e+KhanUtil.TANGENT_LINE_LENGTH/(2*b.scale[0]),f])})},plotTangentPoint:function(a){var b=KhanUtil.currentGraph,c=KhanUtil.points[a];b.style({fill:KhanUtil.FN_COLOR,stroke:KhanUtil.FN_COLOR},function(){b.tangentPoints[a]=b.ellipse([c,KhanUtil.fnx(c)],[4/b.scale[0],4/b.scale[1]])})},plotSlopePoint:function(a){var b=KhanUtil.currentGraph,c=KhanUtil.points[a];b.style({fill:KhanUtil.DDX_COLOR,stroke:KhanUtil.DDX_COLOR},function(){b.slopePoints[a]=b.ellipse([c,0],[4/b.scale[0],4/b.scale[1]])}),b.mouseTargets[a]=b.mouselayer.circle((c-b.range[0][0])*b.scale[0],(b.range[1][1]-0)*b.scale[1],15),b.mouseTargets[a].attr({fill:"#000",opacity:0}),jQuery(b.mouseTargets[a][0]).css("cursor","move"),jQuery(b.mouseTargets[a][0]).bind("vmousedown vmouseover vmouseout",function(b){b.preventDefault();var c=KhanUtil.currentGraph;b.type==="vmouseover"?(KhanUtil.highlight=!0,KhanUtil.dragging||(c.slopePoints[a].animate({scale:2},50),c.tangentLines[a].animate({stroke:KhanUtil.DDX_COLOR},100))):b.type==="vmouseout"?(KhanUtil.highlight=!1,KhanUtil.dragging||(c.slopePoints[a].animate({scale:1},50),c.tangentLines[a].animate({stroke:KhanUtil.TANGENT_COLOR},100))):b.type==="vmousedown"&&(b.which===1||b.which===0)&&(b.preventDefault(),c.tangentLines[a].toFront(),c.tangentPoints[a].toFront(),c.slopePoints[a].toFront(),c.tangentLines[a].animate({scale:KhanUtil.TANGENT_GROWTH_FACTOR},200),KhanUtil.dragging=!0,jQuery(document).bind("vmousemove vmouseup",function(b){b.preventDefault();var d=b.pageY-jQuery("#ddxplot").offset().top;d=Math.max(10,Math.min(c.ypixels-10,d));var e=c.range[1][1]-d/c.scale[1];if(b.type==="vmousemove")jQuery(jQuery("div#solutionarea :text")[a]).val(KhanUtil.roundTo(2,e)),jQuery(jQuery("div#solutionarea .answer-label")[a]).text(KhanUtil.roundTo(2,e)),c.tangentLines[a].rotate(-Math.atan(e*(c.scale[1]/c.scale[0]))*(180/Math.PI),!0),c.slopePoints[a].attr("cy",d),c.mouseTargets[a].attr("cy",d);else if(b.type==="vmouseup"){jQuery(document).unbind("vmousemove vmouseup"),KhanUtil.setSlope(a,e),KhanUtil.dragging=!1,c.tangentLines[a].animate({scale:1},200),KhanUtil.highlight||(c.slopePoints[a].animate({scale:1},200),c.tangentLines[a].animate({stroke:KhanUtil.TANGENT_COLOR},100));var f=jQuery.map(jQuery("div#solutionarea .answer-label"),function(a){return parseFloat(jQuery(a).text())}),g=jQuery.map(KhanUtil.points,function(a){return KhanUtil.roundTo(2,KhanUtil.ddx(a))});f.join()===g.join()&&KhanUtil.revealDerivative(400)}}))})},setSlope:function(a,b){var c=KhanUtil.currentGraph,d=KhanUtil.ddx(KhanUtil.points[a]),e=Math.abs(Math.atan(d*c.scale[1]/c.scale[0])-Math.atan(b*c.scale[1]/c.scale[0]))*(180/Math.PI);e<7&&(b=d),jQuery(jQuery("div#solutionarea :text")[a]).val(KhanUtil.roundTo(2,b)),jQuery(jQuery("div#solutionarea .answer-label")[a]).text(KhanUtil.roundTo(2,b)),c.tangentLines[a].rotate(-Math.atan(b*(c.scale[1]/c.scale[0]))*(180/Math.PI),!0),c.slopePoints[a].attr("cy",(c.range[1][1]-b)*c.scale[1]),c.mouseTargets[a].attr("cy",(c.range[1][1]-b)*c.scale[1])},revealDerivative:function(a){if(!KhanUtil.ddxShown){var b=KhanUtil.currentGraph,c;a=a||0,b.style({stroke:KhanUtil.DDX_COLOR,strokeWidth:1,opacity:0},function(){c=b.plot(function(a){return KhanUtil.ddx(a)},KhanUtil.tmpl.getVAR("XRANGE"))}),jQuery("span#ddxspan").show(),jQuery("span#ddxspan").fadeTo(a,1),c.animate({opacity:1},a),KhanUtil.ddxShown=!0}}}),jQuery.extend(KhanUtil,{frac:function(a,b){return KhanUtil.fraction(a,b,!0,!0,!1,!1)},fracSmall:function(a,b){return KhanUtil.fraction(a,b,!0,!0,!0,!1)},fracParens:function(a,b){return KhanUtil.fraction(a,b,!0,!0,!1,!0)},expandExponent:function(a,b){var c=KhanUtil.negParens(a),d="\\cdot"+c,e=[],f;e.unshift(Math.round(Math.pow(a,b)));for(var g=1;g<b;g++)f=Math.round(Math.pow(a,b-g)),g===b-1&&(f=KhanUtil.negParens(f)),e.unshift(f+d),d+="\\cdot "+c;return e},expandFractionExponent:function(a,b,c){if(Math.abs(c)<1)return"";c=Math.abs(c);var d=c>0?a:b,e=c>0?b:a,f=function(a,b){return KhanUtil.fraction(a,b,!0,!0,!1,!0)},g=function(a,b){return KhanUtil.fraction(a,b,!0,!0,!1,!1)},h=f(d,e),i="\\cdot"+h,j=[],k,l;j.unshift(g(Math.round(Math.pow(d,c)),Math.round(Math.pow(e,c))));for(var m=1;m<c;m++)k=Math.round(Math.pow(d,c-m)),l=Math.round(Math.pow(e,c-m)),j.unshift((m===c-1?f:g).call(this,k,l)+i),i+="\\cdot "+h;return j},maxReasonableExp:function(a){return{0:1e3,1:1e3,2:8,3:5,4:4,5:4,6:3,7:3,8:3,9:3,10:10}[Math.abs(a)]},twoBasesOneRoot:function(){var a={2:[1,4,9,16,25,36,49,64,81,100],3:[1,8,27,64,125],4:[1,16,81,256]},b=a[2].concat(a[3]).concat(a[4]),c={};for(var d=0;d<b.length;d++){var e=b[d];for(var f=2;f<=4;f++)_(a[f]).indexOf(e)!==-1&&(c[e]===undefined?c[e]=[f]:_(c[e]).indexOf(f)===-1&&c[e].push(f))}var g=KhanUtil.randFromArray(b),h;while(h===undefined||h===1)h=KhanUtil.randFromArray(c[g]);var i;while(i===undefined||i===g)i=KhanUtil.randFromArray(a[h]);return{base_1:g,base_2:i,root:h}}}),jQuery.extend(KhanUtil,{expr:function(a,b){if(typeof a=="object"){var c=a[0],d=a.slice(1),e=b?KhanUtil.computeOperators:KhanUtil.formatOperators;return e[c].apply(this,d)}return b?a:a.toString()},exprType:function(a){return typeof a=="object"?a[0]:typeof a},exprIsNegated:function(a){switch(KhanUtil.exprType(a)){case"color":return KhanUtil.exprIsNegated(a[2]);case"/":return KhanUtil.exprIsNegated(a[1]);case"+":case"-":return!0;case"number":return a<0;case"string":return a.charAt(0)==="-";default:return!1}},exprIsShort:function(a){switch(KhanUtil.exprType(a)){case"color":return KhanUtil.exprIsShort(a[2]);case"+":case"-":case"*":case"/":case"frac":return!1;case"^":return KhanUtil.exprType(a[1])!=="number"||a[1]<0;case"number":case"sqrt":return!0;default:return a.length<=1}},exprParenthesize:function(a){return KhanUtil.exprIsShort(a)?KhanUtil.expr(a):"("+KhanUtil.expr(a)+")"},formatOperators:{color:function(a,b){return"\\color{"+a+"}{"+KhanUtil.expr(b)+"}"},"+":function(){var a=[].slice.call(arguments,0),b=jQuery.grep(a,function(a,b){return a!=null});b=jQuery.map(b,function(a,b){var c;switch(KhanUtil.exprType(a)){case"+":c=!0;break;case"-":c=a.length>2;break;default:c=!1}a=KhanUtil.expr(a),c&&(a="("+a+")");if(a.charAt(0)!=="-"||c)a="+"+a;return a});var c=b.join("");return c.charAt(0)==="+"?c.slice(1):c},"-":function(){if(arguments.length===1)return KhanUtil.expr(["*",-1,arguments[0]]);var a=[].slice.call(arguments,0),b=jQuery.map(a,function(a,b){var c=KhanUtil.exprIsNegated(a),d;switch(KhanUtil.exprType(a)){case"+":case"-":d=!0;break;default:d=!1}a=KhanUtil.expr(a);if(c&&b>0||d)a="("+a+")";return a}),c=b.join("-");return c},"*":function(){var a=Array.prototype.slice.call(arguments,1);a.unshift("*");if(arguments[0]===1&&a.length>1)return KhanUtil.expr(a);if(arguments[0]===-1&&a.length>1){var b=KhanUtil.expr(a);return KhanUtil.exprIsNegated(a[1])?"-("+b+")":"-"+b}if(arguments.length>1){var c=[].slice.call(arguments,0),d=KhanUtil.exprType(arguments[0])==="number"&&KhanUtil.exprType(arguments[1])==="number",e=jQuery.map(c,function(a,b){var c;switch(KhanUtil.exprType(a)){case"number":b>0&&(c=!0);break;default:c=!KhanUtil.exprIsShort(a)}return d||(d=c),a=KhanUtil.expr(a),d&&(a="("+a+")"),a});return e.join("")}return KhanUtil.expr(arguments[0])},times:function(a,b){var c=!KhanUtil.exprIsShort(a),d=!KhanUtil.exprIsShort(b);return a=KhanUtil.expr(a),b=KhanUtil.expr(b),a=c?"("+a+")":a,b=d?"("+b+")":b,a+" \\times "+b},"/":function(a,b){var c=!KhanUtil.exprIsShort(a),d=!KhanUtil.exprIsShort(b);return a=KhanUtil.expr(a),b=KhanUtil.expr(b),a=c?"("+a+")":a,b=d?"("+b+")":b,a+"/"+b},frac:function(a,b){return"\\frac{"+KhanUtil.expr(a)+"}{"+KhanUtil.expr(b)+"}"},"^":function(a,b){var c,d;switch(KhanUtil.exprType(a)){case"+":case"-":case"*":case"/":case"^":case"ln":c=!0;break;case"number":c=a<0;break;case"sin":case"cos":case"tan":case"csc":case"sec":case"cot":c=!1,d=!0;break;default:c=!1,d=!1}return a=KhanUtil.expr(a),c&&(a="("+a+")"),b=KhanUtil.expr(b),d?a.replace(/\\(\S+?)\{/,function(a,c){return"\\"+c+"^{"+b+"} {"}):a+"^{"+b+"}"},sqrt:function(a){return"\\sqrt{"+KhanUtil.exprParenthesize(a)+"}"},sin:function(a){return"\\sin{"+KhanUtil.exprParenthesize(a)+"}"},cos:function(a){return"\\cos{"+KhanUtil.exprParenthesize(a)+"}"},tan:function(a){return"\\tan{"+KhanUtil.exprParenthesize(a)+"}"},sec:function(a){return"\\sec{"+KhanUtil.exprParenthesize(a)+"}"},csc:function(a){return"\\sec{"+KhanUtil.exprParenthesize(a)+"}"},cot:function(a){return"\\sec{"+KhanUtil.exprParenthesize(a)+"}"},ln:function(a){return"\\ln{"+KhanUtil.exprParenthesize(a)+"}"},"+-":function(){if(arguments.length===1)return"\\pm "+KhanUtil.exprParenthesize(arguments[0]);var a=[].slice.call(arguments,0);return jQuery.map(a,function(a,b){return KhanUtil.expr(a)}).join(" \\pm ")}},computeOperators:{color:function(a,b){return KhanUtil.expr(b,!0)},"+":function(){var a=[].slice.call(arguments,0),b=0;return jQuery.each(a,function(a,c){b+=KhanUtil.expr(c,!0)}),b},"-":function(){if(arguments.length===1)return-KhanUtil.expr(arguments[0],!0);var a=[].slice.call(arguments,0),b=0;return jQuery.each(a,function(a,c){b+=(a===0?1:-1)*KhanUtil.expr(c,!0)}),b},"*":function(){var a=[].slice.call(arguments,0),b=1;return jQuery.each(a,function(a,c){b*=KhanUtil.expr(c,!0)}),b},"/":function(){var a=[].slice.call(arguments,0),b=1;return jQuery.each(a,function(a,c){var d=KhanUtil.expr(c,!0);b*=a===0?d:1/d}),b},"^":function(a,b){return Math.pow(KhanUtil.expr(a,!0),KhanUtil.expr(b,!0))},sqrt:function(a){return Math.sqrt(KhanUtil.expr(a,!0))},"+-":function(){return Number.NaN}},exprStripColor:function(a){return typeof a!="object"?a:a[0]==="color"?KhanUtil.exprStripColor(a[2]):jQuery.map(a,function(a,b){return[b===0?a:KhanUtil.exprStripColor(a)]})},exprSimplifyAssociative:function(a){if(typeof a!="object")return a;var b=jQuery.map(a.slice(1),function(a){return[KhanUtil.exprSimplifyAssociative(a)]}),c=function(b){switch(a[0]){case"+":if(b[0]==="+")return b.slice(1);break;case"*":if(b[0]==="*")return b.slice(1)}return[b]},d=jQuery.map(b,c);return d.unshift(a[0]),d}}),KhanUtil.computeOperators.frac=KhanUtil.computeOperators["/"],jQuery.extend(KhanUtil,{tabulate:function(a,b){return jQuery.map(new Array(b),function(b,c){return[a(c)]})}}),Quadrilateral.prototype=new Triangle([0,0],[30,30,30],3,"");var randomTriangleAngles={triangle:function(){var a,b,c;return a=KhanUtil.randRange(35,150),b=KhanUtil.randRange(35,180-a),a+b>160&&(a=Math.max(30,a-15),b=Math.max(30,b-15)),c=180-a-b,[a,b,c]},scalene:function(){var a,b,c;do a=KhanUtil.randRange(25,150),b=KhanUtil.randRange(25,180-a),a+b>170&&(a=Math.max(30,a-15),b=Math.max(30,b-15)),c=180-a-b;while(a===b||a===c||b===c);return[a,b,c]},isosceles:function(){var a=KhanUtil.randRangeExclude(25,75,[60]),b=180-2*a;return KhanUtil.shuffle([a,a,b])},equilateral:function(){return[60,60,60]}},randomQuadAngles={square:function(){return[90,90,90,90]},rectangle:function(){return[90,90,90,90]},rhombus:function(){var a,b;do a=KhanUtil.randRange(30,160),b=180-a;while(Math.abs(a-b)<5);return[a,b,a,b]},parallelogram:function(){var a,b;do a=KhanUtil.randRange(30,160),b=180-a;while(a===b);return[a,b,a,b]},trapezoid:function(){var a,b,c,d;do a=KhanUtil.randRange(30,160),b=180-a,c=KhanUtil.randRange(30,160),d=180-c;while(Math.abs(a-c)<6||a+c===180);return[a,c,d,b]},isoscelesTrapezoid:function(){var a,b;do a=KhanUtil.randRange(30,160),b=180-a;while(a===b);return[a,a,b,b]},kite:function(){var a,b,c;do a=KhanUtil.randRange(90,140),b=KhanUtil.randRange(30,360-2*a-30),c=360-b-2*a;while(a===b);return[b,a,c,a]}};Adder.numHintsFor=function(a,b){return KhanUtil.digits(a+b).length+1},Subtractor.numHintsFor=function(a,b){return KhanUtil.digits(a).length+1},function(){var a=function(a){var b=function(a,b,c,d){var e=a*(d>b?Math.pow(10,d-b):1),f=c*(b>d?Math.pow(10,b-d):1);return[e,f]},c=function(c,d,e,f){var g=b(c,d,e,f),h=g[0],i=g[1],j=KhanUtil.digits(h);for(var k=0;k<d-f||j.length<d+1;k++)j.push(0);var l=KhanUtil.digits(i);for(var k=0;k<f-d||l.length<f+1;k++)l.push(0);var m=new a(h,i,j,l,Math.max(d,f));return m.showDecimals=function(a){return function(){a.call(m,d,f)}}(m.showDecimals),m};return c.numHintsFor=function(c,d,e,f){var g=b(c,d,e,f),h=g[0],i=g[1];return a.numHintsFor(h,i)},c};DecimalAdder=a(Adder),DecimalSubtractor=a(Subtractor)}(),jQuery.extend(KhanUtil,{Polygon:function(a){function d(a,b,c){var d=findIntersection([a,b],[[0,0],c]),e=d[0],f=d[1];return Math.sqrt(e*e+f*f)}function e(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)}function f(a){var b=KhanUtil.currentGraph,d=c.length;b.style({stroke:KhanUtil.ORANGE,"stroke-width":3}),b.line(c[a%d],c[(a+1)%d]),b.line(c[(a+1)%d],c[(a+2)%d]),b.line(c[(a+2)%d],c[a%d])}function g(a){f(a),f(a+c.length-2)}function h(a){switch(a%4){case 0:return KhanUtil.BLUE;case 1:return KhanUtil.ORANGE;case 2:return KhanUtil.GREEN;case 3:return KhanUtil.PINK}}var b=[],c=[];gExteriorAngles=[],function(){var e=KhanUtil.currentGraph,f,g,h=1,i=5,j=1;for(var k=0;k<a-2;k++){var l=180/a,m=KhanUtil.randRange(-10,10)/40;b.push(l*(1+m))}while(c.length!==b.length+2)f=0,c=[[0,0],e.polar(KhanUtil.randRange(h,i),f)],jQuery.each(b,function(a,b){f+=b;if(a==0)g=KhanUtil.randRange(h,i);else{var k=d(c[c.length-2],c[c.length-1],e.polar(h,f));if(Math.floor(k)<=h+j)return;k=Math.min(Math.floor(k)-j,i),g=KhanUtil.randRange(h,k)}c.push(e.polar(g,f))})}(),this.draw=function(){var a=KhanUtil.currentGraph;a.style({stroke:KhanUtil.BLUE}),c.push([0,0]),a.path(c),c.pop()},this.drawDiagonals=function(a){var b=KhanUtil.currentGraph,d=c[a%c.length];jQuery.each(c,function(c,e){a!==c&&b.line(d,e)}),g(a)},this.drawRadialDiagonals=function(){var a=KhanUtil.currentGraph,b=0,d=0;jQuery.each(c,function(a,c){b+=c[0],d+=c[1]}),b/=c.length,d/=c.length,a.style({stroke:KhanUtil.ORANGE},function(){jQuery.each(c,function(c,e){a.line([b,d],e)})}),a.circle([b,d],.3)},this.drawExteriorAngles=function(){var a=KhanUtil.currentGraph,b=0,d;a.style({"stroke-dasharray":"-"}),c.push([0,0]),jQuery.each(c,function(c,f){if(c!=0){var g=e(d,f),h=f[0]-d[0],i=f[1]-d[1],j=Math.acos(h/g)*180/Math.PI,k;i<0&&(j=360-j),k=a.polar(g+2,j),k[0]+=d[0],k[1]+=d[1],a.line(d,k),c!=1&&a.style({"stroke-dasharray":""},function(){gExteriorAngles.push(a.arc(d,.5,b,j))}),b=j}d=f}),a.style({"stroke-dasharray":""},function(){gExteriorAngles.push(a.arc(d,.5,b,360))}),c.pop()},this.animateExteriorAngles=function(a){var b=KhanUtil.currentGraph,d=b.scalePoint(c[a]);c.push([0,0]),gExteriorAngles.unshift("dummy");for(var e=1;e<gExteriorAngles.length;e++){var f=gExteriorAngles[e],g=c[e],i=b.scalePoint(g),j=f.attr("stroke",h(e)).clone();j.animate({translation:[d[0]-i[0],d[1]-i[1]]},1e3)}c.pop(),gExteriorAngles.shift()},this.clone=function(){return jQuery.extend(!0,{},this)},this.ex=function(){return gExteriorAngles}},Circle:function(a,b){function d(a,b,c){return b%=360,c%=360,b>c?a<c||a>b:a>b&&a<c}function e(a,b){var c=Math.atan(b/a);return a<=0&&b>0?c+=Math.PI:a<0&&b<0?c+=Math.PI:a>=0&&b<0&&(c+=2*Math.PI),c=c*180/Math.PI,c}b=b||[0,0];var c=.1;(function(){var c=KhanUtil.currentGraph;c.style({stroke:KhanUtil.BLUE}),c.circle(b,a)})(),this.drawPoint=function(b){var d=KhanUtil.currentGraph,e=d.polar(a,b);return d.circle(e,c)},this.drawCenter=function(){var a=KhanUtil.currentGraph;a.style({fill:KhanUtil.BLUE},function(){a.circle(b,c)})},this.drawRadius=function(c){var d=KhanUtil.currentGraph,e=d.polar(a,c);return d.line(b,e)},this.drawChord=function(b,c){var d=KhanUtil.currentGraph,e=d.polar(a,b),f=d.polar(a,c);return d.line(e,f)},this.drawMovablePoint=function(b,c,f){var g=KhanUtil.currentGraph,h=g.polar(a,b);c=c||0,f=f||360,g.graph.movable={vertex:KhanUtil.bogusShape,arc:KhanUtil.bogusShape,chords:[KhanUtil.bogusShape,KhanUtil.bogusShape]},g.graph.inscribedPoint=KhanUtil.addMovablePoint({coordX:h[0],coordY:h[1]}),g.graph.inscribedPoint.onMove=function(b,h){var i=e(b,h);return d(i,c,f)?(g.style({stroke:KhanUtil.ORANGE}),g.graph.movable.arc.remove(),g.graph.movable.chords[0].remove(),g.graph.movable.chords[1].remove(),g.graph.movable.vertex.remove(),g.graph.movable=g.graph.circle.drawInscribedAngle(i,f,c),g.polar(a,i)):!1}},this.drawCentralArc=function(a,c,d){var e=KhanUtil.currentGraph,d=d||.5,f;return e.style({fill:""},function(){f=e.arc(b,d,a,c)}),f},this.drawCentralAngle=function(a,b,c){var d={radii:[]};return d.radii.push(this.drawRadius(a)),d.radii.push(this.drawRadius(b)),d.arc=this.drawCentralArc(a,b,c),d},this.drawInscribedArc=function(b,c,d,f){var g=KhanUtil.currentGraph,h=g.polar(a,b),i=g.polar(a,c),j=g.polar(a,d),k=e(i[0]-h[0],i[1]-h[1]),l=e(j[0]-h[0],j[1]-h[1]),f=f||.5,m;return g.style({fill:""},function(){m=g.arc(h,f,k,l)}),m},this.drawInscribedAngle=function(a,b,c,d){var e=KhanUtil.currentGraph,f=[this.drawChord(a,b),this.drawChord(a,c)],g=this.drawPoint(a),h=this.drawInscribedArc(a,b,c,d);return{chords:f,vertex:g,arc
:h}}}}),function(){var a=function(a){var b=40,c=40,d,e;jQuery(a).css("position","relative");var f=Raphael(a);jQuery(a).children("div").css("position","absolute");var g={"stroke-width":2,fill:"none"},h=function(a){if(typeof a=="number")return h([a,a]);var d=a[0],e=a[1];return[d*b,e*c]},i=function q(a){if(typeof a=="number")return q([a,a]);var f=a[0],g=a[1];return[(f-d[0])*b,(e[1]-g)*c]},j=function(a){function b(a){return a===0?a:a<0?-b(-a):Math.max(1e-6,Math.min(a,1e20))}return jQuery.map(a,function(a,c){if(a===!0)return"z";var d=i(a);return(c===0?"M":"L")+b(d[0])+" "+b(d[1])}).join("")},k=function(a){var g={scale:function(a){typeof a=="number"&&(a=[a,a]),b=a[0],c=a[1],f.setSize((d[1]-d[0])*b,(e[1]-e[0])*c)},clipRect:function(a){var b=a[0],c=a[1];return b[1]+=c[1],{"clip-rect":i(b).concat(h(c)).join(" ")}},strokeWidth:function(a){return{"stroke-width":parseFloat(a)}},rx:function(a){return{rx:h([a,0])[0]}},ry:function(a){return{ry:h([0,a])[1]}},r:function(a){var b=h([a,a]);return{rx:b[0],ry:b[1]}}},j={};return jQuery.each(a||{},function(a,b){var c=g[a];if(typeof c=="function")jQuery.extend(j,c(b));else{var d=a.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();j[d]=b}}),j},l=function(a,b){var c=Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)),d=Math.atan2(a[1],a[0]);return d<0&&(d+=2*Math.PI),b||(d=d*180/Math.PI),[c,d]},m=function(a,b){return typeof a=="number"&&(a=[a,a]),b=b*Math.PI/180,[a[0]*Math.cos(b),a[1]*Math.sin(b)]},n=function r(a){var b=a.constructor.prototype;if(b===Raphael.el){if(a.type==="path"&&typeof a.arrowheadsDrawn=="undefined"){var c=a.attr("stroke-width"),d=.6+.4*c,e=a.getTotalLength();if(!(e<.75*d)){var g=f.set(),h=f.path("M-3 4 C-2.75 2.5 0 0.25 0.75 0C0 -0.25 -2.75 -2.5 -3 -4"),i=a.getPointAtLength(e-.4),j=a.getPointAtLength(e-.75*d),k=Math.atan2(i.y-j.y,i.x-j.x)*180/Math.PI,l=a.attr();delete l.path;var m=a.getSubpath(0,e-.75*d);return m=f.path(m).attr(l),m.arrowheadsDrawn=!0,a.remove(),h.rotate(k,.75,0).scale(d,d,.75,0).translate(j.x,j.y).attr(l).attr({"stroke-linejoin":"round","stroke-linecap":"round"}),h.arrowheadsDrawn=!0,g.push(m),g.push(h),g}}}else if(b===Raphael.st)for(var n=0,e=a.items.length;n<e;n++)r(a.items[n])},o={circle:function(a,b){return f.ellipse.apply(f,i(a).concat(h([b,b])))},ellipse:function(a,b){return f.ellipse.apply(f,i(a).concat(h(b)))},arc:function(a,b,c,d,e){c=(c%360+360)%360,d=(d%360+360)%360;var g=i(a),j=h(b),k=m(b,c),l=m(b,d),n=i([a[0]+k[0],a[1]+k[1]]),o=i([a[0]+l[0],a[1]+l[1]]),p=((d-c)%360+360)%360>180;return f.path("M"+n.join(" ")+"A"+j.join(" ")+" 0 "+(p?1:0)+" 0 "+o.join(" ")+(e?"L"+g.join(" ")+"z":""))},path:function(a){var b=f.path(j(a));return b.graphiePath=a,b},line:function(a,b){return this.path([a,b])},grid:function(a,b){var c=g.step||[1,1],d=f.set(),e=c[0]*Math.ceil(a[0]/c[0]);for(;e<=a[1];e+=c[0])d.push(this.line([e,b[0]],[e,b[1]]));var h=c[1]*Math.ceil(b[0]/c[1]);for(;h<=b[1];h+=c[1])d.push(this.line([a[0],h],[a[1],h]));return d},label:function(b,c,d,e){var f={center:[-0.5,-0.5],above:[-0.5,-1],"above right":[0,-1],right:[0,-0.5],"below right":[0,0],below:[-0.5,0],"below left":[-1,0],left:[-1,-0.5],"above left":[-1,-1]},h=i(b);e=typeof e=="undefined"||e;var j;if(e){var k=jQuery("<code>").text(c);j=jQuery("<span>").append(k),typeof MathJax!="undefined"&&jQuery.tmpl.type.code()(k[0])}else j=jQuery("<span>").html(c);var l=g["label-distance"];return j.css({position:"absolute",left:h[0],top:h[1],padding:(l!=null?l:7)+"px"}).appendTo(a),typeof MathJax!="undefined"&&MathJax.Hub.Queue(function(){j.css("visibility","hidden");var a=function(a){j.css("visibility","");var b=f[d||"center"];j.css({marginLeft:Math.round(a[0]*b[0]),marginTop:Math.round(a[1]*b[1])})},b=MathJax.Callback(function(){}),c=0,e=[j.outerWidth(),j.outerHeight()];if(e[1]>18)a(e),b();else var g=setInterval(function(){e=[j.outerWidth(),j.outerHeight()];if(e[1]>18||++c>=10)a(e),clearInterval(g),b()},100);return b}),j},plotParametric:function(a,b){g.strokeLinejoin||(g.strokeLinejoin="round"),g.strokeLinecap||(g.strokeLinecap="round");var c=[],d=b[0],e=b[1],f=(e-d)/(g["plot-points"]||800);for(var h=d;h<=e;h+=f)c.push(a(h));return this.path(c)},plotPolar:function(a,c){var d=c[0],e=c[1];return g["plot-points"]||(g["plot-points"]=2*(e-d)*b),this.plotParametric(function(b){return m(a(b),b*180/Math.PI)},c)},plot:function(a,c){var d=c[0],e=c[1];return g["plot-points"]||(g["plot-points"]=2*(e-d)*b),this.plotParametric(function(b){return[b,a(b)]},c)}},p={raphael:f,init:function(g){var h=g.scale||[40,40];h=typeof h=="number"?[h,h]:h,b=h[0],c=h[1];if(g.range==null)return Khan.error("range should be specified in graph init");d=g.range[0],e=g.range[1];var i=(d[1]-d[0])*b,j=(e[1]-e[0])*c;return f.setSize(i,j),jQuery(a).css({width:i,height:j}),this},style:function(a,b){var c=k(a);if(typeof b=="function"){var d=g;g=jQuery.extend({},g,c),b.call(p),g=d}else jQuery.extend(g,c)},scalePoint:i,scaleVector:h,polar:m,cartToPolar:l};return jQuery.each(o,function(a){p[a]=function(){var b=arguments[arguments.length-1],c=g,d;if(typeof b=="object"&&!jQuery.isArray(b)){g=jQuery.extend({},g,k(b));var e=[].slice.call(arguments,0,arguments.length-1);d=o[a].apply(o,e)}else g=jQuery.extend({},g),d=o[a].apply(o,arguments);var f=d.constructor.prototype;return f===Raphael.el||f===Raphael.st?(d.attr(g),g.arrows&&(d=n(d))):d instanceof jQuery&&d.css(g),g=c,d}}),p.graphInit=function(a){a=a||{},jQuery.each(a,function(b,c){!b.match(/.*Opacity$/)&&b!=="range"&&typeof c=="number"&&(a[b]=[c,c]),b==="range"&&(c.constructor===Array?c[0].constructor!==Array&&(a[b]=[[-c[0],c[0]],[-c[1],c[1]]]):typeof c=="number"&&(a[b]=[[-c,c],[-c,c]]))});var b=a.range||[[-10,10],[-10,10]],c=a.scale||[20,20],d=a.grid||!0,e=a.gridOpacity||.1,f=a.gridStep||[1,1],g=a.axes||!0,h=a.axisArrows||"",i=a.axisOpacity||1,j=a.ticks||!0,k=a.tickStep||[2,2],l=a.tickLen||[5,5],m=a.tickOpacity||1,n=a.labels||a.labelStep||!1,o=a.labelStep||[1,1],p=a.labelOpacity||1,q=a.unityLabels||!1,r=a.labelFormat||function(a){return a},s=a.xLabelFormat||r,t=a.yLabelFormat||r,u=a.smartLabelPositioning!=null?a.smartLabelPositioning:!0;if(u){var v=function(a){return function(b){return(a(b)+"").replace(/-(\d)/g,"\\llap{-}$1")}};s=v(s),t=v(t)}this.init({range:b,scale:c}),d&&this.grid(b[0],b[1],{stroke:"#000000",opacity:e,step:f}),g&&(h==="<->"||!0?this.style({stroke:"#000000",opacity:i,strokeWidth:2,arrows:"->"},function(){this.path([[0,0],[b[0][0],0]]),this.path([[0,0],[b[0][1],0]]),this.path([[0,0],[0,b[1][0]]]),this.path([[0,0],[0,b[1][1]]])}):(h==="->"||h==="")&&this.style({stroke:"#000000",opacity:i,strokeWidth:2,arrows:h},function(){this.path([[b[0][0],0],[b[0][1],0]]),this.path([[0,b[1][0]],[0,b[1][1]]])})),j&&this.style({stroke:"#000000",opacity:m,strokeWidth:1},function(){var a=f[0]*k[0],d=l[0]/c[1],e=b[0][0],g=b[0][1];for(var i=a;i<=g;i+=a)(i<g||!h)&&this.line([i,-d],[i,d]);for(var i=-a;i>=e;i-=a)(i>e||!h)&&this.line([i,-d],[i,d]);a=f[1]*k[1],d=l[1]/c[0],e=b[1][0],g=b[1][1];for(var j=a;j<=g;j+=a)(j<g||!h)&&this.line([-d,j],[d,j]);for(var j=-a;j>=e;j-=a)(j>e||!h)&&this.line([-d,j],[d,j])}),n&&this.style({stroke:"#000000",opacity:p},function(){var a=f[0]*k[0]*o[0],c=b[0][0],d=b[0][1];for(var e=a;e<=d;e+=a)(e<d||!h)&&this.label([e,0],s(e),"below");for(var e=-a*(q?1:2);e>=c;e-=a)(e>c||!h)&&this.label([e,0],s(e),"below");a=f[1]*k[1]*o[1],c=b[1][0],d=b[1][1];for(var g=a;g<=d;g+=a)(g<d||!h)&&this.label([0,g],t(g),"left");for(var g=-a*(q?1:2);g>=c;g-=a)(g>c||!h)&&this.label([0,g],t(g),"left")})},p};jQuery.fn.graphie=function(b){return this.find(".graphie").andSelf().filter(".graphie").each(function(){var c=jQuery(this).text(),d;if(c.match(/Created with Rapha\xebl/))return;jQuery(this).empty();if(jQuery(this).data("update")){var e=jQuery(this).data("update");jQuery(this).remove();var f=jQuery("#problemarea").add(b);d=f.find("#"+e).data("graphie")}else d=a(this),jQuery(this).data("graphie",d);typeof d.graph=="undefined"&&(d.graph={}),c="(function() {"+c+"})()",KhanUtil.currentGraph=d,jQuery.tmpl.getVAR(c,d)}).end()}}(),jQuery.extend(KhanUtil,{FILL_OPACITY:.3,dragging:!1,initAutoscaledGraph:function(a,b){var c=KhanUtil.currentGraph;b=jQuery.extend({xpixels:500,ypixels:500,xdivisions:20,ydivisions:20,labels:!0,unityLabels:!0,range:a===undefined?[[-10,10],[-10,10]]:a},b),b.scale=[b.xpixels/(b.range[0][1]-b.range[0][0]),b.ypixels/(b.range[1][1]-b.range[1][0])],b.gridStep=[(b.range[0][1]-b.range[0][0])/b.xdivisions,(b.range[1][1]-b.range[1][0])/b.ydivisions],c.xpixels=b.xpixels,c.ypixels=b.ypixels,c.range=b.range,c.scale=b.scale,c.graphInit(b)},addMouseLayer:function(){var a=KhanUtil.currentGraph;a.xpixels=a.raphael.canvas.offsetWidth,a.ypixels=a.raphael.canvas.offsetHeight,a.xpixels===undefined&&(a.xpixels=a.raphael.width,a.ypixels=a.raphael.height),a.scale=[a.scalePoint([1,1])[0]-a.scalePoint([0,0])[0],a.scalePoint([0,0])[1]-a.scalePoint([1,1])[1]];var b=0-a.scalePoint([0,0])[0]/a.scale[0],c=a.xpixels/a.scale[0]+b,d=a.scalePoint([0,0])[1]/a.scale[1],e=d-a.ypixels/a.scale[1];a.range=[[b,c],[e,d]],a.mouselayer=Raphael(a.raphael.canvas.parentNode,a.xpixels,a.ypixels),jQuery(a.mouselayer.canvas).css("z-index",1),Khan.scratchpad.disable()},findAngle:function(a,b,c){if(c===undefined){var d=a[0]-b[0],e=a[1]-b[1];return!d&&!e?0:(180+Math.atan2(-e,-d)*180/Math.PI+360)%360}return KhanUtil.findAngle(a,c)-KhanUtil.findAngle(b,c)},drawArcs:function(a,b,c,d){var e=KhanUtil.findAngle(a,b),f=KhanUtil.findAngle(c,b);if(((f-e)%360+360)%360>180){var g=e;e=f,f=g}var h=.3;((f-e)%360+360)%360<75&&(h=-0.6/90*(((f-e)%360+360)%360)+.8);var i=[];for(var j=0;j<d;++j)i.push(KhanUtil.currentGraph.arc(b,h+.15*j,e,f));return i},addMovablePoint:function(a){var b=jQuery.extend(!0,{graph:KhanUtil.currentGraph,coord:[0,0],snapX:0,snapY:0,highlight:!1,dragging:!1,visible:!0,constraints:{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},lineStarts:[],lineEnds:[],normalStyle:{fill:KhanUtil.ORANGE,stroke:KhanUtil.ORANGE},highlightStyle:{fill:KhanUtil.ORANGE,stroke:KhanUtil.ORANGE}},a);a.coordX!==undefined&&(b.coord[0]=a.coordX),a.coordY!==undefined&&(b.coord[1]=a.coordY);var c=b.graph;return b.visible&&c.style(b.normalStyle,function(){b.visibleShape=c.ellipse(b.coord,[4/c.scale[0],4/c.scale[1]])}),b.normalStyle.scale=1,b.highlightStyle.scale=2,b.applyConstraint=function(a,c,d){var e=a.slice(),f={};d?jQuery.extend(f,{fixed:!1,constrainX:!1,constrainY:!1,fixedAngle:{},fixedDistance:{}},c):jQuery.extend(f,this.constraints,c);if(f.constrainX)e=[this.coord[0],a[1]];else if(f.constrainY)e=[a[0],this.coord[1]];else if(typeof f.fixedAngle.angle=="number"&&typeof f.fixedDistance.dist=="number"){var g=f.fixedAngle.vertex.coord||f.fixedAngle.vertex,h=f.fixedAngle.ref.coord||f.fixedAngle.ref,i=f.fixedDistance.point.coord||f.fixedDistance.point,j=(f.fixedAngle.angle+KhanUtil.findAngle(h,g))*Math.PI/180,k=f.fixedDistance.dist;e[0]=k*Math.cos(j)+i[0],e[1]=k*Math.sin(j)+i[1]}else if(typeof f.fixedAngle.angle=="number"){var g=f.fixedAngle.vertex.coord||f.fixedAngle.vertex,h=f.fixedAngle.ref.coord||f.fixedAngle.ref,j=(f.fixedAngle.angle+KhanUtil.findAngle(h,g))*Math.PI/180,l=KhanUtil.findAngle(a,g)*Math.PI/180,m=KhanUtil.getDistance(a,g),k=m*Math.cos(j-l);k=k<1?1:k,e[0]=k*Math.cos(j)+g[0],e[1]=k*Math.sin(j)+g[1]}else if(typeof f.fixedDistance.dist=="number"){var i=f.fixedDistance.point.coord||f.fixedDistance.point,l=KhanUtil.findAngle(a,i),k=f.fixedDistance.dist;l=l*Math.PI/180,e[0]=k*Math.cos(l)+i[0],e[1]=k*Math.sin(l)+i[1]}else f.fixed&&(e=b.coord);return e},b.visible&&!b.constraints.fixed&&(b.mouseTarget=c.mouselayer.circle(c.scalePoint(b.coord)[0],c.scalePoint(b.coord)[1],15),b.mouseTarget.attr({fill:"#000",opacity:0}),jQuery(b.mouseTarget[0]).css("cursor","move"),jQuery(b.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(a){a.type==="vmouseover"?(b.highlight=!0,KhanUtil.dragging||b.visibleShape.animate(b.highlightStyle,50)):a.type==="vmouseout"?(b.highlight=!1,b.dragging||b.visibleShape.animate(b.normalStyle,50)):a.type==="vmousedown"&&(a.which===1||a.which===0)&&(a.preventDefault(),jQuery(document).bind("vmousemove vmouseup",function(a){a.preventDefault(),b.dragging=!0,KhanUtil.dragging=!0;var d=a.pageX-jQuery(c.raphael.canvas.parentNode).offset().left,e=a.pageY-jQuery(c.raphael.canvas.parentNode).offset().top;d=Math.max(10,Math.min(c.xpixels-10,d)),e=Math.max(10,Math.min(c.ypixels-10,e)),b.snapX&&(d=Math.round(d/(c.scale[0]*b.snapX))*c.scale[0]*b.snapX),b.snapY&&(e=Math.round(e/(c.scale[1]*b.snapY))*c.scale[1]*b.snapY),b.snapX!==0&&(d=Math.round(d/(c.scale[0]*b.snapX))*c.scale[0]*b.snapX),b.snapY!==0&&(e=Math.round(e/(c.scale[1]*b.snapY))*c.scale[1]*b.snapY);var f=d/c.scale[0]+c.range[0][0],g=c.range[1][1]-e/c.scale[1];b.snapX!==0&&(f=Math.round(f/b.snapX)*b.snapX),b.snapY!==0&&(g=Math.round(g/b.snapY)*b.snapY);if(b.constraints.fixedDistance.snapPoints){var h=2*Math.PI/b.constraints.fixedDistance.snapPoints,i=b.constraints.fixedDistance.dist,j=b.constraints.fixedDistance.point,k=(j[0]-c.range[0][0])*c.scale[0],l=(-j[1]+c.range[1][1])*c.scale[1],m=d-k,n=-e+l,o=Math.atan(n/m),p=m<0;p&&(o+=Math.PI),o=Math.round(o/h)*h,m=i*Math.cos(o),n=i*Math.sin(o),d=m+k,e=-n+l,f=KhanUtil.roundTo(5,d/c.scale[0]+c.range[0][0]),g=KhanUtil.roundTo(5,c.range[1][1]-e/c.scale[1])}var q=b.applyConstraint([f,g]);f=q[0],g=q[1];if(a.type==="vmousemove"){var r=!0;if(jQuery.isFunction(b.onMove)){var s=b.onMove(f,g);s===!1&&(r=!1),jQuery.isArray(s)&&(f=s[0],g=s[1])}d=(f-c.range[0][0])*c.scale[0],e=(-g+c.range[1][1])*c.scale[1],r&&(b.visibleShape.attr("cx",d),b.mouseTarget.attr("cx",d),b.visibleShape.attr("cy",e),b.mouseTarget.attr("cy",e),b.coord=[f,g],b.updateLineEnds())}else if(a.type==="vmouseup"){jQuery(document).unbind("vmousemove vmouseup"),b.dragging=!1,KhanUtil.dragging=!1;if(jQuery.isFunction(b.onMoveEnd)){var s=b.onMoveEnd(f,g);jQuery.isArray(s)&&(f=s[0],g=s[1],d=(f-c.range[0][0])*c.scale[0],e=(-g+c.range[1][1])*c.scale[1],b.visibleShape.attr("cx",d),b.mouseTarget.attr("cx",d),b.visibleShape.attr("cy",e),b.mouseTarget.attr("cy",e),b.coord=[f,g])}b.visibleShape.animate(b.normalStyle,50)}}))})),b.moveTo=function(a,d,e){var f=KhanUtil.getDistance(this.graph.scalePoint([a,d]),this.graph.scalePoint(this.coord)),g=f*5,h=c.scalePoint([a,d]),i={cx:h[0],cy:h[1]};if(e){var j={cx:this.visibleShape.attr("cx"),cy:this.visibleShape.attr("cy")};jQuery(j).animate(i,{duration:g,easing:"linear",step:function(a,d){b.visibleShape.attr(d.prop,a),b.mouseTarget.attr(d.prop,a),d.prop==="cx"?b.coord[0]=a/c.scale[0]+c.range[0][0]:b.coord[1]=c.range[1][1]-a/c.scale[1],b.updateLineEnds()}})}else this.visibleShape.animate(i,g),this.mouseTarget.animate(i,g);this.coord=[a,d],jQuery.isFunction(this.onMove)&&this.onMove(a,d)},b.updateLineEnds=function(){jQuery(this.lineStarts).each(function(){this.coordA=b.coord,this.transform()}),jQuery(this.lineEnds).each(function(){this.coordZ=b.coord,this.transform()})},b.setCoord=function(a){if(this.visible){var b=c.scalePoint(a);this.visibleShape.attr({cx:b[0]}),this.visibleShape.attr({cy:b[1]}),this.mouseTarget.attr({cx:b[0]}),this.mouseTarget.attr({cy:b[1]})}this.coord=a.slice()},b.toBack=function(){this.visible&&(this.mouseTarget.toBack(),this.visibleShape.toBack())},b.toFront=function(){this.visible&&(this.mouseTarget.toFront(),this.visibleShape.toFront())},b},addMovableLine:function(a){a=jQuery.extend({graph:KhanUtil.currentGraph,coord:0,snap:0,vertical:!1},a);var b=a.graph,c={highlight:!1,dragging:!1,coord:a.coord};return b.style({fill:KhanUtil.ORANGE,stroke:KhanUtil.ORANGE},function(){a.vertical?(c.visibleShape=b.line([0,b.range[1][0]],[0,b.range[1][1]]),c.visibleShape.translate(a.coord*b.scale[1],0)):(c.visibleShape=b.line([b.range[0][0],0],[b.range[0][1],0]),c.visibleShape.translate(0,-a.coord*b.scale[0]))}),a.vertical?c.mouseTarget=b.mouselayer.rect((b.range[1][1]+a.coord)*b.scale[1]-10,0,20,b.ypixels):c.mouseTarget=b.mouselayer.rect(0,-(b.range[0][0]+a.coord)*b.scale[0]-10,b.xpixels,20),c.mouseTarget.attr({fill:"#000",opacity:0}),jQuery(c.mouseTarget[0]).css("cursor","move"),jQuery(c.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(d){d.type==="vmouseover"?KhanUtil.dragging||(c.highlight=!0,c.visibleShape.animate({"stroke-width":5},50)):d.type==="vmouseout"?(c.highlight=!1,c.dragging||c.visibleShape.animate({"stroke-width":2},50)):d.type==="vmousedown"&&(d.which===1||d.which===0)&&(d.preventDefault(),jQuery(document).bind("vmousemove vmouseup",function(d){d.preventDefault(),c.dragging=!0,KhanUtil.dragging=!0;var e=d.pageX-jQuery(b.raphael.canvas.parentNode).offset().left,f=d.pageY-jQuery(b.raphael.canvas.parentNode).offset().top;e=Math.max(10,Math.min(b.xpixels-10,e)),f=Math.max(10,Math.min(b.ypixels-10,f)),a.snap&&(e=Math.round(e/(b.scale[0]*a.snap))*b.scale[0]*a.snap,f=Math.round(f/(b.scale[1]*a.snap))*b.scale[1]*a.snap);var g=e/b.scale[0]+b.range[0][0],h=b.range[1][1]-f/b.scale[1];d.type==="vmousemove"?a.vertical?(c.visibleShape.translate(g*b.scale[0]-c.visibleShape.attr("translation").x,0),c.mouseTarget.attr("x",e-10),c.coord=g,jQuery.isFunction(c.onMove)&&c.onMove(g)):(c.visibleShape.translate(0,-h*b.scale[1]-c.visibleShape.attr("translation").y,0),c.mouseTarget.attr("y",f-10),c.coord=h,jQuery.isFunction(c.onMove)&&c.onMove(h)):d.type==="vmouseup"&&(jQuery(document).unbind("vmousemove vmouseup"),c.dragging=!1,KhanUtil.dragging=!1,c.highlight||c.visibleShape.animate({"stroke-width":2},50))}))}),c.moveTo=function(d){if(a.vertical){var e=Math.abs(this.coord-d)*b.scale[0],f=e*5;this.visibleShape.animate({translation:[d*b.scale[0]-this.visibleShape.attr("translation").x,0]},f),this.mouseTarget.animate({y:d/b.scale[0]+b.range[0][0]-10},f)}else{var e=Math.abs(this.coord-d)*b.scale[1],f=e*5;this.visibleShape.animate({translation:[0,-d*b.scale[1]-this.visibleShape.attr("translation").y]},f),this.mouseTarget.animate({y:(b.range[1][1]-d)*b.scale[1]-10},f)}this.coord=d,jQuery.isFunction(this.onMove)&&c.onMove(d)},c},svgPath:function(a){return jQuery.map(a,function(a,b){return a===!0?"z":(b===0?"M":"L")+a[0]+" "+a[1]}).join("")},getDistance:function(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))},addInteractiveFn:function(a,b){b=jQuery.extend({graph:KhanUtil.currentGraph,snap:0,range:[KhanUtil.currentGraph.range[0][0],KhanUtil.currentGraph.range[0][1]]},b);var c=b.graph,d={highlight:!1};c.style({stroke:KhanUtil.BLUE},function(){d.visibleShape=c.plot(a,b.range)}),c.style({fill:KhanUtil.BLUE,stroke:KhanUtil.BLUE},function(){d.cursorPoint=c.ellipse([0,a(0)],[4/c.scale[0],4/c.scale[1]])}),d.cursorPoint.attr("opacity",0);var e=30,f=[],g=(b.range[1]-b.range[0])/100;for(var h=b.range[0];h<=b.range[1];h+=g){var i=(a(h-.001)-a(h+.001))/.002,j=h,k=a(h)+e/(2*c.scale[1]);if(i!==0){var l=-1/(i*(c.scale[1]/c.scale[0]))/(c.scale[1]/c.scale[0]);i<0?(j=h-Math.cos(-Math.atan(l*(c.scale[1]/c.scale[0])))*e/(2*c.scale[0]),k=l*(h-j)+a(h)):i>0&&(j=h+Math.cos(-Math.atan(l*(c.scale[1]/c.scale[0])))*e/(2*c.scale[0]),k=l*(h-j)+a(h))}f.push([(j-c.range[0][0])*c.scale[0],(c.range[1][1]-k)*c.scale[1]])}for(var h=b.range[1];h>=b.range[0];h-=g){var i=(a(h-.001)-a(h+.001))/.002,j=h,k=a(h)-e/(2*c.scale[1]);if(i!==0){var l=-1/(i*(c.scale[1]/c.scale[0]))/(c.scale[1]/c.scale[0]);i<0?(j=h+Math.cos(-Math.atan(l*(c.scale[1]/c.scale[0])))*e/(2*c.scale[0]),k=l*(h-j)+a(h)):i>0&&(j=h-Math.cos(-Math.atan(l*(c.scale[1]/c.scale[0])))*e/(2*c.scale[0]),k=l*(h-j)+a(h))}f.push([(j-c.range[0][0])*c.scale[0],(c.range[1][1]-k)*c.scale[1]])}return d.mouseTarget=c.mouselayer.path(this.svgPath(f)),d.mouseTarget.attr({fill:"#000",opacity:0}),jQuery(d.mouseTarget[0]).bind("vmouseover vmouseout vmousemove",function(e){e.preventDefault();var f=e.pageX-jQuery(c.raphael.canvas.parentNode).offset().left,g=e.pageY-jQuery(c.raphael.canvas.parentNode).offset().top;f=Math.max(10,Math.min(c.xpixels-10,f)),g=Math.max(10,Math.min(c.ypixels-10,g)),b.snap&&(f=Math.round(f/(c.scale[0]*b.snap))*c.scale[0]*b.snap);var h=f/c.scale[0]+c.range[0][0],i=c.range[1][1]-g/c.scale[1],j=0,k=Math.sqrt(h*h+i*i);for(var l=b.range[0];l<b.range[1];l+=(b.range[1]-b.range[0])/c.xpixels)Math.sqrt((l-h)*(l-h)+(a(l)-i)*(a(l)-i))<k&&(j=l,k=Math.sqrt((l-h)*(l-h)+(a(l)-i)*(a(l)-i)));d.cursorPoint.attr("cx",(c.range[0][1]+j)*c.scale[0]),d.cursorPoint.attr("cy",(c.range[1][1]-a(j))*c.scale[1]),h=j,i=a(j),jQuery.isFunction(d.onMove)&&d.onMove(h,i),e.type==="vmouseover"?(d.cursorPoint.animate({opacity:1},50),d.highlight=!0):e.type==="vmouseout"&&(d.highlight=!1,d.cursorPoint.animate({opacity:0},50),jQuery.isFunction(d.onLeave)&&d.onLeave(h,i))}),d.mouseTarget.toBack(),d},bogusShape:{animate:function(){},attr:function(){},remove:function(){}},addMovableLineSegment:function(a){var b=jQuery.extend({graph:KhanUtil.currentGraph,coordA:[0,0],coordZ:[1,1],snapX:0,snapY:0,fixed:!1,ticks:0,normalStyle:{stroke:KhanUtil.BLUE,"stroke-width":2},highlightStyle:{stroke:KhanUtil.ORANGE,"stroke-width":6},highlight:!1,dragging:!1,tick:[],extendLine:!1,constraints:{fixed:!1,constrainX:!1,constrainY:!1}},a);a.pointA!==undefined?(b.coordA=a.pointA.coord,b.pointA.lineStarts.push(b)):a.coordA!==undefined&&(b.coordA=a.coordA.slice()),a.pointZ!==undefined?(b.coordZ=a.pointZ.coord,b.pointZ.lineEnds.push(b)):a.coordA!==undefined&&(b.coordA=b.coordA.slice());var c=b.graph;c.style(b.normalStyle);for(var d=0;d<b.ticks;++d)b.tick[d]=KhanUtil.bogusShape;var e=KhanUtil.svgPath([[0,0],[c.scale[0],0]]);for(var d=0;d<b.ticks;++d){var f=.5*c.scale[0]-(b.ticks-1)*1+d*2;e+=KhanUtil.svgPath([[f,-7],[f,7]])}return b.visibleLine=c.raphael.path(e),b.visibleLine.attr(b.normalStyle),b.fixed||(b.mouseTarget=c.mouselayer.rect(c.scalePoint([c.range[0][0],c.range[1][1]])[0],c.scalePoint([c.range[0][0],c.range[1][1]])[1]-15,c.scaleVector([1,1])[0],30),b.mouseTarget.attr({fill:"#000",opacity:0})),b.transform=function(a){a&&(typeof this.pointA=="object"&&(this.coordA=this.pointA.coord),typeof this.pointZ=="object"&&(this.coordZ=this.pointZ.coord));var b=KhanUtil.findAngle(this.coordZ,this.coordA),d=c.scalePoint(this.coordA),e=KhanUtil.getDistance(this.coordA,this.coordZ);if(this.extendLine)if(this.coordA[0]!==this.coordZ[0]){var f=(this.coordZ[1]-this.coordA[1])/(this.coordZ[0]-this.coordA[0]),g=f*(c.range[0][0]-this.coordA[0])+this.coordA[1],h=f*(c.range[0][1]-this.coordA[0])+this.coordA[1];this.coordA[0]<this.coordZ[0]?(d=c.scalePoint([c.range[0][0],g]),d[0]++):(d=c.scalePoint([c.range[0][1],h]),d[0]--),e=KhanUtil.getDistance([c.range[0][0],g],[c.range[0][1],h])}else this.coordA[1]<this.coordZ[1]?d=c.scalePoint([this.coordA[0],c.range[1][0]]):d=c.scalePoint([this.coordA[0],c.range[1][1]]),e=c.range[1][1]-c.range[1][0];this.visibleLine.translate(d[0]-this.visibleLine.attr("translation").x,d[1]-this.visibleLine.attr("translation").y),this.visibleLine.rotate(-b,d[0],d[1]),this.visibleLine.scale(e,1,d[0],d[1]),this.fixed||(this.mouseTarget.translate(d[0]-this.mouseTarget.attr("translation").x,d[1]-this.mouseTarget.attr("translation").y),this.mouseTarget.rotate(-b,d[0],d[1]),this.mouseTarget.scale(e,1,d[0],d[1]))},b.toBack=function(){b.fixed||b.mouseTarget.toBack(),b.visibleLine.toBack()},b.toFront=function(){b.fixed||b.mouseTarget.toFront(),b.visibleLine.toFront()},!b.fixed&&!b.constraints.fixed&&(jQuery(b.mouseTarget[0]).css("cursor","move"),jQuery(b.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(a){if(a.type==="vmouseover")KhanUtil.dragging||(b.highlight=!0,b.visibleLine.animate(b.highlightStyle,50));else if(a.type==="vmouseout")b.highlight=!1,b.dragging||b.visibleLine.animate(b.normalStyle,50);else if(a.type==="vmousedown"&&(a.which===1||a.which===0)){a.preventDefault();var d=(a.pageX-jQuery(c.raphael.canvas.parentNode).offset().left)/c.scale[0]+c.range[0][0],e=c.range[1][1]-(a.pageY-jQuery(c.raphael.canvas.parentNode).offset().top)/c.scale[1];b.snapX>0&&(d=Math.round(d/b.snapX)*b.snapX),b.snapY>0&&(e=Math.round(e/b.snapY)*b.snapY);var f=[b.coordA[0]-d,b.coordA[1]-e],g=[b.coordZ[0]-d,b.coordZ[1]-e],h=-Math.min(c.scaleVector(f)[0],c.scaleVector(g)[0]),i=Math.max(c.scaleVector(f)[0],c.scaleVector(g)[0]),j=Math.max(c.scaleVector(f)[1],c.scaleVector(g)[1]),k=-Math.min(c.scaleVector(f)[1],c.scaleVector(g)[1]);jQuery(document).bind("vmousemove vmouseup",function(a){a.preventDefault(),b.dragging=!0,KhanUtil.dragging=!0;var d=a.pageX-jQuery(c.raphael.canvas.parentNode).offset().left,e=a.pageY-jQuery(c.raphael.canvas.parentNode).offset().top;d=Math.max(h+10,Math.min(c.xpixels-10-i,d)),e=Math.max(j+10,Math.min(c.ypixels-10-k,e));var l=d/c.scale[0]+c.range[0][0],m=c.range[1][1]-e/c.scale[1];b.snapX>0&&(l=Math.round(l/b.snapX)*b.snapX),b.snapY>0&&(m=Math.round(m/b.snapY)*b.snapY);if(a.type==="vmousemove"){b.constraints.constrainX&&(l=b.coordA[0]-f[0]),b.constraints.constrainY&&(m=b.coordA[1]-f[1]);var n=l+f[0]-b.coordA[0],o=m+f[1]-b.coordA[1];b.coordA=[l+f[0],m+f[1]],b.coordZ=[l+g[0],m+g[1]],b.transform(),jQuery.isFunction(b.onMove)&&b.onMove(n,o)}else a.type==="vmouseup"&&(jQuery(document).unbind("vmousemove vmouseup"),b.dragging=!1,KhanUtil.dragging=!1,b.highlight||b.visibleLine.animate(b.normalStyle,50),jQuery.isFunction(b.onMoveEnd)&&b.onMoveEnd())})}})),b.pointA!==undefined&&b.pointA.toFront(),b.pointZ!==undefined&&b.pointZ.toFront(),b.transform(),b},createSorter:function(){var a={},b;return a.init=function(a){b=jQuery("[id="+a+"]").last();var c=b.wrap("<div>").parent(),d=jQuery("<li>");d.addClass("placeholder"),c.addClass("sortable ui-helper-clearfix");var e=b.find("li").outerWidth(!0),f=b.find("li").length;b.find("li").each(function(a,c){jQuery(c).bind("vmousedown",function(a){if(a.type==="vmousedown"&&(a.which===1||a.which===0)){a.preventDefault(),jQuery(c).addClass("dragging");var g=jQuery(this).index();d.insertAfter(c),jQuery(this).css("z-index",100);var h=jQuery(this).offset(),i={left:a.pageX-h.left-3,top:a.pageY-h.top-3};jQuery(c).css({position:"absolute"}),jQuery(c).offset({left:h.left,top:h.top}),jQuery(document).bind("vmousemove vmouseup",function(a){a.preventDefault();if(a.type==="vmousemove"){jQuery(c).offset({left:a.pageX-i.left,top:a.pageY-i.top});var j=b.offset().left,k=Math.max(0,Math.min(f-1,Math.floor((a.pageX-j)/e)));if(k!==g){g=k;if(k===0)d.prependTo(b),jQuery(c).prependTo(b);else{d.detach(),jQuery(c).detach();var l=b.find("li")[k-1];d.insertAfter(l),jQuery(c).insertAfter(l)}h.left=j+e*k}}else if(a.type==="vmouseup"){jQuery(document).unbind("vmousemove vmouseup");var m=jQuery(c).offset();jQuery(m).animate(h,{duration:150,step:function(a,b){m[b.prop]=a,jQuery(c).offset(m)},complete:function(){jQuery(c).css("z-index",0),d.detach(),jQuery(c).css({position:"static"}),jQuery(c).removeClass("dragging")}})}})}})})},a.getContent=function(){return content=[],b.find("li").each(function(a,b){content.push(jQuery.trim(jQuery(b).find("code").text()))}),content},a.setContent=function(a){b.find("li").each(function(b,c){jQuery(c).find("code").text(a[b]),MathJax.Hub.Queue(["Reprocess",MathJax.Hub,c])})},a}}),function(a,b,c,d){function u(a){while(a&&typeof a.originalEvent!="undefined")a=a.originalEvent;return a}function v(b,c){var e=b.type,f,g,i,j,k,l,m,n;b=a.Event(b),b.type=c,f=b.originalEvent,g=a.event.props;if(f)for(m=g.length,j;m;)j=g[--m],b[j]=f[j];e.search(/mouse(down|up)|click/)>-1&&!b.which&&(b.which=1);if(e.search(/^touch/)!==-1){i=u(f),e=i.touches,k=i.changedTouches,l=e&&e.length?e[0]:k&&k.length?k[0]:d;if(l)for(n=0,len=h.length;n<len;n++)j=h[n],b[j]=l[j]}return b}function w(b){var c={},d,f;while(b){d=a.data(b,e);for(f in d)d[f]&&(c[f]=c.hasVirtualBinding=!0);b=b.parentNode}return c}function x(b,c){var d;while(b){d=a.data(b,e);if(d&&(!c||d[c]))return b;b=b.parentNode}return null}function y(){p=!1}function z(){p=!0}function A(){t=0,n.length=0,o=!1,z()}function B(){y()}function C(){D(),j=setTimeout(function(){j=0,A()},a.vmouse.resetTimerDuration)}function D(){j&&(clearTimeout(j),j=0)}function E(b,c,d){var e;if(d&&d[b]||!d&&x(c.target,b))e=v(c,b),a(c.target).trigger(e);return e}function F(b){var c=a.data(b.target,f);if(!o&&(!t||t!==c)){var d=E("v"+b.type,b);d&&(d.isDefaultPrevented()&&b.preventDefault(),d.isPropagationStopped()&&b.stopPropagation(),d.isImmediatePropagationStopped()&&b.stopImmediatePropagation())}}function G(b){var c=u(b).touches,d,e;if(c&&c.length===1){d=b.target,e=w(d);if(e.hasVirtualBinding){t=s++,a.data(d,f,t),D(),B(),m=!1;var g=u(b).touches[0];k=g.pageX,l=g.pageY,E("vmouseover",b,e),E("vmousedown",b,e)}}}function H(a){if(p)return;m||E("vmousecancel",a,w(a.target)),m=!0,C()}function I(b){if(p)return;var c=u(b).touches[0],d=m,e=a.vmouse.moveDistanceThreshold;m=m||Math.abs(c.pageX-k)>e||Math.abs(c.pageY-l)>e,flags=w(b.target),m&&!d&&E("vmousecancel",b,flags),E("vmousemove",b,flags),C()}function J(a){if(p)return;z();var b=w(a.target),c;E("vmouseup",a,b);if(!m){var d=E("vclick",a,b);d&&d.isDefaultPrevented()&&(c=u(a).changedTouches[0],n.push({touchID:t,x:c.clientX,y:c.clientY}),o=!0)}E("vmouseout",a,b),m=!1,C()}function K(b){var c=a.data(b,e),d;if(c)for(d in c)if(c[d])return!0;return!1}function L(){}function M(b){var c=b.substr(1);return{setup:function(d,f){K(this)||a.data(this,e,{});var g=a.data(this,e);g[b]=!0,i[b]=(i[b]||0)+1,i[b]===1&&r.bind(c,F),a(this).bind(c,L),q&&(i.touchstart=(i.touchstart||0)+1,i.touchstart===1&&r.bind("touchstart",G).bind("touchend",J).bind("touchmove",I).bind("scroll",H))},teardown:function(d,f){--i[b],i[b]||r.unbind(c,F),q&&(--i.touchstart,i.touchstart||r.unbind("touchstart",G).unbind("touchmove",I).unbind("touchend",J).unbind("scroll",H));var g=a(this),h=a.data(this,e);h&&(h[b]=!1),g.unbind(c,L),K(this)||g.removeData(e)}}}var e="virtualMouseBindings",f="virtualTouchID",g="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),h="clientX clientY pageX pageY screenX screenY".split(" "),i={},j=0,k=0,l=0,m=!1,n=[],o=!1,p=!1,q="addEventListener"in c,r=a(c),s=1,t=0;a.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var N=0;N<g.length;N++)a.event.special[g[N]]=M(g[N]);q&&c.addEventListener("click",function(b){var c=n.length,d=b.target,e,g,h,i,j,k;if(c){e=b.clientX,g=b.clientY,threshold=a.vmouse.clickDistanceThreshold,h=d;while(h){for(i=0;i<c;i++){j=n[i],k=0;if(h===d&&Math.abs(j.x-e)<threshold&&Math.abs(j.y-g)<threshold||a.data(h,f)===j.touchID){b.preventDefault(),b.stopPropagation();return}}h=h.parentNode}}},!0)}(jQuery,window,document),jQuery.extend(KhanUtil,{negParens:function(a){return a<0?"("+a+")":a},decimalFraction:function(a,b,c,d,e){var f=KhanUtil.toFraction(a);return KhanUtil.fraction(f[0],f[1],b,c,d,e)},reduce:function(a,b){var c=KhanUtil.getGCD(a,b);return a/=c,b/=c,[a,b]},toFractionTex:function(a,b){var c=KhanUtil.toFraction(a);return c[1]===1?c[0]:"\\"+(b?"d":"")+"frac{"+c[0]+"}{"+c[1]+"}"},fraction:function(a,b,c,d,e,f){var g=function(a,b){return(e?"\\frac":"\\dfrac")+"{"+a+"}{"+b+"}"},h=a*b<0,i=h?"-":"";a=Math.abs(a),b=Math.abs(b);if(d){var j=KhanUtil.getGCD(a,b);a/=j,b/=j}c=c&&(a===0||b===0||b===1),f=f&&(!c||h);var k=f?"\\left(":"",l=f?"\\right)":"",m;return c?a===0?m="0":b===0?m="\\text{undefined}":b===1&&(m=i+a):m=i+g(a,b),k+m+l},mixedFractionFromImproper:function(a,b,c,d,e,f){return KhanUtil.mixedFraction(Math.floor(a/b),a%b,b,c,d,e,f)},mixedFraction:function(a,b,c,d,e,f,g){var h=a?a:0,i=b?b:0,j=c?c:1;if(h<0&&i<0)throw"NumberFormatException: Both integer portion and fraction cannot both be negative.";if(j<0)throw"NumberFormatException: Denominator cannot be be negative.";if(j===0)throw"NumberFormatException: Denominator cannot be be 0.";return e&&(h<0?h-=Math.floor(i/j):h+=Math.floor(i/j),i%=j),h!==0&&i!==0?h+" "+KhanUtil.fraction(b,c,d,e,f,g):h!==0&&i===0?h:h===0&&i!==0?KhanUtil.fraction(b,c,d,e,f,g):0},fractionReduce:function(a,b,c,d){return KhanUtil.fraction(a,b,!0,!0,c,d)},fractionSmall:function(a,b,c,d,e){return KhanUtil.fraction(a,b,c,d,!0,e)},piFraction:function(a){if(a.constructor===Number){var b=KhanUtil.toFraction(a/Math.PI,.001),c=b[0],d=b[1];return d===1?c+"\\pi":KhanUtil.fractionSmall(c,d)+"\\pi"}},reduces:function(a,b){return KhanUtil.getGCD(a,b)>1},fractionSimplification:function(a,b){var c="\\frac{"+a+"}{"+b+"}";if(b<=1||KhanUtil.getGCD(a,b)>1)c+=" = "+KhanUtil.fractionReduce(a,b);return c},mixedOrImproper:function(a,b){if(a<b||KhanUtil.rand(2)>0)return KhanUtil.fraction(a,b);var c=Math.floor(a/b);return c+KhanUtil.fraction(a-b*c,b)},splitRadical:function(a){if(a===0)return[0,1];var b=1,c=a;for(var d=2;d*d<=a;d++)while(c%(d*d)===0)c/=d*d,b*=d;return[b,c]},formattedSquareRootOf:function(a){if(a===1||a===0)return a.toString();var b=KhanUtil.splitRadical(a),c=b[0]===1?"":b[0].toString(),d=b[1]===1?"":"\\sqrt{"+b[1]+"}";return c+d},squareRootCanSimplify:function(a){return KhanUtil.formattedSquareRootOf(a)!=="\\sqrt{"+a+"}"},cardinal:function(a){var b=["","thousand","million","billion","trillion","quadrillion","quintillion","sextillion","septillion","octillion","nonillion"
,"decillion","undecillion","duodecillion","tredecillion","quattuordecillion","quindecillion","sexdecillion","septendecillion","octodecillion","novemdecillion","vigintillion"],c=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],d=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],e=function(a){var b=Math.floor(a/100),e=a%100,f="";b&&(f+=c[b]+" hundred"),b&&e&&(f+=" ");if(e)if(e<20)f+=c[e];else{var g=Math.floor(e/10),h=e%10;g&&(f+=d[g]),g&&h&&(f+="-"),h&&(f+=c[h])}return f};if(a===0)return"zero";var f=!1;a<0&&(f=!0,a=Math.abs(a));var g=[],h=0;while(a>0){var i=a%1e3;i>0&&(h>0&&g.unshift(b[h]),g.unshift(e(i))),a=Math.floor(a/1e3),h+=1}return f&&g.unshift("negative"),g.join(" ")},kardinaal:function(a){if(a>=1e4)return a;var b=["","een","twee","drie","vier","vijf","zes","zeven","acht","negen"],c=["","tien","twintig","dertig","veertig","vijftig","zestig","zeventig","tachtig","negentig"],d=["tien","elf","twaalf","dertien","veertien"],e="";return n4=Math.floor(a/1e3),n3=Math.floor(a%1e3/100),n2=Math.floor(a%100/10),n1=a%10,n4>=1&&(n4>=2&&(e+=b[n4]),e+="duizend "),n3>=1&&(n3>=2&&(e+=b[n3]),e+="honderd "),n2>=2?n1>=1?n1==2||n1==3?e+=b[n1]+"&euml;n"+c[n2]:e+=b[n1]+"en"+c[n2]:e+=c[n2]:n2==1?n1>=5?e+=b[n1]+c[n2]:e+=d[n1]:n1>=1&&(e+=b[n1]),e},Cardinal:function(a){var b=KhanUtil.cardinal(a);return b.charAt(0).toUpperCase()+b.slice(1)},quadraticRoots:function(a,b,c){var d=KhanUtil.splitRadical(b*b-4*a*c),e="x =";if(b*b-4*a*c===0)e+=KhanUtil.fraction(-b,2*a,!0,!0,!0);else if(d[0]===1)e+=KhanUtil.expr(["frac",["+-",-b,["sqrt",d[1]]],2*a]);else if(d[1]===1)e+=KhanUtil.fraction(-b+d[0],2*a,!0,!0,!0)+","+KhanUtil.fraction(-b-d[0],2*a,!0,!0,!0);else{var f=KhanUtil.getGCD(b,2*a,d[0]);f===Math.abs(2*a)?e+=KhanUtil.expr(["+-",-b/(2*a),["*",d[0]/f,["sqrt",d[1]]]]):e+=KhanUtil.expr(["frac",["+-",-b/f,["*",d[0]/f,["sqrt",d[1]]]],2*a/f])}return e},commafy:function(a){var b=a.toString().split(".");return b[0].length>=5&&(b[0]=b[0].replace(/(\d)(?=(\d{3})+$)/g,"$1{,}")),b[1]&&b[1].length>=5&&(b[1]=b[1].replace(/(\d{3})(?=\d)/g,"$1\\;")),b.join(",")},plus:function(){var a=[],b;for(var c=0;c<arguments.length;c++)b=KhanUtil._plusTrim(arguments[c]),b&&a.push(b);return a.length>0?a.join(" + "):"0"},_plusTrim:function(a){if(typeof a=="string"&&isNaN(a)){if(a.indexOf("{")!==-1){var b,c;return b=a.indexOf("{",a.indexOf("{")+1)+1,c=a.indexOf("}",a.indexOf("}")+1),b!==a.lastIndexOf("{")+1&&+KhanUtil._plusTrim(a.slice(b,c))===1?a.indexOf("\\")!==-1?a.slice(0,a.indexOf("\\"))+a.slice(c+1):a.slice(c+1):a.slice(0,b)+KhanUtil._plusTrim(a.slice(b,c))+a.slice(c)}return a.indexOf("1")===0&&isNaN(a[1])?a.slice(1):a.indexOf("-1")===0&&isNaN(a[2])?"-"+a.slice(2):a.indexOf("0")===0||a.indexOf("-0")===0?"":a}if(typeof a=="number")return a;if(!isNaN(a))return+a},randVar:function(){return KhanUtil.randFromArray(["x","k","y","a","n","r","p","u","v"])}}),jQuery.extend(KhanUtil,{cleanMath:function(a){return typeof a=="string"?KhanUtil.tmpl.cleanHTML(a).replace(/\+ -/g,"- ").replace(/- -/g,"+ ").replace(/\^1/g,""):a},rand:function(a){return Math.floor(a*KhanUtil.random())},digits:function(a){if(a===0)return[0];var b=[];while(a>0)b.push(a%10),a=Math.floor(a/10);return b},integerToDigits:function(a){return KhanUtil.digits(a).reverse()},digitsToInteger:function(a){var b=Math.floor(Math.pow(10,a.length-1)),c=0;return jQuery.each(a,function(a,d){c+=d*b,b/=10}),c},padDigitsToNum:function(a,b){a=a.slice(0);while(a.length<b)a.push(0);return a},placesLeftOfDecimal:["hele getal","tiental","honderdtal","duizendtal"],placesRightOfDecimal:["hele getal","tiende","honderdste","duizendste"],powerToPlace:function(a){return a<0?KhanUtil.placesRightOfDecimal[-1*a]:KhanUtil.placesLeftOfDecimal[a]},roundTowardsZero:function(a){return a<0?Math.ceil(a-.001):Math.floor(a+.001)},getGCD:function(a,b){if(arguments.length>2){var c=[].slice.call(arguments,1);return KhanUtil.getGCD(a,KhanUtil.getGCD.apply(KhanUtil,c))}var d;a=Math.abs(a),b=Math.abs(b);while(b)d=a%b,a=b,b=d;return a},getLCM:function(a,b){if(arguments.length>2){var c=[].slice.call(arguments,1);return KhanUtil.getLCM(a,KhanUtil.getLCM.apply(KhanUtil,c))}return Math.abs(a*b)/KhanUtil.getGCD(a,b)},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],getPrime:function(){return KhanUtil.primes[KhanUtil.rand(KhanUtil.primes.length)]},isPrime:function(a){if(a<=1)return!1;if(a<101)return!!jQuery.grep(KhanUtil.primes,function(b,c){return Math.abs(b-a)<=.5}).length;if(a<=1||a>2&&a%2===0)return!1;for(var b=3,c=Math.sqrt(a);b<=c;b+=2)if(a%b===0)return!1;return!0},isOdd:function(a){return a%2===1},isEven:function(a){return a%2===0},getOddComposite:function(a,b){a===undefined&&(a=0),b===undefined&&(b=100);var c=[9,15,21,25,27,33,35,39,45,49,51,55];c=c.concat([57,63,65,69,75,77,81,85,87,91,93,95,99]);var d=-1;while(d<a||d>b)d=c[KhanUtil.rand(c.length)];return d},getEvenComposite:function(a,b){a===undefined&&(a=0),b===undefined&&(b=100);var c=[4,6,8,10,12,14,16,18,20,22,24,26];c=c.concat([28,30,32,34,36,38,40,42,44,46,48]),c=c.concat([50,52,54,56,58,60,62,64,66,68,70,72]),c=c.concat([74,76,78,80,82,84,86,88,90,92,94,96,98]);var d=-1;while(d<a||d>b)d=c[KhanUtil.rand(c.length)];return d},getComposite:function(){return KhanUtil.randRange(0,1)?KhanUtil.getEvenComposite():KhanUtil.getOddComposite()},getPrimeFactorization:function(a){if(a===1)return[];if(KhanUtil.isPrime(a))return[a];var b=Math.sqrt(a);for(var c=2;c<=b;c++)if(a%c===0)return jQuery.merge(KhanUtil.getPrimeFactorization(c),KhanUtil.getPrimeFactorization(a/c))},getFactors:function(a){var b=[],c=function(a){_(b).indexOf(a)===-1&&b.push(a)},d=a;for(var e=1;e*e<=d;e++)a%e===0&&(c(e),c(a/e));return KhanUtil.sortNumbers(b)},getNontrivialFactor:function(a){var b=KhanUtil.getFactors(a);return b[KhanUtil.randRange(1,b.length-2)]},getMultiples:function(a,b){var c=[];for(var d=1;d*a<=b;d++)c.push(d*a);return c},splitRadical:function(a){if(a===0)return[0,1];var b=1,c=a;for(var d=2;d*d<=a;d++)while(c%(d*d)===0)c/=d*d,b*=d;return[b,c]},randRange:function(a,b){var c=[].slice.call(arguments,2);if(c.length===0)return Math.floor(KhanUtil.rand(b-a+1))+a;var d=[a,b].concat(c.slice(1));return jQuery.map(new Array(c[0]),function(){return[KhanUtil.randRange.apply(null,d)]})},randRangeUnique:function(a,b,c){if(c==null)return KhanUtil.randRange(a,b);var d=[];for(var e=a;e<b;e++)d.push(e);return KhanUtil.shuffle(d,c)},randRangeUniqueNonZero:function(a,b,c){if(c==null)return KhanUtil.randRangeNonZero(a,b);var d=[];for(var e=a;e<b;e++){if(e===0)continue;d.push(e)}return KhanUtil.shuffle(d,c)},randRangeWeighted:function(a,b,c,d){return KhanUtil.random()<d?c:KhanUtil.randRangeExclude(a,b,[c])},randRangeExclude:function(a,b,c){var d;do d=KhanUtil.randRange(a,b);while(_(c).indexOf(d)!==-1);return d},randRangeWeightedExclude:function(a,b,c,d,e){var f;do f=KhanUtil.randRangeWeighted(a,b,c,d);while(_(e).indexOf(f)!==-1);return f},randRangeNonZero:function(a,b){return KhanUtil.randRangeExclude(a,b,[0])},randFromArray:function(a,b){return b==null?a[KhanUtil.rand(a.length)]:jQuery.map(new Array(b),function(){return KhanUtil.randFromArray(a)})},randFromArrayExclude:function(a,b){var c=[];for(var d=0;d<a.length;d++)_(b).indexOf(a[d])===-1&&c.push(a[d]);return KhanUtil.randFromArray(c)},roundToNearest:function(a,b){return Math.round(b/a)*a},roundTo:function(a,b){var c=Math.pow(10,a).toFixed(5);return Math.round((b*c).toFixed(5))/c},floorTo:function(a,b){var c=Math.pow(10,a).toFixed(5);return Math.floor((b*c).toFixed(5))/c},ceilTo:function(a,b){var c=Math.pow(10,a).toFixed(5);return Math.ceil((b*c).toFixed(5))/c},toFraction:function(a,b){b==null&&(b=Math.pow(2,-46));if(a<0||a>1){var c=a%1;c+=c<0?1:0;var d=KhanUtil.toFraction(c,b);return d[0]+=Math.round(a-c)*d[1],d}if(Math.abs(Math.round(Number(a))-a)<=b)return[Math.round(a),1];var e=0,f=1,g=1,h=1,i=1,j=2;for(;;){if(Math.abs(Number(i/j)-a)<=b)return[i,j];i/j<a?(e=i,f=j):(g=i,h=j),i=e+g,j=f+h}},shuffle:function(a,b){a=[].slice.call(a,0);var c=typeof b=="undefined"||b>a.length?0:a.length-b;for(var d=a.length;d>c;d--){var e=Math.floor(KhanUtil.random()*d),f=a[e];a[e]=a[d-1],a[d-1]=f}return a.slice(c)},sortNumbers:function(a){return a.slice(0).sort(function(a,b){return a-b})},truncate_to_max:function(a,b){return parseFloat(a.toFixed(b))},restoreSign:function(a){return a=parseFloat(a),a<0?-1:1},isInt:function(a){return parseFloat(a)===parseInt(a,10)&&!isNaN(a)},BLUE:"#6495ED",ORANGE:"#FFA500",PINK:"#FF00AF",GREEN:"#28AE7B"}),jQuery.extend(KhanUtil,{updateMean:function(a){var b=KhanUtil.currentGraph;jQuery(b.graph.meanValueLabel).html(a).tmpl(),b.graph.meanArrow.translate(a*b.scale[0]-b.graph.meanArrow.attr("translation").x,0),b.graph.meanValueLabel.remove(),b.graph.meanValueLabel=b.label([a,.8],(a+"").replace(/-(\d)/g,"\\llap{-}$1"),"above",{color:KhanUtil.BLUE}),b.graph.meanLabel.remove(),b.graph.meanLabel=b.label([a,1.3],"\\text{gemiddelde}","above",{color:KhanUtil.BLUE}),b.graph.mean=a},updateMedian:function(a){var b=KhanUtil.currentGraph;b.graph.medianArrow.translate(a*b.scale[0]-b.graph.medianArrow.attr("translation").x,0),b.graph.medianValueLabel.remove(),b.graph.medianValueLabel=b.label([a,-1.2],(a+"").replace(/-(\d)/g,"\\llap{-}$1"),"below",{color:KhanUtil.GREEN}),b.graph.medianLabel.remove(),b.graph.medianLabel=b.label([a,-1.7],"\\text{mediaan}","below",{color:KhanUtil.GREEN}),b.graph.median=a},updateMeanAndMedian:function(){var a=KhanUtil.currentGraph.graph.points,b=KhanUtil.mean(jQuery.map(a,function(a){return a.coord[0]})),c=KhanUtil.median(jQuery.map(a,function(a){return a.coord[0]}));KhanUtil.updateMean(KhanUtil.roundTo(2,b)),KhanUtil.updateMedian(KhanUtil.roundTo(2,c))},updateMeanAndStddev:function(){var a=KhanUtil.currentGraph,b=KhanUtil.currentGraph.graph.points,c=KhanUtil.mean(jQuery.map(b,function(a){return a.coord[0]})),d=KhanUtil.stdDev(jQuery.map(b,function(a){return a.coord[0]}));c=KhanUtil.roundTo(1,c),d=KhanUtil.roundTo(1,d),a.graph.stddevLeft.translate(c*a.scale[0]-a.graph.stddevLeft.attr("translation").x,0),a.graph.stddevRight.translate((c+d)*a.scale[0]-a.graph.stddevRight.attr("translation").x,0),a.graph.stddevLine.translate(c*a.scale[0]-a.graph.stddevLine.attr("translation").x,0),a.graph.stddevLine.scale(d,1,a.graph.stddevLine.attr("path")[0][1],a.graph.stddevLine.attr("path")[0][2]),a.graph.stddevValueLabel.remove(),a.graph.stddevValueLabel=a.label([d/2+c,-1.3],"s \\approx "+d,"below",{color:KhanUtil.GREEN});if(d>0){a.style({strokeWidth:2,stroke:"#bbb",fill:null,"plot-points":100},function(){a.graph.pdf.remove(),a.graph.pdf=a.plot(function(a){return KhanUtil.gaussianPDF(c,d,a)*5-.2},[-7,7]).toBack()}),a.style({strokeWidth:2,stroke:KhanUtil.BLUE,fill:null},function(){a.graph.meanLine.remove(),a.graph.meanLine=a.line([c,-0.2],[c,KhanUtil.gaussianPDF(c,d,c)*5-.2]).toBack()}),a.graph.meanValueLabel.remove(),a.graph.meanValueLabel=a.label([c,KhanUtil.gaussianPDF(c,d,c)*5-.2],"\\bar{x} \\approx "+c,"above",{color:KhanUtil.BLUE});var b=[];b.push([c-d,-0.2]),b.push([c-d,KhanUtil.gaussianPDF(c,d,c-d)*5-.2]);var e=d/50;for(var f=c-d;f<=c+d;f+=e)b.push([f,KhanUtil.gaussianPDF(c,d,f)*5-.2]);b.push([c+d,KhanUtil.gaussianPDF(c,d,c+d)*5-.2]),b.push([c+d,-0.2]),a.style({strokeWidth:0,stroke:null,fill:KhanUtil.GREEN,opacity:.3},function(){a.graph.stddevArea.remove(),a.graph.stddevArea=a.path(b).toBack()})}else a.graph.pdf.remove(),a.graph.pdf=KhanUtil.bogusShape;a.graph.mean=c,a.graph.stddev=d},onMovePoint:function(a,b,c,d){var e=KhanUtil.currentGraph.graph.points;if(a.coord[0]!==b){if(b<-7||b>7)return!1;a.coord=[b,0];var f={};return f[Math.round(b*2)/2]=[a],jQuery.each(e,function(){if(this!==a){var b=Math.round(this.coord[0]*2)/2;jQuery.isArray(f[b])||(f[b]=[]),f[b].push(this)}}),jQuery.isFunction(d)&&d(),jQuery.each(f,function(a,b){b=b.sort(function(a,b){return a.coord[1]-b.coord[1]}),jQuery.each(b,function(a,b){d!==undefined?b.moveTo(b.coord[0],.3*a):b.setCoord([b.coord[0],.3*a])})}),[b,0]}},arrangePointsAroundMedian:function(){var a=KhanUtil.currentGraph,b=a.graph.points,c=a.graph.targetMedian,d=a.graph.numPoints,e=Math.min(Math.abs(-7-c),Math.abs(7-c)),f=.5,g=[];d%2===0?(g.push(c+f),g.push(c-f),f+=.5):g.push(c);while(g.length<b.length)g.push(c+f),g.push(c-f),f>=e?f=.5:f+=.5;return KhanUtil.sortNumbers(g)},animatePoints:function(a,b,c,d){var e=KhanUtil.currentGraph,f=e.graph.points,g=f.sort(function(a,b){return a.coord[0]-b.coord[0]});jQuery.each(a,function(a,c){jQuery({0:c}).animate({0:b[a]},{duration:500,step:function(b,c){KhanUtil.onMovePoint(g[a],b,0)}})}),jQuery({median:e.graph.median,mean:e.graph.mean}).animate({median:c,mean:d},{duration:500,step:function(a,b){b.prop==="median"?KhanUtil.updateMedian(KhanUtil.roundTo(2,a)):b.prop==="mean"&&KhanUtil.updateMean(KhanUtil.roundTo(2,a))}})},showMedianExample:function(a){var b=KhanUtil.currentGraph.graph.points,c=KhanUtil.currentGraph.graph.targetMedian,d=Math.min(Math.abs(-7-c),Math.abs(7-c)),e=b.sort(function(a,b){return a.coord[0]-b.coord[0]}),f=[];jQuery.each(e,function(a,b){f.push(b.coord[0])});var g=KhanUtil.arrangePointsAroundMedian();KhanUtil.animatePoints(f,g,c,c),KhanUtil.currentGraph.graph.moved=!0},showMeanExample:function(){var a=KhanUtil.currentGraph,b=a.graph.points,c=function(a){var b=0;return jQuery.each(a,function(){b+=this}),b/=a.length,b},d=b.sort(function(a,b){return a.coord[0]-b.coord[0]}),e=[],f=[];jQuery.each(d,function(a,b){e.push(b.coord[0])});var f=KhanUtil.arrangePointsAroundMedian(),g=c(f);while(g!=a.graph.targetMean){if(g<a.graph.targetMean){var h=f.length-1;while(f[h]===7&&h>b.length/2)--h;h<=b.length/2&&(h=0),f[h]+=.5}else{var h=0;while(f[h]===-7&&h<b.length/2-1)++h;h>=b.length/2-1&&(h=f.length-1),f[h]-=.5}g=c(f),f=KhanUtil.sortNumbers(f)}KhanUtil.animatePoints(e,f,a.graph.targetMedian,a.graph.targetMean),KhanUtil.currentGraph.graph.moved=!0},showStddevExample:function(){var a=KhanUtil.currentGraph.graph.points,b=KhanUtil.currentGraph.graph.targetStddev,c=a.sort(function(a,b){return a.coord[0]-b.coord[0]}),d=[];jQuery.each(c,function(a,b){d.push(b.coord[0])});var e=new Array(a.length),f=0;do e=jQuery.map(e,function(){return KhanUtil.roundToNearest(.5,KhanUtil.randGaussian()*b)}),e=KhanUtil.sortNumbers(e),++f;while(f<1e3&&(KhanUtil.roundTo(1,KhanUtil.mean(e)!==0)||KhanUtil.roundTo(1,KhanUtil.stdDev(e))!==b||_.isEqual(d,e)));f===1e3&&(e=d.slice()),jQuery.each(d,function(a,b){jQuery({0:b}).animate({0:e[a]},{duration:500,step:function(b,d){KhanUtil.onMovePoint(c[a],b,0)}})}),jQuery({0:0}).animate({0:1},{duration:600,step:function(a,b){KhanUtil.updateMeanAndStddev()}}),KhanUtil.currentGraph.graph.moved=!0}}),jQuery.extend(KhanUtil,{NL:{werkwoordmap:[[["barsten","barst"],["bedriegen","bedrieg"],["bergen","berg"],["bezwijken","bezwijk"],["bieden","bied"],["bijten","bijt"],["binden","bind"],["blijken","blijk"],["blinken","blink"],["bouwen","bouw"],["breien","brei"],["brengen","breng"],["brouwen","brouw"],["buigen","buig"],["denken","denk"],["dringen","dring"],["drinken","drink"],["druipen","druip"],["duiken","duik"],["dwingen","dwing"],["fietsen","fiets"],["fluiten","fluit"],["gelden","geld"],["genieten","geniet"],["gieten","giet"],["glijden","glijd"],["grijpen","grijp"],["hangen","hang"],["helpen","help"],["hijsen","hijs"],["houden","houd"],["kijken","kijk"],["klinken","klink"],["knijpen","knijp"],["komen","kom"],["krijgen","krijg"],["krijsen","krijs"],["krimpen","krimp"],["kruipen","kruip"],["lachen","lach"],["liegen","lieg"],["lijden","lijd"],["lijken","lijk"],["melken","melk"],["mijden","mijd"],["moeten","moet"],["rijden","rijd"],["rijgen","rijg"],["roepen","roep"],["ruiken","ruik"],["scheiden","scheid"],["schelden","scheld"],["schenden","schend"],["schenken","schenk"],["schieten","schiet"],["schijnen","schijn"],["schijten","schijt"],["schrijden","schrijd"],["schuilen","schuil"],["slijpen","slijp"],["slijten","slijt"],["slinken","slink"],["sluipen","sluip"],["sluiten","sluit"],["smelten","smelt"],["smijten","smijt"],["snijden","snijd"],["snuiten","snuit"],["splijten","splijt"],["springen","spring"],["spuiten","spuit"],["stijgen","stijg"],["stinken","stink"],["strijden","strijd"],["strijken","strijk"],["vangen","vang"],["vechten","vecht"],["verdwijnen","verdwijn"],["verslinden","verslind"],["verzwelgen","verzwelg"],["vinden","vind"],["vlechten","vlecht"],["vliegen","vlieg"],["vluchten","vlucht"],["vouwen","vouw"],["vrijen","vrij"],["waaien","waai"],["werken","werk"],["werpen","werp"],["wijken","wijk"],["wijten","wijt"],["winden","wind"],["worden","word"],["wringen","wring"],["zeiken","zeik"],["zenden","zend"],["zingen","zing"],["zinken","zink"],["zoeken","zoek"],["zouten","zout"],["zuigen","zuig"],["zuipen","zuip"],["zwaaien","zwaai"],["zwijgen","zwijg"]],[["bevelen","beveel"],["braden","braad"],["breken","breek"],["dragen","draag"],["ervaren","ervaar"],["eten","eet"],["heten","heet"],["jagen","jaag"],["klagen","klaag"],["kopen","koop"],["laden","laad"],["laten","laat"],["lopen","loop"],["meten","meet"],["nemen","neem"],["plegen","pleeg"],["raden","raad"],["raken","raak"],["scheren","scheer"],["slapen","slaap"],["spreken","spreek"],["spugen","spuug"],["steken","steek"],["stelen","steel"],["stoten","stoot"],["treden","treed"],["varen","vaar"],["vergeten","vergeet"],["vragen","vraag"],["vreten","vreet"],["wegen","weeg"],["weten","weet"],["wreken","wreek"],["zweren","zweer"],["zweten","zweet"]],[["bakken","bak"],["bannen","ban"],["beginnen","begin"],["glimmen","glim"],["heffen","hef"],["klimmen","klim"],["leggen","leg"],["liggen","lig"],["scheppen","schep"],["schrikken","schrik"],["spannen","span"],["spinnen","spin"],["treffen","tref"],["trekken","trek"],["vallen","val"],["wassen","was"],["willen","wil"],["winnen","win"],["zeggen","zeg"],["zinnen","zin"],["zitten","zit"],["zwellen","zwel"],["zwemmen","zwem"]],[["zijn","ben"]]]},randomWerkwoordset:function(a){return a--,this.NL.werkwoordmap[a][Math.floor(Math.random()*this.NL.werkwoordmap[a].length)]},shuffle:function(a,b){a=[].slice.call(a,0);var c=typeof b=="undefined"||b>a.length?0:a.length-b;for(var d=a.length;d>c;d--){var e=Math.floor(KhanUtil.random()*d),f=a[e];a[e]=a[d-1],a[d-1]=f}return a.slice(c)}}),jQuery.extend(KhanUtil,{doParabolaInteraction:function(a,b,c){var d=KhanUtil.currentGraph,e=KhanUtil.bogusShape,f=KhanUtil.bogusShape,g=KhanUtil.bogusShape,h=!1;a.onMove=function(a,i){e.remove(),f.remove(),g.remove(),d.style({strokeWidth:1.5,stroke:KhanUtil.GREEN,opacity:0});var j=KhanUtil.distance([a,i],b.coord);e=d.line([a,i],b.coord),c.coord<i?(f=d.line([a,i],[a,i-j]),g=d.line([a-.05,i-j],[a+.05,i-j])):(f=d.line([a,i],[a,i+j]),g=d.line([a-.05,i+j],[a+.05,i+j])),e.toBack(),f.toBack(),h?(e.attr({opacity:1}),f.attr({opacity:1}),g.attr({opacity:1})):(e.animate({opacity:1},100),f.animate({opacity:1},100),g.animate({opacity:1},100)),h=!0},a.onLeave=function(a,b){e.animate({opacity:0},100),f.animate({opacity:0},100),g.animate({opacity:0},100),h=!1}}}),jQuery.extend(KhanUtil,{Polynomial:function(a,b,c,d,e){var f=function(a,b,c){return typeof a=="undefined"||a===0?null:c===0?a:c===1?["*",a,b]:["*",a,["^",b,c]]},g=function(a){var b,c;return typeof a=="number"?(b=a,c=0):jQuery.isArray(a)&&!jQuery.isArray(a[2])?(b=a[1],c=1):jQuery.isArray(a)&&jQuery.isArray(a[2])&&(b=a[1],c=a[2][2]),{coef:b,degree:c}};return b>=a?(this.minDegree=a,this.maxDegree=b):(this.minDegree=b,this.maxDegree=a),this.coefs=c||KhanUtil.randCoefs(this.minDegree,this.maxDegree),this.variable=typeof d!="undefined"?d:"x",this.name=e||"f",this.findMaxDegree=function(a){if(!!a){for(var b=a.length-1;b>=0;b--)if(a[b]!==0)return b;return-1}for(var b=this.maxDegree;b>=this.minDegree;b--)if(this.coefs[b]!==0)return b},this.findMinDegree=function(a){if(!!a){for(var b=0;b<a.length;b++)if(a[b]!==0)return b;return-1}for(var b=this.minDegree;b<=this.maxDegree;b++)if(this.coefs[b]!==0)return b},this.expr=function(a){typeof a=="undefined"&&(a=this.variable);var b=["+"];for(var c=this.maxDegree;c>=this.minDegree;c--){var d=f(this.coefs[c],a,c);d!=null&&b.push(d)}return b},this.getNumberOfTerms=function(){return this.expr().length-1},this.getCoefAndDegreeForTerm=function(a){var b=this.getNumberOfTerms();return a=(a%b+b)%b,g(this.expr()[a+1])},this.text=function(){return KhanUtil.expr(this.expr(this.variable))},this.toString=this.text,this.hintEvalOf=function(a){return KhanUtil.expr(this.expr(a))},this.evalOf=function(a){return KhanUtil.expr(this.expr(a),!0)},this.hint=function(a){var b=[];return b.push("<p><code>"+this.name+"("+a+") = "+this.hintEvalOf(a)+"</code></p>"),b.push("<p><code>"+this.name+"("+a+") = "+this.evalOf(a)+"</code></p>"),b},this.add=function(a){var b=[],c=Math.min(this.minDegree,a.minDegree),d=Math.max(this.maxDegree,a.maxDegree);for(var e=c;e<=d;e++){var f=0;f+=e<=this.maxDegree?this.coefs[e]:0,f+=e<=a.maxDegree?a.coefs[e]:0,b[e]=f}return new KhanUtil.Polynomial(c,d,b,this.variable)},this.subtract=function(a){return this.add(a.multiply(-1))},this.multiply=function(a){var b=[];if(typeof a=="number"){for(var c=0;c<this.coefs.length;c++)b[c]=this.coefs[c]*a;return new KhanUtil.Polynomial(this.minDegree,this.maxDegree,b,this.variable)}for(var c=this.minDegree;c<=this.maxDegree;c++){if(this.coefs[c]===0)continue;for(var d=a.minDegree;d<=a.maxDegree;d++){if(a.coefs[d]===0)continue;var e=this.coefs[c]*a.coefs[d];b[c+d]===undefined?b[c+d]=e:b[c+d]+=e}}for(var c=0;c<b.length;c++)b[c]===undefined&&(b[c]=0);return new KhanUtil.Polynomial(Math.min(this.minDegree,a.minDegree),b.length,b,this.variable)},this},CompositePolynomial:function(a,b,c,d,e,f,g){var h=new KhanUtil.Polynomial(a,b,c,d,e);jQuery.extend(this,h),g||(g=KhanUtil.randRangeNonZero(-5,5));var i=f.name+"("+this.variable+")",j=function(a,b){return a=jQuery.merge([],a),a[0]==="+"?a.push(b):a=["+",a,b],a};return this.expr=function(a){return j(h.expr(a),["*",g,i])},this.text=function(){return KhanUtil.expr(this.expr(this.variable))},this.toString=this.text,this.hintEvalOf=function(a,b){return b?KhanUtil.expr(j(h.expr(a),["*",g,f.evalOf(a)])):KhanUtil.expr(j(h.expr(a),["*",g,f.name+"("+a+")"]))},this.evalOf=function(a){return h.evalOf(a)+g*f.evalOf(a)},this.hint=function(a){var b=[];b.push("<p><code>"+this.name+"("+a+") = "+this.hintEvalOf(a)+"</code></p>");var c=f.name+"("+a+")";return b.push("<p>To solve for the value of <code>"+this.name+"</code>,"+"we need to solve for the value of <code>"+c+"</code>.</p>"),b=b.concat(f.hint(a)),b.push("<p>Okay, so <code>"+c+" = "+f.evalOf(a)+"</code>.</p>"),b.push("<p>That means <code>"+this.name+"("+a+") = "+this.hintEvalOf(a,!0)+"</code></p>"),b.push("<p><code>"+this.name+"("+a+") = "+this.evalOf(a)+"</code></p>"),b},this},randCoefs:function randCoefs(a,b){var c=[],d=!0;for(var e=b;e>=a;e--)c[e]=KhanUtil.randRange(-7,7),d=d&&c[e]===0;return d?randCoefs(a,b):c}}),jQuery.extend(KhanUtil,{coinFlips:function(a){if(a===0)return[["",0]];var b=KhanUtil.coinFlips(a-1),c=jQuery.map(b,function(a,b){var c=a[0],d=a[1];return[["H"+c,d+1]]}),d=jQuery.map(b,function(a,b){var c=a[0],d=a[1];return[["T"+c,d]]});return c.concat(d)},choose:function(a,b){if(typeof b=="number")return b*2>a?KhanUtil.choose(a,a-b):b>.5?KhanUtil.choose(a,b-1)*(a-b+1)/b:Math.abs(b)<=.5?1:0;var c=0;return jQuery.each(b,function(b,d){c+=KhanUtil.choose(a,d)}),c}}),function(){function a(){if(a.is(arguments[0],G)){var b=arguments[0],d=Vb[m](a,b.splice(0,3+a.is(b[0],E))),e=d.set();for(var g=0,h=b[w];g<h;g++){var i=b[g]||{};c[f](i.type)&&e[L](d[i.type]().attr(i))}return e}return Vb[m](a,arguments)}function hb(){var a=[],b=0;for(;b<32;b++)a[b]=(~~(y.random()*16))[H](16);return a[12]=4,a[16]=(a[16]&3|8)[H](16),"r-"+a[v]("")}function mb(a,b,c){function d(){var g=Array[e].slice.call(arguments,0),h=g[v]("►"),i=d.cache=d.cache||{},j=d.count=d.count||[];return i[f](h)?c?c(i[h]):i[h]:(j[w]>=1e3&&delete i[j.shift()],j[L](h),i[h]=a[m](b,g),c?c(i[h]):i[h])}return d}function pc(){return this.x+q+this.y}function Bc(b){return function(c,d,e,f){var g={back:b};return a.is(e,"function")?f=e:g.rot=e,c&&c.constructor==Nb&&(c=c.attrs.path),c&&(g.along=c),this.animate(g,d,f)}}function Cc(a,b,c,d,e,f){function m(a){return((i*a+h)*a+g)*a}function n(a,b){var c=o(a,b);return((l*c+k)*c+j)*c}function o(a,b){var c,d,e,f,j,k;for(e=a,k=0;k<8;k++){f=m(e)-a;if(B(f)<b)return e;j=(3*i*e+2*h)*e+g;if(B(j)<1e-6)break;e-=f/j}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=m(e);if(B(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}var g=3*b,h=3*(d-b)-g,i=1-g-h,j=3*c,k=3*(e-c)-j,l=1-j-k;return n(a,1/(200*f))}a.version="1.5.2";var b=/[, ]+/,c={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},d=/\{(\d+)\}/g,e="prototype",f="hasOwnProperty",g=document,h=window,i={was:Object[e][f].call(h,"Raphael"),is:h.Raphael},j=function(){this.customAttributes={}},k,l="appendChild",m="apply",n="concat",o="createTouch"in g,p="",q=" ",r=String,s="split",t="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[s](q),u={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},v="join",w="length",x=r[e].toLowerCase,y=Math,z=y.max,A=y.min,B=y.abs,C=y.pow,D=y.PI,E="number",F="string",G="array",H="toString",I="fill",J=Object[e][H],K={},L="push",M=/^url\(['"]?([^\)]+?)['"]?\)$/i,N=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,O={NaN:1,Infinity:1,"-Infinity":1},P=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Q=y.round,R="setAttribute",S=parseFloat,T=parseInt,U=" progid:DXImageTransform.Microsoft",V=r[e].toUpperCase,W={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},X={along:"along",blur:E,"clip-rect":"csv",cx:E,cy:E,fill:"colour","fill-opacity":E,"font-size":E,height:E,opacity:E,path:"path",r:E,rotation:"csv",rx:E,ry:E,scale:"csv",stroke:"colour","stroke-opacity":E,"stroke-width":E,translation:"csv",width:E,x:E,y:E},Y="replace",Z=/^(from|to|\d+%?)$/,$=/\s*,\s*/,_={hs:1,rg:1},ab=/,?([achlmqrstvxz]),?/gi,bb=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,cb=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,db=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,eb=function(a,b){return a.key-b.key};a.type=h.SVGAngle||g.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(a.type=="VML"){var fb=g.createElement("div"),gb;fb.innerHTML='<v:shape adj="1"/>',gb=fb.firstChild,gb.style.behavior="url(#default#VML)";if(!gb||typeof gb.adj!="object")return a.type=null;fb=null}a.svg=!(a.vml=a.type=="VML"),j[e]=a[e],k=j[e],a._id=0,a._oid=0,a.fn={},a.is=function(a,b){return b=x.call(b),b=="finite"?!O[f](+a):b=="null"&&a===null||b==typeof a||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||J.call(a).slice(8,-1).toLowerCase()==b},a.angle=function(b,c,d,e,f,g){if(f==null){var h=b-d,i=c-e;return!h&&!i?0:((h<0)*180+y.atan(-i/-h)*180/D+360)%360}return a.angle(b,c,f,g)-a.angle(d,e,f,g)},a.rad=function(a){return a%360*D/180},a.deg=function(a){return a*180/D%360},a.snapTo=function(b,c,d){d=a.is(d,"finite")?d:10;if(a.is(b,G)){var e=b.length;while(e--)if(B(b[e]-c)<=d)return b[e]}else{b=+b;var f=c%b;if(f<d)return c-f;if(f>b-d)return c-f+b}return c},a.setWindow=function(a){h=a,g=h.document};var ib=function(b){if(a.vml){var c=/^\s+|\s+$/g,d;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),d=e.body}catch(f){d=createPopup().document.body}var h=d.createTextRange();ib=mb(function(a){try{d.style.color=r(a)[Y](c,p);var b=h.queryCommandValue("ForeColor");return b=(b&255)<<16|b&65280|(b&16711680)>>>16,"#"+("000000"+b[H](16)).slice(-6)}catch(e){return"none"}})}else{var i=g.createElement("i");i.title="Raphaël Colour Picker",i.style.display="none",g.body[l](i),ib=mb(function(a){return i.style.color=a,g.defaultView.getComputedStyle(i,p).getPropertyValue("color")})}return ib(b)},jb=function(){return"hsb("+[this.h,this.s,this.b]+")"},kb=function(){return"hsl("+[this.h,this.s,this.l]+")"},lb=function(){return this.hex};a.hsb2rgb=function(b,c,d,e){return a.is(b,"object")&&"h"in b&&"s"in b&&"b"in b&&(d=b.b,c=b.s,b=b.h,e=b.o),a.hsl2rgb(b,c,d/2,e)},a.hsl2rgb=function(b,c,d,e){a.is(b,"object")&&"h"in b&&"s"in b&&"l"in b&&(d=b.l,c=b.s,b=b.h);if(b>1||c>1||d>1)b/=360,c/=100,d/=100;var f={},g=["r","g","b"],h,i,j,k,l,m;if(!c)f={r:d,g:d,b:d};else{d<.5?h=d*(1+c):h=d+c-d*c,i=2*d-h;for(var n=0;n<3;n++)j=b+1/3*-(n-1),j<0&&j++,j>1&&j--,j*6<1?f[g[n]]=i+(h-i)*6*j:j*2<1?f[g[n]]=h:j*3<2?f[g[n]]=i+(h-i)*(2/3-j)*6:f[g[n]]=i}return f.r*=255,f.g*=255,f.b*=255,f.hex="#"+(16777216|f.b|f.g<<8|f.r<<16).toString(16).slice(1),a.is(e,"finite")&&(f.opacity=e),f.toString=lb,f},a.rgb2hsb=function(b,c,d){c==null&&a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b&&(d=b.b,c=b.g,b=b.r);if(c==null&&a.is(b,F)){var e=a.getRGB(b);b=e.r,c=e.g,d=e.b}if(b>1||c>1||d>1)b/=255,c/=255,d/=255;var f=z(b,c,d),g=A(b,c,d),h,i,j=f;if(g==f)return{h:0,s:0,b:f,toString:jb};var k=f-g;return i=k/f,b==f?h=(c-d)/k:c==f?h=2+(d-b)/k:h=4+(b-c)/k,h/=6,h<0&&h++,h>1&&h--,{h:h,s:i,b:j,toString:jb}},a.rgb2hsl=function(b,c,d){c==null&&a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b&&(d=b.b,c=b.g,b=b.r);if(c==null&&a.is(b,F)){var e=a.getRGB(b);b=e.r,c=e.g,d=e.b}if(b>1||c>1||d>1)b/=255,c/=255,d/=255;var f=z(b,c,d),g=A(b,c,d),h,i,j=(f+g)/2,k;if(g==f)k={h:0,s:0,l:j};else{var l=f-g;i=j<.5?l/(f+g):l/(2-f-g),b==f?h=(c-d)/l:c==f?h=2+(d-b)/l:h=4+(b-c)/l,h/=6,h<0&&h++,h>1&&h--,k={h:h,s:i,l:j}}return k.toString=kb,k},a._path2string=function(){return this.join(",")[Y](ab,"$1")},a.getRGB=mb(function(b){if(!b||!!((b=r(b)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1};if(b=="none")return{r:-1,g:-1,b:-1,hex:"none"};!_[f](b.toLowerCase().substring(0,2))&&b.charAt()!="#"&&(b=ib(b));var c,d,e,g,h,i,j,k=b.match(N);return k?(k[2]&&(g=T(k[2].substring(5),16),e=T(k[2].substring(3,5),16),d=T(k[2].substring(1,3),16)),k[3]&&(g=T((i=k[3].charAt(3))+i,16),e=T((i=k[3].charAt(2))+i,16),d=T((i=k[3].charAt(1))+i,16)),k[4]&&(j=k[4][s]($),d=S(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=S(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),g=S(j[2]),j[2].slice(-1)=="%"&&(g*=2.55),k[1].toLowerCase().slice(0,4)=="rgba"&&(h=S(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100)),k[5]?(j=k[5][s]($),d=S(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=S(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),g=S(j[2]),j[2].slice(-1)=="%"&&(g*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="°")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsba"&&(h=S(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100),a.hsb2rgb(d,e,g,h)):k[6]?(j=k[6][s]($),d=S(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=S(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),g=S(j[2]),j[2].slice(-1)=="%"&&(g*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="°")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsla"&&(h=S(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100),a.hsl2rgb(d,e,g,h)):(k={r:d,g:e,b:g},k.hex="#"+(16777216|g|e<<8|d<<16).toString(16).slice(1),a.is(h,"finite")&&(k.opacity=h),k)):{r:-1,g:-1,b:-1,hex:"none",error:1}},a),a.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);return b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b})),c.hex},a.getColor.reset=function(){delete this.start},a.parsePathString=mb(function(b){if(!b)return null;var c={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];return a.is(b,G)&&a.is(b[0],G)&&(d=ob(b)),d[w]||r(b)[Y](bb,function(a,b,e){var f=[],g=x.call(b);e[Y](cb,function(a,b){b&&f[L](+b)}),g=="m"&&f[w]>2&&(d[L]([b][n](f.splice(0,2))),g="l",b=b=="m"?"l":"L");while(f[w]>=c[g]){d[L]([b][n](f.splice(0,c[g])));if(!c[g])break}}),d[H]=a._path2string,d}),a.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=C(j,3)*a+C(j,2)*3*i*c+j*3*i*i*e+C(i,3)*g,l=C(j,3)*b+C(j,2)*3*i*d+j*3*i*i*f+C(i,3)*h,m=a+2*i*(c-a)+i*i*(e-2*c+a),n=b+2*i*(d-b)+i*i*(f-2*d+b),o=c+2*i*(e-c)+i*i*(g-2*e+c),p=d+2*i*(f-d)+i*i*(h-2*f+d),q=(1-i)*a+i*c,r=(1-i)*b+i*d,s=(1-i)*e+i*g,t=(1-i)*f+i*h,u=90-y.atan((m-o)/(n-p))*180/D;return(m>o||n<p)&&(u+=180),{x:k,y:l,m:{x:m,y:n},n:{x:o,y:p},start:{x:q,y:r},end:{x:s,y:t},alpha:u}};var nb=mb(function(a){if(!a)return{x:0,y:0,width:0,height:0};a=wb(a);var b=0,c=0,d=[],e=[],f;for(var g=0
,h=a[w];g<h;g++){f=a[g];if(f[0]=="M")b=f[1],c=f[2],d[L](b),e[L](c);else{var i=vb(b,c,f[1],f[2],f[3],f[4],f[5],f[6]);d=d[n](i.min.x,i.max.x),e=e[n](i.min.y,i.max.y),b=f[5],c=f[6]}}var j=A[m](0,d),k=A[m](0,e);return{x:j,y:k,width:z[m](0,d)-j,height:z[m](0,e)-k}}),ob=function(b){var c=[];if(!a.is(b,G)||!a.is(b&&b[0],G))b=a.parsePathString(b);for(var d=0,e=b[w];d<e;d++){c[d]=[];for(var f=0,g=b[d][w];f<g;f++)c[d][f]=b[d][f]}return c[H]=a._path2string,c},pb=mb(function(b){if(!a.is(b,G)||!a.is(b&&b[0],G))b=a.parsePathString(b);var c=[],d=0,e=0,f=0,g=0,h=0;b[0][0]=="M"&&(d=b[0][1],e=b[0][2],f=d,g=e,h++,c[L](["M",d,e]));for(var i=h,j=b[w];i<j;i++){var k=c[i]=[],l=b[i];if(l[0]!=x.call(l[0])){k[0]=x.call(l[0]);switch(k[0]){case"a":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]-d).toFixed(3),k[7]=+(l[7]-e).toFixed(3);break;case"v":k[1]=+(l[1]-e).toFixed(3);break;case"m":f=l[1],g=l[2];default:for(var m=1,n=l[w];m<n;m++)k[m]=+(l[m]-(m%2?d:e)).toFixed(3)}}else{k=c[i]=[],l[0]=="m"&&(f=l[1]+d,g=l[2]+e);for(var o=0,p=l[w];o<p;o++)c[i][o]=l[o]}var q=c[i][w];switch(c[i][0]){case"z":d=f,e=g;break;case"h":d+=+c[i][q-1];break;case"v":e+=+c[i][q-1];break;default:d+=+c[i][q-2],e+=+c[i][q-1]}}return c[H]=a._path2string,c},0,ob),qb=mb(function(b){if(!a.is(b,G)||!a.is(b&&b[0],G))b=a.parsePathString(b);var c=[],d=0,e=0,f=0,g=0,h=0;b[0][0]=="M"&&(d=+b[0][1],e=+b[0][2],f=d,g=e,h++,c[0]=["M",d,e]);for(var i=h,j=b[w];i<j;i++){var k=c[i]=[],l=b[i];if(l[0]!=V.call(l[0])){k[0]=V.call(l[0]);switch(k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+d),k[7]=+(l[7]+e);break;case"V":k[1]=+l[1]+e;break;case"H":k[1]=+l[1]+d;break;case"M":f=+l[1]+d,g=+l[2]+e;default:for(var m=1,n=l[w];m<n;m++)k[m]=+l[m]+(m%2?d:e)}}else for(var o=0,p=l[w];o<p;o++)c[i][o]=l[o];switch(k[0]){case"Z":d=f,e=g;break;case"H":d=k[1];break;case"V":e=k[1];break;case"M":f=c[i][c[i][w]-2],g=c[i][c[i][w]-1];default:d=c[i][c[i][w]-2],e=c[i][c[i][w]-1]}}return c[H]=a._path2string,c},null,ob),rb=function(a,b,c,d){return[a,b,c,d,c,d]},sb=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},tb=function(a,b,c,d,e,f,g,h,i,j){var k=D*120/180,l=D/180*(+e||0),m=[],o,p=mb(function(a,b,c){var d=a*y.cos(c)-b*y.sin(c),e=a*y.sin(c)+b*y.cos(c);return{x:d,y:e}});if(!j){o=p(a,b,-l),a=o.x,b=o.y,o=p(h,i,-l),h=o.x,i=o.y;var q=y.cos(D/180*e),r=y.sin(D/180*e),t=(a-h)/2,u=(b-i)/2,x=t*t/(c*c)+u*u/(d*d);x>1&&(x=y.sqrt(x),c=x*c,d=x*d);var z=c*c,A=d*d,C=(f==g?-1:1)*y.sqrt(B((z*A-z*u*u-A*t*t)/(z*u*u+A*t*t))),E=C*c*u/d+(a+h)/2,F=C*-d*t/c+(b+i)/2,G=y.asin(((b-F)/d).toFixed(9)),H=y.asin(((i-F)/d).toFixed(9));G=a<E?D-G:G,H=h<E?D-H:H,G<0&&(G=D*2+G),H<0&&(H=D*2+H),g&&G>H&&(G-=D*2),!g&&H>G&&(H-=D*2)}else G=j[0],H=j[1],E=j[2],F=j[3];var I=H-G;if(B(I)>k){var J=H,K=h,L=i;H=G+k*(g&&H>G?1:-1),h=E+c*y.cos(H),i=F+d*y.sin(H),m=tb(h,i,c,d,e,0,g,K,L,[H,J,E,F])}I=H-G;var M=y.cos(G),N=y.sin(G),O=y.cos(H),P=y.sin(H),Q=y.tan(I/4),R=4/3*c*Q,S=4/3*d*Q,T=[a,b],U=[a+R*N,b-S*M],V=[h+R*P,i-S*O],W=[h,i];U[0]=2*T[0]-U[0],U[1]=2*T[1]-U[1];if(j)return[U,V,W][n](m);m=[U,V,W][n](m)[v]()[s](",");var X=[];for(var Y=0,Z=m[w];Y<Z;Y++)X[Y]=Y%2?p(m[Y-1],m[Y],l).y:p(m[Y],m[Y+1],l).x;return X},ub=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:C(j,3)*a+C(j,2)*3*i*c+j*3*i*i*e+C(i,3)*g,y:C(j,3)*b+C(j,2)*3*i*d+j*3*i*i*f+C(i,3)*h}},vb=mb(function(a,b,c,d,e,f,g,h){var i=e-2*c+a-(g-2*e+c),j=2*(c-a)-2*(e-c),k=a-c,l=(-j+y.sqrt(j*j-4*i*k))/2/i,n=(-j-y.sqrt(j*j-4*i*k))/2/i,o=[b,h],p=[a,g],q;return B(l)>"1e12"&&(l=.5),B(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=ub(a,b,c,d,e,f,g,h,l),p[L](q.x),o[L](q.y)),n>0&&n<1&&(q=ub(a,b,c,d,e,f,g,h,n),p[L](q.x),o[L](q.y)),i=f-2*d+b-(h-2*f+d),j=2*(d-b)-2*(f-d),k=b-d,l=(-j+y.sqrt(j*j-4*i*k))/2/i,n=(-j-y.sqrt(j*j-4*i*k))/2/i,B(l)>"1e12"&&(l=.5),B(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=ub(a,b,c,d,e,f,g,h,l),p[L](q.x),o[L](q.y)),n>0&&n<1&&(q=ub(a,b,c,d,e,f,g,h,n),p[L](q.x),o[L](q.y)),{min:{x:A[m](0,p),y:A[m](0,o)},max:{x:z[m](0,p),y:z[m](0,o)}}}),wb=mb(function(a,b){var c=qb(a),d=b&&qb(b),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][n](tb[m](0,[b.x,b.y][n](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][n](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][n](sb(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][n](sb(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][n](rb(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][n](rb(b.x,b.y,a[1],b.y));break;case"V":a=["C"][n](rb(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][n](rb(b.x,b.y,b.X,b.Y))}return a},h=function(a,b){if(a[b][w]>7){a[b].shift();var e=a[b];while(e[w])a.splice(b++,0,["C"][n](e.splice(0,6)));a.splice(b,1),k=z(c[w],d&&d[w]||0)}},i=function(a,b,e,f,g){a&&b&&a[g][0]=="M"&&b[g][0]!="M"&&(b.splice(g,0,["M",f.x,f.y]),e.bx=0,e.by=0,e.x=a[g][1],e.y=a[g][2],k=z(c[w],d&&d[w]||0))};for(var j=0,k=z(c[w],d&&d[w]||0);j<k;j++){c[j]=g(c[j],e),h(c,j),d&&(d[j]=g(d[j],f)),d&&h(d,j),i(c,d,e,f,j),i(d,c,f,e,j);var l=c[j],o=d&&d[j],p=l[w],q=d&&o[w];e.x=l[p-2],e.y=l[p-1],e.bx=S(l[p-4])||e.x,e.by=S(l[p-3])||e.y,f.bx=d&&(S(o[q-4])||f.x),f.by=d&&(S(o[q-3])||f.y),f.x=d&&o[q-2],f.y=d&&o[q-1]}return d?[c,d]:c},null,ob),xb=mb(function(b){var c=[];for(var d=0,e=b[w];d<e;d++){var f={},g=b[d].match(/^([^:]*):?([\d\.]*)/);f.color=a.getRGB(g[1]);if(f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),c[L](f)}for(d=1,e=c[w]-1;d<e;d++)if(!c[d].offset){var h=S(c[d-1].offset||0),i=0;for(var j=d+1;j<e;j++)if(c[j].offset){i=c[j].offset;break}i||(i=100,j=e),i=S(i);var k=(i-h)/(j-d+1);for(;d<j;d++)h+=k,c[d].offset=h+"%"}return c}),yb=function(b,c,d,e){var f;if(!a.is(b,F)&&!a.is(b,"object"))return{container:1,x:b,y:c,width:d,height:e};f=a.is(b,F)?g.getElementById(b):b;if(f.tagName)return c==null?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:c,height:d}},zb=function(a,b){var c=this;for(var d in b)if(b[f](d)&&!(d in a))switch(typeof b[d]){case"function":(function(b){a[d]=a===c?b:function(){return b[m](c,arguments)}})(b[d]);break;case"object":a[d]=a[d]||{},zb.call(this,a[d],b[d]);break;default:a[d]=b[d]}},Ab=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)},Bb=function(a,b){if(b.top===a)return;Ab(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a},Cb=function(a,b){if(b.bottom===a)return;Ab(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a},Db=function(a,b,c){Ab(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},Eb=function(a,b,c){Ab(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},Fb=function(a){return function(){throw new Error("Raphaël: you are calling to method “"+a+"” of removed object")}};a.pathToRelative=pb;if(a.svg){k.svgns="http://www.w3.org/2000/svg",k.xlink="http://www.w3.org/1999/xlink",Q=function(a){return+a+(~~a===a)*.5};var Gb=function(a,b){if(!b)return a=g.createElementNS(k.svgns,a),a.style.webkitTapHighlightColor="rgba(0,0,0,0)",a;for(var c in b)b[f](c)&&a[R](c,r(b[c]))};a[H]=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var Hb=function(a,b){var c=Gb("path");b.canvas&&b.canvas[l](c);var d=new Nb(c,b);return d.type="path",Kb(d,{fill:"none",stroke:"#000",path:a}),d},Ib=function(a,b,c){var d="linear",e=.5,f=.5,h=a.style;b=r(b)[Y](db,function(a,b,c){d="radial";if(b&&c){e=S(b),f=S(c);var g=(f>.5)*2-1;C(e-.5,2)+C(f-.5,2)>.25&&(f=y.sqrt(.25-C(e-.5,2))*g+.5)&&f!=.5&&(f=f.toFixed(5)-1e-5*g)}return p}),b=b[s](/\s*\-\s*/);if(d=="linear"){var i=b.shift();i=-S(i);if(isNaN(i))return null;var j=[0,0,y.cos(i*D/180),y.sin(i*D/180)],k=1/(z(B(j[2]),B(j[3]))||1);j[2]*=k,j[3]*=k,j[2]<0&&(j[0]=-j[2],j[2]=0),j[3]<0&&(j[1]=-j[3],j[3]=0)}var m=xb(b);if(!m)return null;var n=a.getAttribute(I);n=n.match(/^url\(#(.*)\)$/),n&&c.defs.removeChild(g.getElementById(n[1]));var o=Gb(d+"Gradient");o.id=hb(),Gb(o,d=="radial"?{fx:e,fy:f}:{x1:j[0],y1:j[1],x2:j[2],y2:j[3]}),c.defs[l](o);for(var q=0,t=m[w];q<t;q++){var u=Gb("stop");Gb(u,{offset:m[q].offset?m[q].offset:q?"100%":"0%","stop-color":m[q].color||"#fff"}),o[l](u)}return Gb(a,{fill:"url(#"+o.id+")",opacity:1,"fill-opacity":1}),h.fill=p,h.opacity=1,h.fillOpacity=1,1},Jb=function(b){var c=b.getBBox();Gb(b.pattern,{patternTransform:a.format("translate({0},{1})",c.x,c.y)})},Kb=function(c,d){var e={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},h=c.node,i=c.attrs,j=c.rotate(),k=function(a,b){b=e[x.call(b)];if(b){var c=a.attrs["stroke-width"]||"1",f={round:c,square:c,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],i=b[w];while(i--)g[i]=b[i]*c+(i%2?1:-1)*f;Gb(h,{"stroke-dasharray":g[v](",")})}};d[f]("rotation")&&(j=d.rotation);var m=r(j)[s](b);m.length-1?(m[1]=+m[1],m[2]=+m[2]):m=null,S(j)&&c.rotate(0,!0);for(var n in d)if(d[f](n)){if(!W[f](n))continue;var o=d[n];i[n]=o;switch(n){case"blur":c.blur(o);break;case"rotation":c.rotate(o,!0);break;case"href":case"title":case"target":var t=h.parentNode;if(x.call(t.tagName)!="a"){var u=Gb("a");t.insertBefore(u,h),u[l](h),t=u}n=="target"&&o=="blank"?t.setAttributeNS(c.paper.xlink,"show","new"):t.setAttributeNS(c.paper.xlink,n,o);break;case"cursor":h.style.cursor=o;break;case"clip-rect":var y=r(o)[s](b);if(y[w]==4){c.clip&&c.clip.parentNode.parentNode.removeChild(c.clip.parentNode);var z=Gb("clipPath"),A=Gb("rect");z.id=hb(),Gb(A,{x:y[0],y:y[1],width:y[2],height:y[3]}),z[l](A),c.paper.defs[l](z),Gb(h,{"clip-path":"url(#"+z.id+")"}),c.clip=A}if(!o){var B=g.getElementById(h.getAttribute("clip-path")[Y](/(^url\(#|\)$)/g,p));B&&B.parentNode.removeChild(B),Gb(h,{"clip-path":p}),delete c.clip}break;case"path":c.type=="path"&&Gb(h,{d:o?i.path=qb(o):"M0,0"});break;case"width":h[R](n,o);if(!i.fx)break;n="x",o=i.x;case"x":i.fx&&(o=-i.x-(i.width||0));case"rx":if(n=="rx"&&c.type=="rect")break;case"cx":m&&(n=="x"||n=="cx")&&(m[1]+=o-i[n]),h[R](n,o),c.pattern&&Jb(c);break;case"height":h[R](n,o);if(!i.fy)break;n="y",o=i.y;case"y":i.fy&&(o=-i.y-(i.height||0));case"ry":if(n=="ry"&&c.type=="rect")break;case"cy":m&&(n=="y"||n=="cy")&&(m[2]+=o-i[n]),h[R](n,o),c.pattern&&Jb(c);break;case"r":c.type=="rect"?Gb(h,{rx:o,ry:o}):h[R](n,o);break;case"src":c.type=="image"&&h.setAttributeNS(c.paper.xlink,"href",o);break;case"stroke-width":h.style.strokeWidth=o,h[R](n,o),i["stroke-dasharray"]&&k(c,i["stroke-dasharray"]);break;case"stroke-dasharray":k(c,o);break;case"translation":var C=r(o)[s](b);C[0]=+C[0]||0,C[1]=+C[1]||0,m&&(m[1]+=C[0],m[2]+=C[1]),Ac.call(c,C[0],C[1]);break;case"scale":C=r(o)[s](b),c.scale(+C[0]||1,+C[1]||+C[0]||1,isNaN(S(C[2]))?null:+C[2],isNaN(S(C[3]))?null:+C[3]);break;case I:var D=r(o).match(M);if(D){z=Gb("pattern");var E=Gb("image");z.id=hb(),Gb(z,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),Gb(E,{x:0,y:0}),E.setAttributeNS(c.paper.xlink,"href",D[1]),z[l](E);var F=g.createElement("img");F.style.cssText="position:absolute;left:-9999em;top-9999em",F.onload=function(){Gb(z,{width:this.offsetWidth,height:this.offsetHeight}),Gb(E,{width:this.offsetWidth,height:this.offsetHeight}),g.body.removeChild(this),c.paper.safari()},g.body[l](F),F.src=D[1],c.paper.defs[l](z),h.style.fill="url(#"+z.id+")",Gb(h,{fill:"url(#"+z.id+")"}),c.pattern=z,c.pattern&&Jb(c);break}var G=a.getRGB(o);if(!G.error)delete d.gradient,delete i.gradient,!a.is(i.opacity,"undefined")&&a.is(d.opacity,"undefined")&&Gb(h,{opacity:i.opacity}),!a.is(i["fill-opacity"],"undefined")&&a.is(d["fill-opacity"],"undefined")&&Gb(h,{"fill-opacity":i["fill-opacity"]});else if(({circle:1,ellipse:1}[f](c.type)||r(o).charAt()!="r")&&Ib(h,o,c.paper)){i.gradient=o,i.fill="none";break}G[f]("opacity")&&Gb(h,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=a.getRGB(o),h[R](n,G.hex),n=="stroke"&&G[f]("opacity")&&Gb(h,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity});break;case"gradient":((({circle:1,ellipse:1}))[f](c.type)||r(o).charAt()!="r")&&Ib(h,o,c.paper);break;case"opacity":i.gradient&&!i[f]("stroke-opacity")&&Gb(h,{"stroke-opacity":o>1?o/100:o});case"fill-opacity":if(i.gradient){var H=g.getElementById(h.getAttribute(I)[Y](/^url\(#|\)$/g,p));if(H){var J=H.getElementsByTagName("stop");J[J[w]-1][R]("stop-opacity",o)}break};default:n=="font-size"&&(o=T(o,10)+"px");var K=n[Y](/(\-.)/g,function(a){return V.call(a.substring(1))});h.style[K]=o,h[R](n,o)}}Mb(c,d),m?c.rotate(m.join(q)):S(j)&&c.rotate(j,!0)},Lb=1.2,Mb=function(b,c){if(b.type!="text"||!(c[f]("text")||c[f]("font")||c[f]("font-size")||c[f]("x")||c[f]("y")))return;var d=b.attrs,e=b.node,h=e.firstChild?T(g.defaultView.getComputedStyle(e.firstChild,p).getPropertyValue("font-size"),10):10;if(c[f]("text")){d.text=c.text;while(e.firstChild)e.removeChild(e.firstChild);var i=r(c.text)[s]("\n");for(var j=0,k=i[w];j<k;j++)if(i[j]){var m=Gb("tspan");j&&Gb(m,{dy:h*Lb,x:d.x}),m[l](g.createTextNode(i[j])),e[l](m)}}else{i=e.getElementsByTagName("tspan");for(j=0,k=i[w];j<k;j++)j&&Gb(i[j],{dy:h*Lb,x:d.x})}Gb(e,{y:d.y});var n=b.getBBox(),o=d.y-(n.y+n.height/2);o&&a.is(o,"finite")&&Gb(e,{y:d.y+o})},Nb=function(b,c){var d=0,e=0;this[0]=b,this.id=a._oid++,this.node=b,b.raphael=this,this.paper=c,this.attrs=this.attrs||{},this.transformations=[],this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},Ob=Nb[e];Nb[e].rotate=function(c,d,e){if(this.removed)return this;if(c==null)return this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][v](q):this._.rt.deg;var f=this.getBBox();return c=r(c)[s](b),c[w]-1&&(d=S(c[1]),e=S(c[2])),c=S(c[0]),d!=null&&d!==!1?this._.rt.deg=c:this._.rt.deg+=c,e==null&&(d=null),this._.rt.cx=d,this._.rt.cy=e,d=d==null?f.x+f.width/2:d,e=e==null?f.y+f.height/2:e,this._.rt.deg?(this.transformations[0]=a.format("rotate({0} {1} {2})",this._.rt.deg,d,e),this.clip&&Gb(this.clip,{transform:a.format("rotate({0} {1} {2})",-this._.rt.deg,d,e)})):(this.transformations[0]=p,this.clip&&Gb(this.clip,{transform:p})),Gb(this.node,{transform:this.transformations[v](q)}),this},Nb[e].hide=function(){return!this.removed&&(this.node.style.display="none"),this},Nb[e].show=function(){return!this.removed&&(this.node.style.display=""),this},Nb[e].remove=function(){if(this.removed)return;Ab(this,this.paper),this.node.parentNode.removeChild(this.node);for(var a in this)delete this[a];this.removed=!0},Nb[e].getBBox=function(){if(this.removed)return this;if(this.type=="path")return nb(this.attrs.path);if(this.node.style.display=="none"){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}if(this.type=="text"){b={x:b.x,y:Infinity,width:0,height:0};for(var d=0,e=this.node.getNumberOfChars();d<e;d++){var f=this.node.getExtentOfChar(d);f.y<b.y&&(b.y=f.y),f.y+f.height-b.y>b.height&&(b.height=f.y+f.height-b.y),f.x+f.width-b.x>b.width&&(b.width=f.x+f.width-b.x)}}return a&&this.hide(),b},Nb[e].attr=function(b,c){if(this.removed)return this;if(b==null){var d={};for(var e in this.attrs)this.attrs[f](e)&&(d[e]=this.attrs[e]);return this._.rt.deg&&(d.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(d.scale=this.scale()),d.gradient&&d.fill=="none"&&(d.fill=d.gradient)&&delete d.gradient,d}if(c==null&&a.is(b,F))return b=="translation"?Ac.call(this):b=="rotation"?this.rotate():b=="scale"?this.scale():b==I&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[b];if(c==null&&a.is(b,G)){var g={};for(var h=0,i=b.length;h<i;h++)g[b[h]]=this.attr(b[h]);return g}if(c!=null){var j={};j[b]=c}else b!=null&&a.is(b,"object")&&(j=b);for(var k in this.paper.customAttributes)if(this.paper.customAttributes[f](k)&&j[f](k)&&a.is(this.paper.customAttributes[k],"function")){var l=this.paper.customAttributes[k].apply(this,[][n](j[k]));this.attrs[k]=j[k];for(var m in l)l[f](m)&&(j[m]=l[m])}return Kb(this,j),this},Nb[e].toFront=function(){if(this.removed)return this;this.node.parentNode[l](this.node);var a=this.paper;return a.top!=this&&Bb(this,a),this},Nb[e].toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),Cb(this,this.paper);var a=this.paper}return this},Nb[e].insertAfter=function(a){if(this.removed)return this;var b=a.node||a[a.length-1].node;return b.nextSibling?b.parentNode.insertBefore(this.node,b.nextSibling):b.parentNode[l](this.node),Db(this,a,this.paper),this},Nb[e].insertBefore=function(a){if(this.removed)return this;var b=a.node||a[0].node;return b.parentNode.insertBefore(this.node,b),Eb(this,a,this.paper),this},Nb[e].blur=function(a){var b=this;if(+a!==0){var c=Gb("filter"),d=Gb("feGaussianBlur");b.attrs.blur=a,c.id=hb(),Gb(d,{stdDeviation:+a||1.5}),c.appendChild(d),b.paper.defs.appendChild(c),b._blur=c,Gb(b.node,{filter:"url(#"+c.id+")"})}else b._blur&&(b._blur.parentNode.removeChild(b._blur),delete b._blur,delete b.attrs.blur),b.node.removeAttribute("filter")};var Pb=function(a,b,c,d){var e=Gb("circle");a.canvas&&a.canvas[l](e);var f=new Nb(e,a);return f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",Gb(e,f.attrs),f},Qb=function(a,b,c,d,e,f){var g=Gb("rect");a.canvas&&a.canvas[l](g);var h=new Nb(g,a);return h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",Gb(g,h.attrs),h},Rb=function(a,b,c,d,e){var f=Gb("ellipse");a.canvas&&a.canvas[l](f);var g=new Nb(f,a);return g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",Gb(f,g.attrs),g},Sb=function(a,b,c,d,e,f){var g=Gb("image");Gb(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(a.xlink,"href",b),a.canvas&&a.canvas[l](g);var h=new Nb(g,a);return h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image",h},Tb=function(a,b,c,d){var e=Gb("text");Gb(e,{x:b,y:c,"text-anchor":"middle"}),a.canvas&&a.canvas[l](e);var f=new Nb(e,a);return f.attrs={x:b,y:c,"text-anchor":"middle",text:d,font:W.font,stroke:"none",fill:"#000"},f.type="text",Kb(f,f.attrs),f},Ub=function(a,b){return this.width=a||this.width,this.height=b||this.height,this.canvas[R]("width",this.width),this.canvas[R]("height",this.height),this},Vb=function(){var b=yb[m](0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,h=b.height;if(!c)throw new Error("SVG container not found.");var i=Gb("svg");return d=d||0,e=e||0,f=f||512,h=h||342,Gb(i,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:f,height:h}),c==1?(i.style.cssText="position:absolute;left:"+d+"px;top:"+e+"px",g.body[l](i)):c.firstChild?c.insertBefore(i,c.firstChild):c[l](i),c=new j,c.width=f,c.height=h,c.canvas=i,zb.call(c,c,a.fn),c.clear(),c};k.clear=function(){var a=this.canvas;while(a.firstChild)a.removeChild(a.firstChild);this.bottom=this.top=null,(this.desc=Gb("desc"))[l](g.createTextNode("Created with Raphaël")),a[l](this.desc),a[l](this.defs=Gb("defs"))},k.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=Fb(a)}}if(a.vml){var Wb={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},Xb=/([clmz]),?([^clmz]*)/gi,Yb=/ progid:\S+Blur\([^\)]+\)/g,Zb=/-?[^,\s-]+/g,$b=1e3+q+1e3,_b=10,ac={path:1,rect:1},bc=function(a){var b=/[ahqstv]/ig,c=qb;r(a).match(b)&&(c=wb),b=/[clmz]/g;if(c==qb&&!r(a).match(b)){var d=r(a)[Y](Xb,function(a,b,c){var d=[],e=x.call(b)=="m",f=Wb[b];return c[Y](Zb,function(a){e&&d[w]==2&&(f+=d+Wb[b=="m"?"l":"L"],d=[]),d[L](Q(a*_b))}),f+d});return d}var e=c(a),f,g;d=[];for(var h=0,i=e[w];h<i;h++){f=e[h],g=x.call(e[h][0]),g=="z"&&(g="x");for(var j=1,k=f[w];j<k;j++)g+=Q(f[j]*_b)+(j!=k-1?",":p);d[L](g)}return d[v](q)};a[H]=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version},Hb=function(a,b){var c=dc("group");c.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px",c.coordsize=b.coordsize,c.coordorigin=b.coordorigin;var d=dc("shape"),e=d.style;e.width=b.width+"px",e.height=b.height+"px",d.coordsize=$b,d.coordorigin=b.coordorigin,c[l](d);var f=new Nb(d,c,b),g={fill:"none",stroke:"#000"};return a&&(g.path=a),f.type="path",f.path=[],f.Path=p,Kb(f,g),b.canvas[l](c),f},Kb=function(c,d){c.attrs=c.attrs||{};var e=c.node,h=c.attrs,i=e.style,j,k=(d.x!=h.x||d.y!=h.y||d.width!=h.width||d.height!=h.height||d.r!=h.r)&&c.type=="rect",m=c;for(var n in d)d[f](n)&&(h[n]=d[n]);k&&(h.path=cc(h.x,h.y,h.width,h.height,h.r),c.X=h.x,c.Y=h.y,c.W=h.width,c.H=h.height),d.href&&(e.href=d.href),d.title&&(e.title=d.title),d.target&&(e.target=d.target),d.cursor&&(i.cursor=d.cursor),"blur"in d&&c.blur(d.blur);if(d.path&&c.type=="path"||k)e.path=bc(h.path);d.rotation!=null&&c.rotate(d.rotation,!0),d.translation&&(j=r(d.translation)[s](b),Ac.call(c,j[0],j[1]),c._.rt.cx!=null&&(c._.rt.cx+=+j[0],c._.rt.cy+=+j[1],c.setBox(c.attrs,j[0],j[1]))),d.scale&&(j=r(d.scale)[s](b),c.scale(+j[0]||1,+j[1]||+j[0]||1,+j[2]||null,+j[3]||null));if("clip-rect"in d){var o=r(d["clip-rect"])[s](b);if(o[w]==4){o[2]=+o[2]+ +o[0],o[3]=+o[3]+ +o[1];var q=e.clipRect||g.createElement("div"),t=q.style,u=e.parentNode;t.clip=a.format("rect({1}px {2}px {3}px {0}px)",o),e.clipRect||(t.position="absolute",t.top=0,t.left=0,t.width=c.paper.width+"px",t.height=c.paper.height+"px",u.parentNode.insertBefore(q,u),q[l](u),e.clipRect=q)}d["clip-rect"]||e.clipRect&&(e.clipRect.style.clip=p)}c.type=="image"&&d.src&&(e.src=d.src),c.type=="image"&&d.opacity&&(e.filterOpacity=U+".Alpha(opacity="+d.opacity*100+")",i.filter=(e.filterMatrix||p)+(e.filterOpacity||p)),d.font&&(i.font=d.font),d["font-family"]&&(i.fontFamily='"'+d["font-family"][s](",")[0][Y](/^['"]+|['"]+$/g,p)+'"'),d["font-size"]&&(i.fontSize=d["font-size"]),d["font-weight"]&&(i.fontWeight=d["font-weight"]),d["font-style"]&&(i.fontStyle=d["font-style"]);if(d.opacity!=null||d["stroke-width"]!=null||d.fill!=null||d.stroke!=null||d["stroke-width"]!=null||d["stroke-opacity"]!=null||d["fill-opacity"]!=null||d["stroke-dasharray"]!=null||d["stroke-miterlimit"]!=null||d["stroke-linejoin"]!=null||d["stroke-linecap"]!=null){e=c.shape||e;var v=e.getElementsByTagName(I)&&e.getElementsByTagName(I)[0],x=!1;!v&&(x=v=dc(I));if("fill-opacity"in d||"opacity"in d){var y=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+a.getRGB(d.fill).o+1||2)-1);y=A(z(y,0),1),v.opacity=y}d.fill&&(v.on=!0);if(v.on==null||d.fill=="none")v.on=!1;if(v.on&&d.fill){var B=d.fill.match(M);B?(v.src=B[1],v.type="tile"):(v.color=a.getRGB(d.fill).hex,v.src=p,v.type="solid",a.getRGB(d.fill).error&&(m.type in{circle:1,ellipse:1}||r(d.fill).charAt()!="r")&&Ib(m,d.fill)&&(h.fill="none",h.gradient=d.fill))}x&&e[l](v);var C=e.getElementsByTagName("stroke")&&e.getElementsByTagName("stroke")[0],D=!1;!C&&(D=C=dc("stroke"));if(d.stroke&&d.stroke!="none"||d["stroke-width"]||d["stroke-opacity"]!=null||d["stroke-dasharray"]||d["stroke-miterlimit"]||d["stroke-linejoin"]||d["stroke-linecap"])C.on=!0;(d.stroke=="none"||C.on==null||d.stroke==0||d["stroke-width"]==0)&&(C.on=!1);var E=a.getRGB(d.stroke);C.on&&d.stroke&&(C.color=E.hex),y=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+E.o+1||2)-1);var F=(S(d["stroke-width"])||1)*.75;y=A(z(y,0),1),d["stroke-width"]==null&&(F=h["stroke-width"]),d["stroke-width"]&&(C.weight=F),F&&F<1&&(y*=F)&&(C.weight=1),C.opacity=y,d["stroke-linejoin"]&&(C.joinstyle=d["stroke-linejoin"]||"miter"),C.miterlimit=d["stroke-miterlimit"]||8,d["stroke-linecap"]&&(C.endcap=d["stroke-linecap"]=="butt"?"flat":d["stroke-linecap"]=="square"?"square":"round");if(d["stroke-dasharray"]){var G={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};C.dashstyle=G[f](d["stroke-dasharray"])?G[d["stroke-dasharray"]]:p}D&&e[l](C)}if(m.type=="text"){i=m.paper.span.style,h.font&&(i.font=h.font),h["font-family"]&&(i.fontFamily=h["font-family"]),h["font-size"]&&(i.fontSize=h["font-size"]),h["font-weight"]&&(i.fontWeight=h["font-weight"]),h["font-style"]&&(i.fontStyle=h["font-style"]),m.node.string&&(m.paper.span.innerHTML=r(m.node.string)[Y](/</g,"&#60;")[Y](/&/g,"&#38;")[Y](/\n/g,"<br>")),m.W=h.w=m.paper.span.offsetWidth,m.H=h.h=m.paper.span.offsetHeight,m.X=h.x,m.Y=h.y+Q(m.H/2);switch(h["text-anchor"]){case"start":m.node.style["v-text-align"]="left",m.bbx=Q(m.W/2);break;case"end":m.node.style["v-text-align"]="right",m.bbx=-Q(m.W/2);break;default:m.node.style["v-text-align"]="center"}}},Ib=function(a,b){a.attrs=a.attrs||{};var c=a.attrs,d,e="linear",f=".5 .5";a.attrs.gradient=b,b=r(b)[Y](db,function(a,b,c){return e="radial",b&&c&&(b=S(b),c=S(c),C(b-.5,2)+C(c-.5,2)>.25&&(c=y.sqrt(.25-C(b-.5,2))*((c>.5)*2-1)+.5),f=b+q+c),p}),b=b[s](/\s*\-\s*/);if(e=="linear"){var g=b.shift();g=-S(g);if(isNaN(g))return null}var h=xb(b);if(!h)return null;a=a.shape||a.node,d=a.getElementsByTagName(I)[0]||dc(I),!d.parentNode&&a.appendChild(d);if(h[w]){d.on=!0,d.method="none",d.color=h[0].color,d.color2=h[h[w]-1].color;var i=[];for(var j=0,k=h[w];j<k;j++)h[j].offset&&i[L](h[j].offset+q+h[j].color);d.colors&&(d.colors.value=i[w]?i[v]():"0% "+d.color),e=="radial"?(d.type="gradientradial",d.focus="100%",d.focussize=f,d.focusposition=f):(d.type="gradient",d.angle=(270-g)%360)}return 1},Nb=function(b,c,d){var e=0,f=0,g=0,h=1;this[0]=b,this.id=a._oid++,this.node=b,b.raphael=this,this.X=0,this.Y=0,this.attrs={},this.Group=c,this.paper=d,this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1},!d.bottom&&(d.bottom=this),this.prev=d.top,d.top&&(d.top.next=this),d.top=this,this.next=null},Ob=Nb[e],Ob.rotate=function(a,c,d){return this.removed?this:a==null?this._.rt.cx?[this._.rt.deg,this._.rt.cx,this._.rt.cy][v](q):this._.rt.deg:(a=r(a)[s](b),a[w]-1&&(c=S(a[1]),d=S(a[2])),a=S(a[0]),c!=null?this._.rt.deg=a:this._.rt.deg+=a,d==null&&(c=null),this._.rt.cx=c,this._.rt.cy=d,this.setBox(this.attrs,c,d),this.Group.style.rotation=this._.rt.deg,this)},Ob.setBox=function(a,b,c){if(this.removed)return this;var d=this.Group.style,e=this.shape&&this.shape.style||this.node.style;a=a||{};for(var g in a)a[f](g)&&(this.attrs[g]=a[g]);b=b||this._.rt.cx,c=c||this._.rt.cy;var h=this.attrs,i,j,k,l;switch(this.type){case"circle":i=h.cx-h.r,j=h.cy-h.r,k=l=h.r*2;break;case"ellipse":i=h.cx-h.rx,j=h.cy-h.ry,k=h.rx*2,l=h.ry*2;break;case"image":i=+h.x,j=+h.y,k=h.width||0,l=h.height||0;break;case"text":this.textpath.v=["m",Q(h.x),", ",Q(h.y-2),"l",Q(h.x)+1,", ",Q(h.y-2)][v](p),i=h.x-Q(this.W/2),j=h.y-this.H/2,k=this.W,l=this.H;break;case"rect":case"path":if(!this.attrs.path)i=0,j=0,k=this.paper.width,l=this.paper.height;else{var m=nb(this.attrs.path);i=m.x,j=m.y,k=m.width,l=m.height}break;default:i=0,j=0,k=this.paper.width,l=this.paper.height}b=b==null?i+k/2:b,c=c==null?j+l/2:c;var n=b-this.paper.width/2,o=c-this.paper.height/2,q;d.left!=(q=n+"px")&&(d.left=q),d.top!=(q=o+"px")&&(d.top=q),this.X=ac[f](this.type)?-n:i,this.Y=ac[f](this.type)?-o:j,this.W=k,this.H=l,ac[f](this.type)?(e.left!=(q=-n*_b+"px")&&(e.left=q),e.top!=(q=-o*_b+"px")&&(e.top=q)):this.type=="text"?(e.left!=(q=-n+"px")&&(e.left=q),e.top!=(q=-o+"px")&&(e.top=q)):(d.width!=(q=this.paper.width+"px")&&(d.width=q),d.height!=(q=this.paper.height+"px")&&(d.height=q),e.left!=(q=i-n+"px")&&(e.left=q),e.top!=(q=j-o+"px")&&(e.top=q),e.width!=(q=k+"px")&&(e.width=q),e.height!=(q=l+"px")&&(e.height=q))},Ob.hide=function(){return!this.removed&&(this.Group.style.display="none"),this},Ob.show=function(){return!this.removed&&(this.Group.style.display="block"),this},Ob.getBBox=function(){return this.removed?this:ac[f](this.type)?nb(this.attrs.path):{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}},Ob.remove=function(){if(this.removed)return;Ab(this,this.paper),this.node.parentNode.removeChild(this.node),this.Group.parentNode.removeChild(this.Group),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var a in this)delete this[a];this.removed=!0},Ob.attr=function(b,c){if(this.removed)return this;if(b==null){var d={};for(var e in this.attrs)this.attrs[f](e)&&(d[e]=this.attrs[e]);return this._.rt.deg&&(d.rotation=this.rotate()),(this._.sx!=1||this._.sy!=1)&&(d.scale=this.scale()),d.gradient&&d.fill=="none"&&(d.fill=d.gradient)&&delete d.gradient,d}if(c==null&&a.is(b,"string"))return b=="translation"?Ac.call(this):b=="rotation"?this.rotate():b=="scale"?this.scale():b==I&&this.attrs.fill=="none"&&this.attrs.gradient?this.attrs.gradient:this.attrs[b];if(this.attrs&&c==null&&a.is(b,G)){var g,h={};for(e=0,g=b[w];e<g;e++)h[b[e]]=this.attr(b[e]);return h}var i;c!=null&&(i={},i[b]=c),c==null&&a.is(b,"object")&&(i=b);if(i){for(var j in this.paper.customAttributes)if(this.paper.customAttributes[f](j)&&i[f](j)&&a.is(this.paper.customAttributes[j],"function")){var k=this.paper.customAttributes[j].apply(this,[][n](i[j]));this.attrs[j]=i[j];for(var l in k)k[f](l)&&(i[l]=k[l])}i.text&&this.type=="text"&&(this.node.string=i.text),Kb(this,i),i.gradient&&({circle:1,ellipse:1}[f](this.type)||r(i.gradient).charAt()!="r")&&Ib(this,i.gradient),(!ac[f](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this},Ob.toFront=function(){return!this.removed&&this.Group.parentNode[l](this.Group),this.paper.top!=this&&Bb(this,this.paper),this},Ob.toBack=function(){return this.removed?this:(this.Group.parentNode.firstChild!=this.Group&&(this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild),Cb(this,this.paper)),this)},Ob.insertAfter=function(a){return this.removed?this:(a.constructor==Dc&&(a=a[a.length-1]),a.Group.nextSibling?a.Group.parentNode.insertBefore(this.Group,a.Group.nextSibling):a.Group.parentNode[l](this.Group),Db(this,a,this.paper),this)},Ob.insertBefore=function(a){return this.removed?this:(a.constructor==Dc&&(a=a[0]),a.Group.parentNode.insertBefore(this.Group,a.Group),Eb(this,a,this.paper),this)},Ob.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(Yb,p),+b!==0?(this.attrs.blur=b,c.filter=d+q+U+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",Q(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},Pb=function(a,b,c,d){var e=dc("group"),f=dc("oval"),g=f.style;e.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",e.coordsize=$b,e.coordorigin=a.coordorigin,e[l](f);var h=new Nb(f,e,a);return h.type="circle",Kb(h,{stroke:"#000",fill:"none"}),h.attrs.cx=b,h.attrs.cy=c,h.attrs.r=d,h.setBox({x:b-d,y:c-d,width:d*2,height:d*2}),a.canvas[l](e),h};function cc(b,c,d,e,f){return f?a.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+f,c,d-f*2,f,-f,e-f*2,f*2-d,f*2-e):a.format("M{0},{1}l{2},0,0,{3},{4},0z",b,c,d,e,-d)}Qb=function(a,b,c,d,e,f){var g=cc(b,c,d,e,f),h=a.path(g),i=h.attrs;return h.X=i.x=b,h.Y=i.y=c,h.W=i.width=d,h.H=i.height=e,i.r=f,i.path=g,h.type="rect",h},Rb=function(a,b,c,d,e){var f=dc("group"),g=dc("oval"),h=g.style;f.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",f.coordsize=$b,f.coordorigin=a.coordorigin,f[l](g);var i=new Nb(g,f,a);return i.type="ellipse",Kb(i,{stroke:"#000"}),i.attrs.cx=b,i.attrs.cy=c,i.attrs.rx=d,i.attrs.ry=e,i.setBox({x:b-d,y:c-e,width:d*2,height:e*2}),a.canvas[l](f),i},Sb=function(a,b,c,d,e,f){var g=dc("group"),h=dc("image");g.style.cssText="position:absolute;left:0;top:0;width:"+a.width+"px;height:"+a.height+"px",g.coordsize=$b,g.coordorigin=a.coordorigin,h.src=b,g[l](h);var i=new Nb(h,g,a);return i.type="image",i.attrs.src=b,i.attrs.x=c,i.attrs.y=d,i.attrs.w=e,i.attrs.h=f,i.setBox({x:c,y:d,width:e,height:f}),a.canvas[l](g),i},Tb=function(b,c,d,e){var f=dc("group"),g=dc("shape"),h=g.style,i=dc("path"),j=i.style,k=dc("textpath");f.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px",f.coordsize=$b,f.coordorigin=b.coordorigin,i.v=a.format("m{0},{1}l{2},{1}",Q(c*10),Q(d*10),Q(c*10)+1),i.textpathok=!0,h.width=b.width,h.height=b.height,k.string=r(e),k.on=!0,g[l](k),g[l](i),f[l](g);var m=new Nb(k,f,b);return m.shape=g,m.textpath=i,m.type="text",m.attrs.text=e,m.attrs.x=c,m.attrs.y=d,m.attrs.w=1,m.attrs.h=1,Kb(m,{font:W.font,stroke:"none",fill:"#000"}),m.setBox(),b.canvas[l](f),m},Ub=function(a,b){var c=this.canvas.style;return a==+a&&(a+="px"),b==+b&&(b+="px"),c.width=a,c.height=b,c.clip="rect(0 "+a+" "+b+" 0)",this};var dc;g.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!g.namespaces.rvml&&g.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),dc=function(a){return g.createElement("<rvml:"+a+' class="rvml">'
)}}catch(ec){dc=function(a){return g.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}Vb=function(){var b=yb[m](0,arguments),c=b.container,d=b.height,e,f=b.width,h=b.x,i=b.y;if(!c)throw new Error("VML container not found.");var k=new j,n=k.canvas=g.createElement("div"),o=n.style;return h=h||0,i=i||0,f=f||512,d=d||342,f==+f&&(f+="px"),d==+d&&(d+="px"),k.width=1e3,k.height=1e3,k.coordsize=_b*1e3+q+_b*1e3,k.coordorigin="0 0",k.span=g.createElement("span"),k.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",n[l](k.span),o.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",f,d),c==1?(g.body[l](n),o.left=h+"px",o.top=i+"px",o.position="absolute"):c.firstChild?c.insertBefore(n,c.firstChild):c[l](n),zb.call(k,k,a.fn),k},k.clear=function(){this.canvas.innerHTML=p,this.span=g.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas[l](this.span),this.bottom=this.top=null},k.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var a in this)this[a]=Fb(a);return!0}}var fc=navigator.userAgent.match(/Version\/(.*?)\s/);navigator.vendor=="Apple Computer, Inc."&&(fc&&fc[1]<4||navigator.platform.slice(0,2)=="iP")?k.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});h.setTimeout(function(){a.remove()})}:k.safari=function(){};var gc=function(){this.returnValue=!1},hc=function(){return this.originalEvent.preventDefault()},ic=function(){this.cancelBubble=!0},jc=function(){return this.originalEvent.stopPropagation()},kc=function(){if(g.addEventListener)return function(a,b,c,d){var e=o&&u[b]?u[b]:b,g=function(e){if(o&&u[f](b))for(var g=0,h=e.targetTouches&&e.targetTouches.length;g<h;g++)if(e.targetTouches[g].target==a){var i=e;e=e.targetTouches[g],e.originalEvent=i,e.preventDefault=hc,e.stopPropagation=jc;break}return c.call(d,e)};return a.addEventListener(e,g,!1),function(){return a.removeEventListener(e,g,!1),!0}};if(g.attachEvent)return function(a,b,c,d){var e=function(a){return a=a||h.event,a.preventDefault=a.preventDefault||gc,a.stopPropagation=a.stopPropagation||ic,c.call(d,a)};a.attachEvent("on"+b,e);var f=function(){return a.detachEvent("on"+b,e),!0};return f}}(),lc=[],mc=function(a){var b=a.clientX,c=a.clientY,d=g.documentElement.scrollTop||g.body.scrollTop,e=g.documentElement.scrollLeft||g.body.scrollLeft,f,h=lc.length;while(h--){f=lc[h];if(o){var i=a.touches.length,j;while(i--){j=a.touches[i];if(j.identifier==f.el._drag.id){b=j.clientX,c=j.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}}else a.preventDefault();b+=e,c+=d,f.move&&f.move.call(f.move_scope||f.el,b-f.el._drag.x,c-f.el._drag.y,b,c,a)}},nc=function(b){a.unmousemove(mc).unmouseup(nc);var c=lc.length,d;while(c--)d=lc[c],d.el._drag={},d.end&&d.end.call(d.end_scope||d.start_scope||d.move_scope||d.el,b);lc=[]};for(var oc=t[w];oc--;)(function(b){a[b]=Nb[e][b]=function(c,d){return a.is(c,"function")&&(this.events=this.events||[],this.events.push({name:b,f:c,unbind:kc(this.shape||this.node||g,b,c,d||this)})),this},a["un"+b]=Nb[e]["un"+b]=function(a){var c=this.events,d=c[w];while(d--)if(c[d].name==b&&c[d].f==a)return c[d].unbind(),c.splice(d,1),!c.length&&delete this.events,this;return this}})(t[oc]);Ob.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},Ob.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)},Ob.drag=function(b,c,d,e,f,h){return this._drag={},this.mousedown(function(i){(i.originalEvent||i).preventDefault();var j=g.documentElement.scrollTop||g.body.scrollTop,k=g.documentElement.scrollLeft||g.body.scrollLeft;this._drag.x=i.clientX+k,this._drag.y=i.clientY+j,this._drag.id=i.identifier,c&&c.call(f||e||this,i.clientX+k,i.clientY+j,i),!lc.length&&a.mousemove(mc).mouseup(nc),lc.push({el:this,move:b,end:d,move_scope:e,start_scope:f,end_scope:h})}),this},Ob.undrag=function(b,c,d){var e=lc.length;while(e--)lc[e].el==this&&lc[e].move==b&&lc[e].end==d&&lc.splice(e++,1);!lc.length&&a.unmousemove(mc).unmouseup(nc)},k.circle=function(a,b,c){return Pb(this,a||0,b||0,c||0)},k.rect=function(a,b,c,d,e){return Qb(this,a||0,b||0,c||0,d||0,e||0)},k.ellipse=function(a,b,c,d){return Rb(this,a||0,b||0,c||0,d||0)},k.path=function(b){return b&&!a.is(b,F)&&!a.is(b[0],G)&&(b+=p),Hb(a.format[m](a,arguments),this)},k.image=function(a,b,c,d,e){return Sb(this,a||"about:blank",b||0,c||0,d||0,e||0)},k.text=function(a,b,c){return Tb(this,a||0,b||0,r(c))},k.set=function(a){return arguments[w]>1&&(a=Array[e].splice.call(arguments,0,arguments[w])),new Dc(a)},k.setSize=Ub,k.top=k.bottom=null,k.raphael=a,Ob.resetScale=function(){if(this.removed)return this;this._.sx=1,this._.sy=1,this.attrs.scale="1 1"},Ob.scale=function(a,b,c,d){if(this.removed)return this;if(a==null&&b==null)return{x:this._.sx,y:this._.sy,toString:pc};b=b||a,!+b&&(b=a);var e,f,g,h,i=this.attrs;if(a!=0){var j=this.getBBox(),k=j.x+j.width/2,l=j.y+j.height/2,m=B(a/this._.sx),o=B(b/this._.sy);c=+c||c==0?c:k,d=+d||d==0?d:l;var r=this._.sx>0,s=this._.sy>0,t=~~(a/B(a)),u=~~(b/B(b)),x=m*t,y=o*u,z=this.node.style,A=c+B(k-c)*x*(k>c==r?1:-1),C=d+B(l-d)*y*(l>d==s?1:-1),D=a*t>b*u?o:m;switch(this.type){case"rect":case"image":var E=i.width*m,F=i.height*o;this.attr({height:F,r:i.r*D,width:E,x:A-E/2,y:C-F/2});break;case"circle":case"ellipse":this.attr({rx:i.rx*m,ry:i.ry*o,r:i.r*D,cx:A,cy:C});break;case"text":this.attr({x:A,y:C});break;case"path":var G=pb(i.path),H=!0,I=r?x:m,J=s?y:o;for(var K=0,L=G[w];K<L;K++){var M=G[K],N=V.call(M[0]);if(N=="M"&&H)continue;H=!1;if(N=="A")M[G[K][w]-2]*=I,M[G[K][w]-1]*=J,M[1]*=m,M[2]*=o,M[5]=+(t+u?!!+M[5]:!+M[5]);else if(N=="H")for(var O=1,P=M[w];O<P;O++)M[O]*=I;else if(N=="V")for(O=1,P=M[w];O<P;O++)M[O]*=J;else for(O=1,P=M[w];O<P;O++)M[O]*=O%2?I:J}var Q=nb(G);e=A-Q.x-Q.width/2,f=C-Q.y-Q.height/2,G[0][1]+=e,G[0][2]+=f,this.attr({path:G})}this.type in{text:1,image:1}&&(t!=1||u!=1)?this.transformations?(this.transformations[2]="scale("[n](t,",",u,")"),this.node[R]("transform",this.transformations[v](q)),e=t==-1?-i.x-(E||0):i.x,f=u==-1?-i.y-(F||0):i.y,this.attr({x:e,y:f}),i.fx=t-1,i.fy=u-1):(this.node.filterMatrix=U+".Matrix(M11="[n](t,", M12=0, M21=0, M22=",u,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')"),z.filter=(this.node.filterMatrix||p)+(this.node.filterOpacity||p)):this.transformations?(this.transformations[2]=p,this.node[R]("transform",this.transformations[v](q)),i.fx=0,i.fy=0):(this.node.filterMatrix=p,z.filter=(this.node.filterMatrix||p)+(this.node.filterOpacity||p)),i.scale=[a,b,c,d][v](q),this._.sx=a,this._.sy=b}return this},Ob.clone=function(){if(this.removed)return null;var a=this.attr();return delete a.scale,delete a.translation,this.paper[this.type]().attr(a)};var qc={},rc=function(b,c,d,e,f,g,h,i,j){if(b===d&&c===e&&f===h&&g==i){var k=h-b,l=i-c,m=Math.sqrt(k*k+l*l);if(j==null)return m;var n=j/m;return{start:{x:b,y:c},m:{x:b,y:c},n:{x:h,y:i},end:{x:h,y:i},x:b+n*k,y:c+n*l,alpha:90-y.atan(k/l)*180/D}}var o=0,p=100,q=[b,c,d,e,f,g,h,i].join(),r=qc[q],s,t;!r&&(qc[q]=r={data:[]}),r.timer&&clearTimeout(r.timer),r.timer=setTimeout(function(){delete qc[q]},2e3);if(j!=null){var u=rc(b,c,d,e,f,g,h,i);p=~~u*10}for(var v=0;v<p+1;v++){r.data[j]>v?t=r.data[v*p]:(t=a.findDotsAtSegment(b,c,d,e,f,g,h,i,v/p),r.data[v]=t),v&&(o+=C(C(s.x-t.x,2)+C(s.y-t.y,2),.5));if(j!=null&&o>=j)return t;s=t}if(j==null)return o},sc=function(b,c){return function(d,e,f){d=wb(d);var g,h,i,j,k="",l={},m,n=0;for(var o=0,p=d.length;o<p;o++){i=d[o];if(i[0]=="M")g=+i[1],h=+i[2];else{j=rc(g,h,i[1],i[2],i[3],i[4],i[5],i[6]);if(n+j>e){if(c&&!l.start){m=rc(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),k+=["C",m.start.x,m.start.y,m.m.x,m.m.y,m.x,m.y];if(f)return k;l.start=k,k=["M",m.x,m.y+"C",m.n.x,m.n.y,m.end.x,m.end.y,i[5],i[6]][v](),n+=j,g=+i[5],h=+i[6];continue}if(!b&&!c)return m=rc(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),{x:m.x,y:m.y,alpha:m.alpha}}n+=j,g=+i[5],h=+i[6]}k+=i}return l.end=k,m=b?n:c?l:a.findDotsAtSegment(g,h,i[1],i[2],i[3],i[4],i[5],i[6],1),m.alpha&&(m={x:m.x,y:m.y,alpha:m.alpha}),m}},tc=sc(1),uc=sc(),vc=sc(0,1);Ob.getTotalLength=function(){if(this.type!="path")return;return this.node.getTotalLength?this.node.getTotalLength():tc(this.attrs.path)},Ob.getPointAtLength=function(a){if(this.type!="path")return;return uc(this.attrs.path,a)},Ob.getSubpath=function(a,b){if(this.type!="path")return;if(B(this.getTotalLength()-b)<"1e-6")return vc(this.attrs.path,a).end;var c=vc(this.attrs.path,b,1);return a?vc(c,a).end:c},a.easing_formulas={linear:function(a){return a},"<":function(a){return C(a,3)},">":function(a){return C(a-1,3)+1},"<>":function(a){return a*=2,a<1?C(a,3)/2:(a-=2,(C(a,3)+2)/2)},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a-=1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){if(a==0||a==1)return a;var b=.3,c=b/4;return C(2,-10*a)*y.sin((a-c)*2*D/b)+1},bounce:function(a){var b=7.5625,c=2.75,d;return a<1/c?d=b*a*a:a<2/c?(a-=1.5/c,d=b*a*a+.75):a<2.5/c?(a-=2.25/c,d=b*a*a+.9375):(a-=2.625/c,d=b*a*a+.984375),d}};var wc=[],xc=function(){var b=+(new Date);for(var c=0;c<wc[w];c++){var d=wc[c];if(d.stop||d.el.removed)continue;var e=b-d.start,g=d.ms,h=d.easing,i=d.from,j=d.diff,k=d.to,l=d.t,m=d.el,n={},o;if(e<g){var r=h(e/g);for(var s in i)if(i[f](s)){switch(X[s]){case"along":o=r*g*j[s],k.back&&(o=k.len-o);var t=uc(k[s],o);m.translate(j.sx-j.x||0,j.sy-j.y||0),j.x=t.x,j.y=t.y,m.translate(t.x-j.sx,t.y-j.sy),k.rot&&m.rotate(j.r+t.alpha,t.x,t.y);break;case E:o=+i[s]+r*g*j[s];break;case"colour":o="rgb("+[zc(Q(i[s].r+r*g*j[s].r)),zc(Q(i[s].g+r*g*j[s].g)),zc(Q(i[s].b+r*g*j[s].b))][v](",")+")";break;case"path":o=[];for(var u=0,x=i[s][w];u<x;u++){o[u]=[i[s][u][0]];for(var y=1,z=i[s][u][w];y<z;y++)o[u][y]=+i[s][u][y]+r*g*j[s][u][y];o[u]=o[u][v](q)}o=o[v](q);break;case"csv":switch(s){case"translation":var A=r*g*j[s][0]-l.x,B=r*g*j[s][1]-l.y;l.x+=A,l.y+=B,o=A+q+B;break;case"rotation":o=+i[s][0]+r*g*j[s][0],i[s][1]&&(o+=","+i[s][1]+","+i[s][2]);break;case"scale":o=[+i[s][0]+r*g*j[s][0],+i[s][1]+r*g*j[s][1],2 in k[s]?k[s][2]:p,3 in k[s]?k[s][3]:p][v](q);break;case"clip-rect":o=[],u=4;while(u--)o[u]=+i[s][u]+r*g*j[s][u]}break;default:var C=[].concat(i[s]);o=[],u=m.paper.customAttributes[s].length;while(u--)o[u]=+C[u]+r*g*j[s][u]}n[s]=o}m.attr(n),m._run&&m._run.call(m)}else k.along&&(t=uc(k.along,k.len*!k.back),m.translate(j.sx-(j.x||0)+t.x-j.sx,j.sy-(j.y||0)+t.y-j.sy),k.rot&&m.rotate(j.r+t.alpha,t.x,t.y)),(l.x||l.y)&&m.translate(-l.x,-l.y),k.scale&&(k.scale+=p),m.attr(k),wc.splice(c--,1)}a.svg&&m&&m.paper&&m.paper.safari(),wc[w]&&setTimeout(xc)},yc=function(b,c,d,e,f){var g=d-e;c.timeouts.push(setTimeout(function(){a.is(f,"function")&&f.call(c),c.animate(b,g,b.easing)},e))},zc=function(a){return z(A(a,255),0)},Ac=function(a,b){if(a==null)return{x:this._.tx,y:this._.ty,toString:pc};this._.tx+=+a,this._.ty+=+b;switch(this.type){case"circle":case"ellipse":this.attr({cx:+a+this.attrs.cx,cy:+b+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+a+this.attrs.x,y:+b+this.attrs.y});break;case"path":var c=pb(this.attrs.path);c[0][1]+=+a,c[0][2]+=+b,this.attr({path:c})}return this};Ob.animateWith=function(a,b,c,d,e){for(var f=0,g=wc.length;f<g;f++)wc[f].el.id==a.id&&(b.start=wc[f].start);return this.animate(b,c,d,e)},Ob.animateAlong=Bc(),Ob.animateAlongBack=Bc(1),Ob.onAnimation=function(a){return this._run=a||0,this},Ob.animate=function(c,d,e,g){var h=this;h.timeouts=h.timeouts||[];if(a.is(e,"function")||!e)g=e||null;if(h.removed)return g&&g.call(h),h;var i={},j={},k=!1,l={};for(var m in c)if(c[f](m))if(X[f](m)||h.paper.customAttributes[f](m)){k=!0,i[m]=h.attr(m),i[m]==null&&(i[m]=W[m]),j[m]=c[m];switch(X[m]){case"along":var n=tc(c[m]),o=uc(c[m],n*!!c.back),p=h.getBBox();l[m]=n/d,l.tx=p.x,l.ty=p.y,l.sx=o.x,l.sy=o.y,j.rot=c.rot,j.back=c.back,j.len=n,c.rot&&(l.r=S(h.rotate())||0);break;case E:l[m]=(j[m]-i[m])/d;break;case"colour":i[m]=a.getRGB(i[m]);var q=a.getRGB(j[m]);l[m]={r:(q.r-i[m].r)/d,g:(q.g-i[m].g)/d,b:(q.b-i[m].b)/d};break;case"path":var t=wb(i[m],j[m]);i[m]=t[0];var u=t[1];l[m]=[];for(var v=0,x=i[m][w];v<x;v++){l[m][v]=[0];for(var y=1,z=i[m][v][w];y<z;y++)l[m][v][y]=(u[v][y]-i[m][v][y])/d}break;case"csv":var A=r(c[m])[s](b),B=r(i[m])[s](b);switch(m){case"translation":i[m]=[0,0],l[m]=[A[0]/d,A[1]/d];break;case"rotation":i[m]=B[1]==A[1]&&B[2]==A[2]?B:[0,A[1],A[2]],l[m]=[(A[0]-i[m][0])/d,0,0];break;case"scale":c[m]=A,i[m]=r(i[m])[s](b),l[m]=[(A[0]-i[m][0])/d,(A[1]-i[m][1])/d,0,0];break;case"clip-rect":i[m]=r(i[m])[s](b),l[m]=[],v=4;while(v--)l[m][v]=(A[v]-i[m][v])/d}j[m]=A;break;default:A=[].concat(c[m]),B=[].concat(i[m]),l[m]=[],v=h.paper.customAttributes[m][w];while(v--)l[m][v]=((A[v]||0)-(B[v]||0))/d}}if(!k){var C=[],D;for(var F in c)c[f](F)&&Z.test(F)&&(m={value:c[F]},F=="from"&&(F=0),F=="to"&&(F=100),m.key=T(F,10),C.push(m));C.sort(eb),C[0].key&&C.unshift({key:0,value:h.attrs});for(v=0,x=C[w];v<x;v++)yc(C[v].value,h,d/100*C[v].key,d/100*(C[v-1]&&C[v-1].key||0),C[v-1]&&C[v-1].value.callback);D=C[C[w]-1].value.callback,D&&h.timeouts.push(setTimeout(function(){D.call(h)},d))}else{var G=a.easing_formulas[e];if(!G){G=r(e).match(P);if(G&&G[w]==5){var H=G;G=function(a){return Cc(a,+H[1],+H[2],+H[3],+H[4],d)}}else G=function(a){return a}}wc.push({start:c.start||+(new Date),ms:d,easing:G,from:i,diff:l,to:j,el:h,t:{x:0,y:0}}),a.is(g,"function")&&(h._ac=setTimeout(function(){g.call(h)},d)),wc[w]==1&&setTimeout(xc)}return this},Ob.stop=function(){for(var a=0;a<wc.length;a++)wc[a].el.id==this.id&&wc.splice(a--,1);for(a=0,ii=this.timeouts&&this.timeouts.length;a<ii;a++)clearTimeout(this.timeouts[a]);return this.timeouts=[],clearTimeout(this._ac),delete this._ac,this},Ob.translate=function(a,b){return this.attr({translation:a+" "+b})},Ob[H]=function(){return"Raphaël’s object"},a.ae=wc;var Dc=function(a){this.items=[],this[w]=0,this.type="set";if(a)for(var b=0,c=a[w];b<c;b++)a[b]&&(a[b].constructor==Nb||a[b].constructor==Dc)&&(this[this.items[w]]=this.items[this.items[w]]=a[b],this[w]++)};Dc[e][L]=function(){var a,b;for(var c=0,d=arguments[w];c<d;c++)a=arguments[c],a&&(a.constructor==Nb||a.constructor==Dc)&&(b=this.items[w],this[b]=this.items[b]=a,this[w]++);return this},Dc[e].pop=function(){return delete this[this[w]--],this.items.pop()};for(var Ec in Ob)Ob[f](Ec)&&(Dc[e][Ec]=function(a){return function(){for(var b=0,c=this.items[w];b<c;b++)this.items[b][a][m](this.items[b],arguments);return this}}(Ec));Dc[e].attr=function(b,c){if(b&&a.is(b,G)&&a.is(b[0],"object"))for(var d=0,e=b[w];d<e;d++)this.items[d].attr(b[d]);else for(var f=0,g=this.items[w];f<g;f++)this.items[f].attr(b,c);return this},Dc[e].animate=function(b,c,d,e){(a.is(d,"function")||!d)&&(e=d||null);var f=this.items[w],g=f,h,i=this,j;e&&(j=function(){!--f&&e.call(i)}),d=a.is(d,F)?d:j,h=this.items[--g].animate(b,c,d,j);while(g--)this.items[g]&&!this.items[g].removed&&this.items[g].animateWith(h,b,c,d,j);return this},Dc[e].insertAfter=function(a){var b=this.items[w];while(b--)this.items[b].insertAfter(a);return this},Dc[e].getBBox=function(){var a=[],b=[],c=[],d=[];for(var e=this.items[w];e--;){var f=this.items[e].getBBox();a[L](f.x),b[L](f.y),c[L](f.x+f.width),d[L](f.y+f.height)}return a=A[m](0,a),b=A[m](0,b),{x:a,y:b,width:z[m](0,c)-a,height:z[m](0,d)-b}},Dc[e].clone=function(a){a=new Dc;for(var b=0,c=this.items[w];b<c;b++)a[L](this.items[b].clone());return a},a.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[f](d)&&(b.face[d]=a.face[d]);this.fonts[c]?this.fonts[c][L](b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=T(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[f](e)){var g=a.glyphs[e];b.glyphs[e]={w:g.w,k:{},d:g.d&&"M"+g.d[Y](/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"};if(g.k)for(var h in g.k)g[f](h)&&(b.glyphs[e].k[h]=g.k[h])}}return a},k.getFont=function(b,c,d,e){e=e||"normal",d=d||"normal",c=+c||{normal:400,bold:700,lighter:300,bolder:800}[c]||400;if(!a.fonts)return;var g=a.fonts[b];if(!g){var h=new RegExp("(^|\\s)"+b[Y](/[^\w\d\s+!~.:_-]/g,p)+"(\\s|$)","i");for(var i in a.fonts)if(a.fonts[f](i)&&h.test(i)){g=a.fonts[i];break}}var j;if(g)for(var k=0,l=g[w];k<l;k++){j=g[k];if(j.face["font-weight"]==c&&(j.face["font-style"]==d||!j.face["font-style"])&&j.face["font-stretch"]==e)break}return j},k.print=function(c,d,e,f,g,h,i){h=h||"middle",i=z(A(i||0,1),-1);var j=this.set(),k=r(e)[s](p),l=0,m=p,n;a.is(f,e)&&(f=this.getFont(f));if(f){n=(g||16)/f.face["units-per-em"];var o=f.face.bbox.split(b),q=+o[0],t=+o[1]+(h=="baseline"?o[3]-o[1]+ +f.face.descent:(o[3]-o[1])/2);for(var u=0,v=k[w];u<v;u++){var x=u&&f.glyphs[k[u-1]]||{},y=f.glyphs[k[u]];l+=u?(x.w||f.w)+(x.k&&x.k[k[u]]||0)+f.w*i:0,y&&y.d&&j[L](this.path(y.d).attr({fill:"#000",stroke:"none",translation:[l,0]}))}j.scale(n,n,q,t).translate(c-q,d-t)}return j},a.format=function(b,c){var e=a.is(c,G)?[0][n](c):arguments;return b&&a.is(b,F)&&e[w]-1&&(b=b[Y](d,function(a,b){return e[++b]==null?p:e[b]})),b||p},a.ninja=function(){return i.was?h.Raphael=i.is:delete Raphael,a},a.el=Ob,a.st=Dc[e],i.was?h.Raphael=a:Raphael=a}(),jQuery.extend(KhanUtil,{initSliceClone:function(a){KhanUtil.pieces=1,KhanUtil.times={};for(var b=0;b<a.length;b++)KhanUtil.times[a[b]]=1},changePieces:function(a){if(KhanUtil.pieces===1&&!a)return;KhanUtil.pieces+=a?1:-1,jQuery("#pieces").text(KhanUtil.plural(KhanUtil.pieces,"stukje")),KhanUtil.currentGraph=jQuery("#problemarea").find("#parent_block").data("graphie"),rectchart([1,KhanUtil.pieces-1],["#e00","#999"]),KhanUtil.updateGraphAndAnswer()},changeTimes:function(a,b){if(KhanUtil.times[b]===1&&!a)return;KhanUtil.times[b]+=a?1:-1,jQuery("#"+b+"_times").text(KhanUtil.plural(KhanUtil.times[b],"keer")),KhanUtil.updateGraphAndAnswer()},updateGraphAndAnswer:function(){var a=KhanUtil.pieces,b;for(var c in KhanUtil.times)b=KhanUtil.times[c],KhanUtil.currentGraph=jQuery("#problemarea").find("#"+c).data("graphie"),KhanUtil.currentGraph.init({range:[[0,1],[0,1]],scale:[600/a*b,25]}),rectchart([b,0],["#e00","#999"]),jQuery("#"+c+"_answer input").val(KhanUtil.roundTo(3,b/a))}}),jQuery.extend(KhanUtil,{sum:function(a){var b=0;return $.each(a,function(a,c){b+=c}),b},mean:function(a){return KhanUtil.sum(a)/a.length},median:function(a){var b,c;return b=KhanUtil.sortNumbers(a),a.length%2===0?c=KhanUtil.roundTo(1,(b[a.length/2-1]+b[a.length/2])/2):c=b[Math.floor(a.length/2)],c},mode:function(a){var b=[],c=-1,d;for(var e=0;e<a.length;e++)b[a[e]]?(b[a[e]]+=1,b[a[e]]>c&&(c=b[a[e]],d=a[e])):b[a[e]]=1;for(var e=0;e<b.length;e++)if(b[e]&&e!==d&&b[e]>=c)return!1;return d}}),function(){var VARS={};jQuery.tmpl={attr:{"data-ensure":function(a,b){return function(a){return!!b&&!!jQuery.tmpl.getVAR(b)}},"data-if":function(a,b){var c=jQuery(a);b=b&&jQuery.tmpl.getVAR(b),c.next().data("lastCond",b);if(!b)return[]},"data-else-if":function(a,b){var c=jQuery(a),d=c.data("lastCond");b=!d&&b&&jQuery.tmpl.getVAR(b),c.next().data("lastCond",d||b);if(!b)return[]},"data-else":function(a){var b=jQuery(a);if(b.data("lastCond"))return[]},"data-each":function(a,b){var c;jQuery(a).removeAttr("data-each");if(c=/^(.+) times(?: as (\w+))?$/.exec(b)){var d=jQuery.tmpl.getVAR(c[1]);return{items:jQuery.map(new Array(d),function(a,b){return b}),value:c[2],oldValue:VARS[c[2]]}}if(c=/^(.*?)(?: as (?:(\w+), )?(\w+))?$/.exec(b))return{items:jQuery.tmpl.getVAR(c[1]),value:c[3],pos:c[2],oldValue:VARS[c[3]],oldPos:VARS[c[2]]}},"data-unwrap":function(a){return jQuery(a).contents()}},type:{"var":function(a,b){if(!b&&jQuery(a).children().length>0)return function(a){return jQuery.tmpl.type["var"](a,a.innerHTML)};b=b||jQuery.tmpl.getVAR(a);var c=a.id;if(!c){if(b==null)return[];var f=jQuery("<div>"),g=f.append(b+" ").html();return f.html(g.slice(0,-1)).contents()}var d=function(a,b){KhanUtil[a]&&Khan.error("Defining variable '"+a+"' overwrites utility property of same name."),VARS[a]=b};if(c.indexOf(",")!==-1){var e=c.split(/\s*,\s*/);jQuery.each(e,function(a,c){c.length>0&&d(c,b[a])})}else d(c,b)},code:function(a){return function(a){if(typeof a.MathJax=="undefined"){var b=jQuery(a);a.className&&b.wrap("<span class='"+a.className+"'></span>"),a.type="math/tex",a.style.display="none";var c=b.text();b.text(KhanUtil.cleanMath?KhanUtil.cleanMath(c):c),typeof MathJax!="undefined"&&MathJax.Hub.Queue(["Typeset",MathJax.Hub,a])}else MathJax.Hub.Queue(["Reprocess",MathJax.Hub,a])}}},getVAR:function(elem,ctx){var code=elem.nodeName?jQuery(elem).text():elem;code=jQuery.trim(jQuery.tmpl.cleanHTML(code)),ctx==null&&(ctx={});try{with(Math)with(KhanUtil)with(ctx)with(VARS)return eval("(function() { return ("+code+"); })()")}catch(e){var info;elem.nodeName?(info=elem.nodeName.toLowerCase(),elem.id!=null&&elem.id.length>0&&(info+="#"+elem.id)):info=JSON.stringify(code),Khan.error("Error while evaluating "+info,e)}},cleanHTML:function(a){return a.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")}},typeof KhanUtil!="undefined"&&(KhanUtil.tmpl=jQuery.tmpl),jQuery.fn.tmplLoad=function(a,b){VARS={},b.testMode&&(jQuery.tmpl.VARS=VARS)},jQuery.fn.tmplCleanup=function(){this.find("code").each(function(){MathJax.Hub.getJaxFor(this).Remove()})},jQuery.fn.tmpl=function(){function c(a){var b=[],e=a.childNodes,f=d(a,b);if(f===!1)return c(a);if(f!==undefined){if(typeof f=="object"&&typeof f.length!="undefined")return a.parentNode&&(jQuery.each(f,function(b,c){c.nodeType&&a.parentNode.insertBefore(c,a)}),jQuery.each(f,function(a,b){c(b)}),a.parentNode.removeChild(a)),null;if(f.items){var g=a.parentNode,h=a.nextSibling;return jQuery.each(f.items,function(b,d){f.value&&(VARS[f.value]=d),f.pos&&(VARS[f.pos]=b);var e=jQuery(a).clone(!0).removeAttr("data-each").removeData("each")[0],i=["data-if","data-else-if","data-else"],j="";j+=f.pos?"var "+f.pos+" = "+JSON.stringify(b)+";":"",j+=f.value?"var "+f.value+" = "+JSON.stringify(d)+";":"";for(var k=0;k<i.length;k++){var l=i[k];jQuery(e).find("["+l+"]").each(function(){var a=jQuery(this).attr(l);a="(function() {  "+j+" return "+a+" })()",jQuery(this).attr(l,a)})}jQuery(e).find(".graphie").andSelf().filter(".graphie").each(function(){var a=jQuery(this).text();jQuery(this).text(j+a)}),h?g.insertBefore(e,h):g.appendChild(e),c(e)}),f.value&&(VARS[f.value]=f.oldValue),f.pos&&(VARS[f.pos]=f.oldPos),jQuery(a).remove(),null}}for(var i=0;i<e.length;i++)e[i].nodeType===1&&c(e[i])===null&&i--;for(var i=0,j=b.length;i<j;i++)if(b[i](a)===!1)return c(a);return a}function d(a,b){var c,d,e=jQuery(a);for(var f in jQuery.tmpl.attr){var g;/^data-/.test(f)?g=e.data(f.replace(/^data-/,"")):g=e.attr(f);if(g!==undefined){c=jQuery.tmpl.attr[f](a,g);if(typeof c=="function")b.push(c);else if(c!==undefined)return c}}var h=a.nodeName.toLowerCase();return jQuery.tmpl.type[h]!=null&&(c=jQuery.tmpl.type[h](a),typeof c=="function"&&b.push(c)),c}for(var a=0,b=this.length;a<b;a++)c(this[a]);return this},jQuery.extend(jQuery.expr[":"],{inherited:function(a){return jQuery(a).data("inherited")}}),jQuery.fn.extend({tmplApply:function(a){a=a||{};var b=a.attribute||"id",c=a.defaultApply||"replace",d={};return this.each(function(){var a=jQuery(this),e=a.attr(b),f=a.data("apply")&&!a.data("apply").indexOf("hint");e&&(e in d&&!f?(d[e]=jQuery.tmplApplyMethods[a.data("apply")||c].call(d[e],this),d[e]==null&&delete d[e]):a.closest(":inherited").length>0&&(d[e]=this))})}}),jQuery.extend({tmplApplyMethods:{remove:function(a){jQuery(this).remove(),jQuery(a).remove()},replace:function(a){return jQuery(this).replaceWith(a),a},splice:function(a){jQuery(this).replaceWith(jQuery(a).contents())},append:function(a){return jQuery(this).append(a),this},appendContents:function(a){return jQuery(this).append(jQuery(a).contents()),jQuery(a).remove(),this},prepend:function(a){return jQuery(this).prepend(a),this},prependContents:function(a){return jQuery(this).prepend(jQuery(a).contents()),jQuery(a).remove(),this},before:function(a){return jQuery(this).before(a),this},beforeContents:function(a){return jQuery(this).before(jQuery(a).contents()),jQuery(a).remove(),this},after:function(a){return jQuery(this).after(a),this},afterContents:function(a){return jQuery(this).after(jQuery(a).contents()),jQuery(a).remove(),this},appendVars:function(a){var b=jQuery(this).data("ensure")||"1",c=jQuery(a).data("ensure")||"1";return jQuery(this).data("ensure","("+b+") && ("+c+")"),jQuery.tmplApplyMethods.appendContents.call(this,a)}}})}(),jQuery.extend(KhanUtil,{toSentence:function(a,b){return b==null&&(b="en"),a.length===0?"":a.length===1?a[0]:a.length===2?a[0]+" "+b+" "+a[1]:a.slice(0,-1).join(", ")+", "+b+" "+a[a.length-1]},toSentenceTex:function(a,b,c,d){var e=jQuery.map(a,function(a){return jQuery.isFunction(c)&&c(a)||c!==undefined&&a===c?"<code class='"+d+"'>"+a+"</code>":"<code>"+a+"</code>"});return KhanUtil.toSentence(e,b)},plural:function(){var a={quiz:"quizzes",plank:"planken",rij:"rijen",druif:"druiven",is:"zijn",was:"waren",tomaat:"tomaten",banaan:"bananen",kokosnoot:"kokosnoten",kiwi:"kiwi's",citroen:"citroenen",mango:"mango's",watermeloen:"watermeloenen",pen:"pennen",potlood:"potloden",schrift:"schriften",zaag:"zagen",brood:"broden","pak melk":"pakken melk",knuffelbeer:"knuffelberen",pop:"poppen",taart:"taarten",pizza:"pizza's",persoon:"personen",auto:"auto's",boom:"bomen","hele getal":"hele getallen",tiental:"tientallen",honderdtal:"honderdtallen",duizendtal:"duizendtallen",broek:"broeken",riem:"riemen",ketting:"kettingen",stropdas:"stropdassen",trui:"truien",jas:"jassen",keer:"keer"},b=function(b){b=jQuery.trim(b);var c=b.toUpperCase()===b,d=a[b.toLowerCase()],e=b.split(/\s+/);return typeof d=="string"?d:e.length>1?(e.length===3&&/\b(in|of)\b/i.test(e[1])?e[0]=KhanUtil.plural(e[0]):e[e.length-1]=KhanUtil.plural(e[e.length-1]),e.join(" ")):(/[^aeiou]y$/i.test(b)?b=b.replace(/y$/i,"ies"):/[sxz]$/i.test(b)||/[bcfhjlmnqsvwxyz]h$/.test(b)?b+="es":b+="s",c&&(b=b.toUpperCase()),b)};return function(a,c,d){if(typeof a=="number"){var e=a!==1;return arguments.length===1?e?"s":"":(e&&(c=d||b(c)),a+" "+c)}if(typeof a=="string"){var f=b(a);typeof c=="string"&&arguments.length===3&&(f=c,c=d);var e=arguments.length<2||typeof c=="number"&&c!==1;return e?f:a}}}()}),jQuery.fn["word-problemsLoad"]=function(){var a=KhanUtil.shuffle([["Yvonne","f"],["Arco","m"],["Philipp","m"],["Ronald","m"],["Britta","f"],["Pauline","f"],["Josh","m"],["Jessica","f"],["Tjalle","m"],["Diederik","m"],["Julius","m"],["Frum","f"],["Dennis","m"],["Els","f"],["Maud","f"],["Bambi","f"],["Hanneke","f"],["Levi","m"]]),b=KhanUtil.shuffle(["fiets","auto","tram","motor","scooter","trein","bus"]),c=KhanUtil.shuffle(["algebra","chemistry","geometry","history","physics","Spanish"]),d=KhanUtil.shuffle(["examen","toets","quiz"]),e=KhanUtil.shuffle(["\\barwedge","\\veebar","\\odot","\\oplus","\\otimes","\\oslash","\\circledcirc","\\boxdot","\\bigtriangleup","\\bigtriangledown","\\dagger","\\diamond","\\star","\\triangleleft","\\triangleright"]),f=KhanUtil.shuffle([["stoel","rij","maakt"],["snoepjes","zak","vult"],["koekjes","stapel","maakt"],["boek","plank","vult"],["blikken soep","doos","vult"]]),g=KhanUtil.shuffle([{name:"kantoorboekhandel",items:KhanUtil.shuffle(["pen","potlood","schrift"])},{name:"gereedschapswinkel",items:KhanUtil.shuffle(["hamer","spijker","zaag"])},{name:"supermarkt",items:KhanUtil.shuffle(["banaan","brood","pak melk","aardappel"])},{name:"cadeauwinkel",items:KhanUtil.shuffle(["speeltje","game","souvenir"])},{name:"speelgoedwinkel",items:KhanUtil.shuffle(["knuffelbeer","videospelletje","autootje","pop"])}]),h=KhanUtil.shuffle(["pizza","taart","cake"]),i=KhanUtil.shuffle(["in de ochtend","in de middag","'s avonds"]),j=KhanUtil.shuffle(["push-up","sit-up"]),k=KhanUtil.shuffle(["appel","banaan","kokosnoot","kiwi","citroen","mango","nectarine","sinaasappel","watermeloen","druif"]),l=KhanUtil.shuffle(["schrift","krijtje","gum","map","glue stick","stift","notebook","pen","potlood"]),m=KhanUtil.shuffle(["rode","oranje","gele","groene","blauwe","paarse","witte","zwarte","bruine","zilveren","gouden","roze"]),n=KhanUtil.shuffle(["Noordwijkse school","Emmaschool","Almond","Covington","Springer","Santa Rita","Oak"]),o=KhanUtil.shuffle(["hoedje","broek","riem","ketting","tasje","bloesje","rokje","horloge","trui","sweater","stropdas","sjaal","jurkje","jas"]),p=KhanUtil.shuffle(["linker","rechter"]),q=KhanUtil.shuffle(["lange mouwen","korte mouwen"]),r=KhanUtil.shuffle([["krokodil",68,20],["miereneter",15,10],["beer",40,20],["olifant",60,10],["gorilla",20,5],["leeuw",12,5],["hagedis",3,1],["stokstaartje",13,5],["stekelvarken",20,5],["zeehond",15,10],["luiaard",16,5],["slang",25,10],["tijger",22,5],["schildpad",100,20],["zebra",25,10]]),s=KhanUtil.shuffle([{farmer:"tuinder",crops:KhanUtil.shuffle(["tomaat","aardappel","wortel","bonen","mais"]),field:"land"},{farmer:"kweker",crops:KhanUtil.shuffle(["roos","tulp","narcis","sneeuwklokje","lelie"]),field:"kas"}]),t=KhanUtil.shuffle(["kilometer"]),u=KhanUtil.shuffle([{present:"rijdt",past:"reed",noun:"fiets",done:"heeft gefietst",continuous:"aan het fietsen"},{present:"roeit",past:"roeide",noun:"boot",done:"heeft geroeid",continuous:"aan het roeien"},{present:"rijdt",past:"reed",noun:"auto",done:"heeft gereden",continuous:"aan het rijden"},{present:"loopt",past:"liep",noun:"hond",done:"heeft gelopen",continuous:"aan het lopen"}]),v=function(a){var b=["a","e","i","o","u"];return _(b).indexOf(a[0].toLowerCase())>-1?"An "+a:"A "+a};jQuery.extend(KhanUtil,{person:function(b){return a[b-1][0]},personVar:function(b){return a[b-1][0].charAt(0).toLowerCase()},he:function(b){return a[b-1][1]==="m"?"hij":"zij"},He:function(b){return a[b-1][1]==="m"?"Hij":"Zij"},him:function(b){return a[b-1][1]==="m"?"hem":"haar"},his:function(b){return a[b-1][1]==="m"?"zijn":"haar"},His:function(b){return a[b-1][1]==="m"?"Zijn":"Haar"},An:function(a){return v(a)},an:function(a){return v(a).toLowerCase()},vehicle:function(a){return b[a-1]},vehicleVar:function(a){return b[a-1].charAt(0)},course:function(a){return c[a-1]},courseVar:function(a){return c[a-1].charAt(0).toLowerCase()},exam:function(a){return d[a-1]},binop:function(a){return e[a-1]},item:function(a){return f[a-1][0]},group:function(a){return f[a-1][1]},groupVerb:function(a){return f[a-1][2]},store:function(a){return g[a].name},storeItem:function(a,b){return g[a].items[b]},pizza:function(a){return h[a]},exercise:function(a){return j[a-1]},timeofday:function(a){return i[a-1]},school:function(a){return n[a-1]},clothing:function(a){return o[a-1]},color:function(a){return m[a-1]},fruit:function(a){return k[a]},deskItem:function(a){return l[a]},distance:function(a){return t[a-1]},rode:function(a){return u[a-1].past},ride:function(a){return u[a-1].present},bike:function(a){return u[a-1].noun},biked:function(a){return u[a-1].done},biking:function(a){return u[a-1].continuous},farmer:function(a){return s[a-1].farmer},crop:function(a){return s[a-1].crops[0]},field:function(a){return s[a-1].field},side:function(a){return p[a-1]},shirtStyle:function(a){return q[a-1]},animal:function(a){return r[a-1][0]},animalAvgLifespan:function(a){return r[a-1][1]},animalStddevLifespan:function(a){return r[a-1][2]}})},jQuery.extend(KhanUtil,{spin:function(a){var b=-1,c=0;for(var d=0;d<a.length;d++)if(a.charAt(d)==="{")b===-1?b=d:c++;else if(a.charAt(d)==="}"&&b!==-1)if(c===0){var e=KhanUtil.spin(a.substring(b+1,d));a=a.substring(0,b)+e+a.substring(d+1),d-=d-b-e.length+1,b=-1}else c--;return KhanUtil.randFromArray(a.split("|"))}}),jQuery.fn.spin=function(){this.find(".spin").each(function(){var a=KhanUtil.spin(jQuery(this).html());jQuery(this).html(a)})},jQuery.extend(KhanUtil,{initUnitCircle:function(a){var b=KhanUtil.currentGraph,c={xpixels:600,ypixels:600,range:[[-1.2,1.2],[-1.2,1.2]]};c.scale=[c.xpixels/(c.range[0][1]-c.range[0][0]),c.ypixels/(c.range[1][1]-c.range[1][0])],b.init(c),b.xpixels=c.xpixels,b.ypixels=c.ypixels,b.range=c.range,b.scale=c.scale,b.angle=0,b.revolutions=0,b.quadrant=1,b.dragging=!1,b.highlight=!1,b.degrees=a,b.style({stroke:"#ddd",strokeWidth:1,arrows:"->"},function(){b.circle([0,0],1),b.line([-1.2,0],[1.2,0]),b.line([0,-1.2],[0,1.2]),b.line([1.2,0],[-1.2,0]),b.line([0,1.2],[0,-1.2])}),b.style({strokeWidth:2},function(){b.line([-1,-5/b.scale[0]],[-1,5/b.scale[0]]),b.line([1,-5/b.scale[0]],[1,5/b.scale[0]]),b.line([-5/b.scale[0],-1],[5/b.scale[0],-1]),b.line([-5/b.scale[0],1],[5/b.scale[0],1])}),b.triangle=KhanUtil.bogusShape,b.rightangle=KhanUtil.bogusShape,b.spiral=KhanUtil.bogusShape,b.arrow=KhanUtil.bogusShape,b.cosLabel=KhanUtil.bogusShape,b.sinLabel=KhanUtil.bogusShape,b.radiusLabel=KhanUtil.bogusShape,b.angleLabel=KhanUtil.
bogusShape,b.angleLines=KhanUtil.bogusShape,KhanUtil.initMouseHandlers(),KhanUtil.setAngle(b.angle)},bogusShape:{animate:function(){},attr:function(){},remove:function(){}},initMouseHandlers:function(){var a=KhanUtil.currentGraph;a.mouselayer=Raphael("unitcircle",a.xpixels,a.ypixels),jQuery(a.mouselayer.canvas).css("z-index",1),Khan.scratchpad.disable(),a.style({stroke:KhanUtil.ORANGE,fill:KhanUtil.ORANGE},function(){a.dragPoint=a.circle([1,0],4/a.scale[0])}),a.mouseTarget=a.mouselayer.circle((1-a.range[0][0])*a.scale[0],(a.range[1][1]-0)*a.scale[1],15),a.mouseTarget.attr({fill:"#000",opacity:0}),jQuery(a.mouseTarget[0]).css("cursor","move"),jQuery(a.mouseTarget[0]).bind("vmousedown vmouseover vmouseout",function(a){var b=KhanUtil.currentGraph;a.type==="vmouseover"?(b.highlight=!0,b.dragging||KhanUtil.highlightAngle()):a.type==="vmouseout"?(b.highlight=!1,b.dragging||KhanUtil.unhighlightAngle()):a.type==="vmousedown"&&(a.which===1||a.which===0)&&(a.preventDefault(),jQuery(document).bind("vmousemove vmouseup",function(a){a.preventDefault(),b.dragging=!0;var c=a.pageY-jQuery("#unitcircle").offset().top,d=a.pageX-jQuery("#unitcircle").offset().left,e=d/b.scale[0]+b.range[0][0],f=b.range[1][1]-c/b.scale[1];if(a.type==="vmousemove"){var g;e?g=Math.atan(f/e):f>0?g=-Math.PI/2:g=-Math.PI/2,g=Math.round(g/(Math.PI/36))*(Math.PI/36),e>0&&f>=0?(b.quadrant===4&&++b.revolutions,b.quadrant=1):e<=0&&f>0?(g+=Math.PI,b.quadrant=2):e<0&&f<=0?(g+=Math.PI,b.quadrant=3):e>=0&&f<0&&(g+=2*Math.PI,b.quadrant===1&&--b.revolutions,b.quadrant=4),b.revolutions<=-3?(b.revolutions=-3,g=2*Math.PI):b.revolutions>=2&&(b.revolutions=2,g=0),b.angle!=g+b.revolutions*2*Math.PI&&KhanUtil.setAngle(g+b.revolutions*2*Math.PI)}else a.type==="vmouseup"&&(jQuery(document).unbind("vmousemove vmouseup"),b.dragging=!1,b.highlight||KhanUtil.unhighlightAngle())}))})},highlightAngle:function(){var a=KhanUtil.currentGraph;a.dragPoint.animate({scale:2},50),a.angleLines.animate({stroke:KhanUtil.ORANGE},100),a.spiral.animate({stroke:KhanUtil.ORANGE},100),a.arrow.animate({fill:KhanUtil.ORANGE},100),jQuery(a.angleLabel).animate({color:KhanUtil.ORANGE},100)},unhighlightAngle:function(){var a=KhanUtil.currentGraph;a.dragPoint.animate({scale:1},50),a.angleLines.animate({stroke:KhanUtil.BLUE},100),a.spiral.animate({stroke:KhanUtil.BLUE},100),a.arrow.animate({fill:KhanUtil.BLUE},100),jQuery(a.angleLabel).animate({color:KhanUtil.BLUE},100)},setAngle:function(a){var b=KhanUtil.currentGraph;b.angle=a,b.quadrant=Math.floor((a+10*Math.PI)/(Math.PI/2))%4+1,b.revolutions=Math.floor(a/(2*Math.PI)),b.triangle.remove(),b.rightangle.remove(),b.spiral.remove(),b.arrow.remove(),b.cosLabel.remove(),b.sinLabel.remove(),b.radiusLabel.remove(),b.angleLabel.remove(),b.angleLines.remove();var c=KhanUtil.BLUE;if(b.dragging||b.highlight)c=KhanUtil.ORANGE;b.style({stroke:c,strokeWidth:3}),b.angleLines=b.path([[1,0],[0,0],[Math.cos(a),Math.sin(a)]]),b.style({stroke:KhanUtil.BLUE,strokeWidth:1}),b.triangle=b.path([[0,0],[Math.cos(a),0],[Math.cos(a),Math.sin(a)],[0,0]]);var d=KhanUtil.roundTo(3,Math.cos(a)),e=KhanUtil.roundTo(3,Math.sin(a)),f={.866:"\\frac{\\sqrt{3}}{2}\\;(0.866)","-0.866":"-\\frac{\\sqrt{3}}{2}\\;(-0.866)",.707:"\\frac{\\sqrt{2}}{2}\\;(0.707)","-0.707":"-\\frac{\\sqrt{2}}{2}\\;(-0.707)",.5:"\\frac{1}{2}\\;(0.5)","-0.5":"-\\frac{1}{2}\\;(-0.5)"};d=f[d]?f[d]:d,e=f[e]?f[e]:e,a%Math.PI?a%(Math.PI/2)?b.quadrant===1?(b.cosLabel=b.label([Math.cos(a)/2,0],d,"below"),b.sinLabel=b.label([Math.cos(a),Math.sin(a)/2],e,"right"),b.radiusLabel=b.label([Math.cos(a)/2,Math.sin(a)/2],1,"above left"),b.rightangle=b.path([[Math.cos(a)-.04,0],[Math.cos(a)-.04,.04],[Math.cos(a),.04]])):b.quadrant===2?(b.cosLabel=b.label([Math.cos(a)/2,0],d,"below"),b.sinLabel=b.label([Math.cos(a),Math.sin(a)/2],e,"left"),b.radiusLabel=b.label([Math.cos(a)/2,Math.sin(a)/2],1,"above right"),b.rightangle=b.path([[Math.cos(a)+.04,0],[Math.cos(a)+.04,.04],[Math.cos(a),.04]])):b.quadrant===3?(b.cosLabel=b.label([Math.cos(a)/2,0],d,"above"),b.sinLabel=b.label([Math.cos(a),Math.sin(a)/2],e,"left"),b.radiusLabel=b.label([Math.cos(a)/2,Math.sin(a)/2],1,"below right"),b.rightangle=b.path([[Math.cos(a)+.04,0],[Math.cos(a)+.04,-0.04],[Math.cos(a),-0.04]])):b.quadrant===4&&(b.cosLabel=b.label([Math.cos(a)/2,0],d,"above"),b.sinLabel=b.label([Math.cos(a),Math.sin(a)/2],e,"right"),b.radiusLabel=b.label([Math.cos(a)/2,Math.sin(a)/2],1,"below left"),b.rightangle=b.path([[Math.cos(a)-.04,0],[Math.cos(a)-.04,-0.04],[Math.cos(a),-0.04]])):b.sinLabel=b.label([Math.cos(a),Math.sin(a)/2],e,"right"):b.cosLabel=b.label([Math.cos(a)/2,0],d,"below");var g=[];for(var h=0;h<=50;++h)g.push([Math.cos(h*a/50)*(.1+h*Math.abs(a)/50/Math.PI*.02),Math.sin(h*a/50)*(.1+h*Math.abs(a)/50/Math.PI*.02)]);b.style({strokeWidth:2,stroke:c}),b.spiral=b.path(g);var i=g[50][0],j=g[50][1];b.style({stroke:!1,fill:c},function(){a>Math.PI/12?(b.arrow=b.path([[i,j-.005],[i-.02,j-.03],[i+.02,j-.03],[i,j-.005]]),b.arrow.rotate((a-Math.PI/20)*(-180/Math.PI),(i-b.range[0][0])*b.scale[0],(b.range[1][1]-j)*b.scale[1])):a<-Math.PI/12?(b.arrow=b.path([[i,j+.005],[i-.02,j+.03],[i+.02,j+.03],[i,j+.005]]),b.arrow.rotate((a+Math.PI/20)*(-180/Math.PI),(i-b.range[0][0])*b.scale[0],(b.range[1][1]-j)*b.scale[1])):b.arrow=KhanUtil.bogusShape});var k=a;b.degrees?(k*=180/Math.PI,k=Math.round(k),k+="^{\\circ}"):-15<a&&a<15&&a!==0&&(k=KhanUtil.piFraction(a)),a<-3.5*Math.PI?b.angleLabel=b.label([-0.2,.2],k,"center"):a<-0.15*Math.PI?b.angleLabel=b.label([Math.cos(a/2)/5,Math.sin(a/2)/5],k,"center"):a<.15*Math.PI?b.angleLabel=b.label([0,0],k,"left"):a<3.5*Math.PI?b.angleLabel=b.label([Math.cos(a/2)/5,Math.sin(a/2)/5],k,"center"):b.angleLabel=b.label([-0.2,-0.2],k,"center"),jQuery(b.angleLabel).css("color",c),b.mouseTarget.attr("cx",(Math.cos(a)-b.range[0][0])*b.scale[0]),b.mouseTarget.attr("cy",(b.range[1][1]-Math.sin(a))*b.scale[1]),b.dragPoint.attr("cx",(Math.cos(a)-b.range[0][0])*b.scale[0]),b.dragPoint.attr("cy",(b.range[1][1]-Math.sin(a))*b.scale[1]),b.angleLines.toFront(),b.dragPoint.toFront()},goToAngle:function(a){var b=KhanUtil.currentGraph;b.degrees&&(a*=Math.PI/180);var c=1e3*Math.abs(a-b.angle)/Math.PI;jQuery(b).animate({angle:a},{duration:c,easing:"linear",step:function(a,b){KhanUtil.setAngle(a)}})},showCoordinates:function(a){var b=KhanUtil.currentGraph;b.degrees&&(a*=Math.PI/180);var c="("+KhanUtil.roundTo(3,Math.cos(a))+", "+KhanUtil.roundTo(3,Math.sin(a))+")";b.style({stroke:0,fill:KhanUtil.BLUE},function(){b.circle([Math.cos(a),Math.sin(a)],4/b.scale[0])}),b.dragPoint.toFront(),Math.floor(a/Math.PI)%2?b.coordLabel=b.label([Math.cos(a),Math.sin(a)],c,"below"):b.coordLabel=b.label([Math.cos(a),Math.sin(a)],c,"above")}});